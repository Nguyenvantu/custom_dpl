if(void 0===DayPilot)var DayPilot={};if(void 0===DayPilot.Global&&(DayPilot.Global={}),function(){function e(t){var e=DayPilot.Date.Cache.Ticks;if(e[t])return DayPilot.Stats.cacheHitsTicks+=1,e[t];var i,n=new Date(t),a=n.getUTCMilliseconds();i=0===a?"":a<10?".00"+a:a<100?".0"+a:"."+a;var o=n.getUTCSeconds();o<10&&(o="0"+o);var r=n.getUTCMinutes();r<10&&(r="0"+r);var l=n.getUTCHours();l<10&&(l="0"+l);var s=n.getUTCDate();s<10&&(s="0"+s);var d=n.getUTCMonth()+1;d<10&&(d="0"+d);var c=n.getUTCFullYear();if(c<=0)throw"The minimum year supported is 1.";c<10?c="000"+c:c<100?c="00"+c:c<1e3&&(c="0"+c);var h=c+"-"+d+"-"+s+"T"+l+":"+r+":"+o+i;return e[t]=h,h}function t(t,e){return!DayPilot.Util.isNullOrUndefined(t)&&!DayPilot.Util.isNullOrUndefined(e)&&t.toLocaleLowerCase()===e.toLocaleLowerCase()}if(void 0===DayPilot.$){DayPilot.$=function(t){return document.getElementById(t)},DayPilot.isKhtml=navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("KHTML"),DayPilot.isIE=navigator&&navigator.userAgent&&(-1!==navigator.userAgent.indexOf("MSIE")||-1!==navigator.userAgent.indexOf("Trident")),DayPilot.isIEQuirks=DayPilot.isIE&&document.compatMode&&"BackCompat"===document.compatMode,DayPilot.browser={},DayPilot.browser.ie8=(w=document.createElement("div"),w.innerHTML="\x3c!--[if IE 8]><i></i><![endif]--\x3e",1===w.getElementsByTagName("i").length),DayPilot.browser.ie9=(x=document.createElement("div"),x.innerHTML="\x3c!--[if IE 9]><i></i><![endif]--\x3e",1===x.getElementsByTagName("i").length),DayPilot.browser.ielt9=(y=document.createElement("div"),y.innerHTML="\x3c!--[if lt IE 9]><i></i><![endif]--\x3e",1===y.getElementsByTagName("i").length),DayPilot.browser.ff=navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Firefox"),DayPilot.browser.chrome=navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Chrome"),DayPilot.browser.ie=DayPilot.isIE,DayPilot.browser.webkit=navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("WebKit"),DayPilot.browser.passiveEvents=!1,function(){try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){DayPilot.browser.passiveEvents=!0}}))}catch(t){}}(),DayPilot.libs={},DayPilot.libs.angularjs="object"==typeof angularjs,DayPilot.touch={},DayPilot.touch.start=window.navigator.msPointerEnabled?"MSPointerDown":"touchstart",DayPilot.touch.move=window.navigator.msPointerEnabled?"MSPointerMove":"touchmove",DayPilot.touch.end=window.navigator.msPointerEnabled?"MSPointerUp":"touchend",DayPilot.mo2=function(t,e){if(void 0!==(e=e||window.event).offsetX){var i={x:e.offsetX+1,y:e.offsetY+1};if(!t)return i;for(var n=e.srcElement;n&&n!==t;)"SPAN"!==n.tagName&&(i.x+=n.offsetLeft,n.offsetTop>0&&(i.y+=n.offsetTop-n.scrollTop)),n=n.offsetParent;return n?i:null}if(void 0!==e.layerX){i={x:e.layerX,y:e.layerY,src:e.target};if(!t)return i;for(n=e.target;n&&"absolute"!==n.style.position&&"relative"!==n.style.position;)n=n.parentNode,DayPilot.isKhtml&&(i.y+=n.scrollTop);for(;n&&n!==t;)i.x+=n.offsetLeft,i.y+=n.offsetTop-n.scrollTop,n=n.offsetParent;return n?i:null}return null},DayPilot.mo3=function(t,e){e=e||window.event;var i,n=DayPilot.page(e);if(n)if(t){var a=DayPilot.abs(t);if(!a)return null;i={x:n.x-a.x,y:n.y-a.y}}else i={x:n.x,y:n.y};else i=DayPilot.mo2(t,e);return i.shift=e.shiftKey,i.meta=e.metaKey,i.ctrl=e.ctrlKey,i.alt=e.altKey,i},DayPilot.mc=function(t){return t.pageX||t.pageY?{x:t.pageX,y:t.pageY}:{x:t.clientX+document.documentElement.scrollLeft,y:t.clientY+document.documentElement.scrollTop}},DayPilot.Stats={},DayPilot.Stats.eventObjects=0,DayPilot.Stats.dateObjects=0,DayPilot.Stats.cacheHitsCtor=0,DayPilot.Stats.cacheHitsParsing=0,DayPilot.Stats.cacheHitsTicks=0,DayPilot.Stats.print=function(){console.log("DayPilot.Stats.eventObjects: "+DayPilot.Stats.eventObjects),console.log("DayPilot.Stats.dateObjects: "+DayPilot.Stats.dateObjects),console.log("DayPilot.Stats.cacheHitsCtor: "+DayPilot.Stats.cacheHitsCtor),console.log("DayPilot.Stats.cacheHitsParsing: "+DayPilot.Stats.cacheHitsParsing),console.log("DayPilot.Stats.cacheHitsTicks: "+DayPilot.Stats.cacheHitsTicks),console.log("DayPilot.Date.Cache.Ctor keys: "+Object.keys(DayPilot.Date.Cache.Ctor).length),console.log("DayPilot.Date.Cache.Parsing keys: "+Object.keys(DayPilot.Date.Cache.Parsing).length)},DayPilot.list=function(t,e){if(t&&t.isDayPilotList&&!e)return t;var i=DayPilot.isArray(t)||"[object NodeList]"===Object.prototype.toString.call(t),n=!i&&!DayPilot.Util.isNullOrUndefined(t),a=[];if(a.isDayPilotList=!0,a.clone=function(){var t=DayPilot.list();return a.each(function(e){t.push(e)}),t},a.each=function(t){if(t){if(a.forEach)return void a.forEach(t);for(var e=0;e<this.length;e++)t(a[e],e,a)}},a.addProps=function(t){var e=a.clone();if(t)for(var i in t)e[i]=t[i];return e},a.last=function(){return 0===a.length?null:a[a.length-1]},a.first=function(){return 0===a.length?null:a[0]},a.add=function(t){var e=a.clone();return e.push(t),e},a.map=function(t){if("function"!=typeof t)throw"DayPilot.list().map(f): Function expected";var e=DayPilot.list();return a.each(function(i,n,a){e.push(t(i,n,a))}),e},a.filter=function(t){var e=DayPilot.list();if("function"!=typeof t)throw"DayPilot.list().filter(f): Function expected";return a.each(function(i){t(i)&&e.push(i)}),e},a.concat=function(t){if(!t)return a;for(var e=a.clone(),i=0;i<t.length;i++)e.push(t[i]);return e},a.find||(a.find=function(t){if("function"!=typeof t)throw"DayPilot.list().find(f): Function expected";for(var e=0;e<this.length;e++)if(t(a[e]))return a[e]}),a.findIndex||(a.findIndex=function(t){if("function"!=typeof t)throw"DayPilot.list().findIndex(f): Function expected";for(var e=0;e<this.length;e++)if(t(a[e]))return e;return-1}),a.some||(a.some=function(t){if("function"!=typeof t)throw"DayPilot.list().some(f): Function expected";for(var e=0;e<this.length;e++)if(t(a[e]))return!0;return!1}),a.reduce||(a.reduce=function(t,e){if("function"!=typeof t)throw"DayPilot.list().reduce(f): Function expected";var i,n=0;if(void 0!==e)i=e;else{if(n=1,0===a.length)throw"DayPilot.list().reduce(f): No initial value and empty list";i=a[0]}for(var o=n;o<this.length;o++)i=t(i,a[o],o,this);return i}),a.isEmpty=function(){return 0===a.length},i)for(var o=0;o<t.length;o++)a[o]=t[o];else n&&(a[0]=t);return a},DayPilot.list.for=function(t,e){for(var i=DayPilot.list(),n=0;n<t;n++)"function"==typeof e?i.push(e(n)):i.push(n);return i},DayPilot.line=function(t,e,i,n,a){var o=e,r=i,l=n;DayPilot.deg(t,e,i,n);if(e<n){var s=e;e=n,n=s,s=t,t=i,i=s,!0}var d,c,h=DayPilot.deg(t,e,i,n),u={x:t,y:e},v={x:i,y:n},f=(d=Math.abs(t-i),c=Math.abs(e-n),(t+i)/2-Math.sqrt(d*d+c*c)/2),p=(e+n)/2,g=DayPilot.distance(u,v),y=document.createElement("div");y.setAttribute("style","border:1px solid black;width:"+g+"px;height:0px;-moz-transform:rotate("+h+"deg);-webkit-transform:rotate("+h+"deg);-ms-transform:rotate("+h+"deg);transform:rotate("+h+"deg);position:absolute;top:"+p+"px;left:"+f+"px;");var m=document.createElement("div");if(m.appendChild(y),a){var b,w=l-5,D=r-5;h=h;l>o&&(h-=180),(b=document.createElement("div")).style.borderColor="black",b.style.width="10px",b.style.height="10px",b.style.borderRadius="10px",b.style.backgroundColor="black",b.style.position="absolute",b.style.left=D+"px",b.style.top=w+"px",m.appendChild(b)}return m},DayPilot.deg=function(t,e,i,n){var a,o=Math.abs(t-i),r=Math.abs(e-n),l=(t+i)/2,s=(e+n)/2,d=Math.sqrt(o*o+r*r),c=l-d/2,h=s;o=d/2,a=Math.abs(l-c);var u=((r=Math.sqrt(Math.abs(t-c)*Math.abs(t-c)+Math.abs(e-h)*Math.abs(e-h)))*r-o*o-a*a)/(2*o*a);return 180*Math.acos(u)/Math.PI},DayPilot.complete=function(t){return"complete"===document.readyState?void t():(DayPilot.complete.list||(DayPilot.complete.list=[],DayPilot.re(document,"readystatechange",function(){if("complete"===document.readyState){for(var t=0;t<DayPilot.complete.list.length;t++)(0,DayPilot.complete.list[t])();DayPilot.complete.list=[]}})),void DayPilot.complete.list.push(t))},DayPilot.page=function(t){return void 0===(t=t||window.event).pageX||DayPilot.browser.ie?void 0!==t.clientX?{x:t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,y:t.clientY+document.body.scrollTop+document.documentElement.scrollTop}:null:{x:t.pageX,y:t.pageY}},DayPilot.rel=function(t,e){var i=DayPilot.abs(t),n=DayPilot.abs(e);return{x:i.x-n.x,y:i.y-n.y,w:t.offsetWidth,h:t.offsetHeight}},DayPilot.abs=function(t,e){if(!t)return null;if(!document.body.contains(t))return null;if(t.getBoundingClientRect){var i=DayPilot.absBoundingClientBased(t);if(e){var n=DayPilot.absOffsetBased(t,!1);e=DayPilot.absOffsetBased(t,!0);i.x+=e.x-n.x,i.y+=e.y-n.y,i.w=e.w,i.h=e.h}return i}return DayPilot.absOffsetBased(t,e)},DayPilot.absBoundingClientBased=function(t){var e=t.getBoundingClientRect();return{x:e.left+window.pageXOffset,y:e.top+window.pageYOffset,w:t.clientWidth,h:t.clientHeight,toString:function(){return"x:"+this.x+" y:"+this.y+" w:"+this.w+" h:"+this.h}}},DayPilot.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},DayPilot.absOffsetBased=function(t,e){for(var i={x:t.offsetLeft,y:t.offsetTop,w:t.clientWidth,h:t.clientHeight,toString:function(){return"x:"+this.x+" y:"+this.y+" w:"+this.w+" h:"+this.h}};DayPilot.op(t);)t=DayPilot.op(t),i.x-=t.scrollLeft,i.y-=t.scrollTop,e&&(i.x<0&&(i.w+=i.x,i.x=0),i.y<0&&(i.h+=i.y,i.y=0),t.scrollLeft>0&&i.x+i.w>t.clientWidth&&(i.w-=i.x+i.w-t.clientWidth),t.scrollTop&&i.y+i.h>t.clientHeight&&(i.h-=i.y+i.h-t.clientHeight)),i.x+=t.offsetLeft,i.y+=t.offsetTop;var n=DayPilot.pageOffset();return i.x+=n.x,i.y+=n.y,i},DayPilot.wd=function(){var t=DayPilot.isIEQuirks,e=document.documentElement.clientHeight;t&&(e=document.body.clientHeight);var i=document.documentElement.clientWidth;t&&(i=document.body.clientWidth);var n=document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop,a=document.documentElement&&document.documentElement.scrollLeft||document.body.scrollLeft,o={};return o.width=i,o.height=e,o.scrollTop=n,o.scrollLeft=a,o},DayPilot.op=function(t){try{return t.offsetParent}catch(t){return document.body}},DayPilot.distance=function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},DayPilot.doc=function(){var t=document.documentElement;return t&&t.clientHeight?t:document.body},DayPilot.pageOffset=function(){if(void 0!==window.pageXOffset)return{x:window.pageXOffset,y:window.pageYOffset};var t=DayPilot.doc();return{x:t.scrollLeft,y:t.scrollTop}},DayPilot.ac=function(t,e){if(!e)e=[];for(var i=0;t.children&&i<t.children.length;i++)e.push(t.children[i]),DayPilot.ac(t.children[i],e);return e},DayPilot.indexOf=function(t,e,i){if(!t||!t.length)return-1;for(var n=0;n<t.length;n++)if(i){if(i(t[n],e))return n}else if(t[n]===e)return n;return-1},DayPilot.contains=function(t,e){return!!t&&(t===e&&!DayPilot.isArray(t)||-1!==DayPilot.indexOf(t,e))},DayPilot.rfa=function(t,e){var i=DayPilot.indexOf(t,e);-1!==i&&t.splice(i,1)},DayPilot.sheet=function(t){var e=(t=t||window.document).createElement("style");e.setAttribute("type","text/css"),e.styleSheet||e.appendChild(t.createTextNode("")),(t.head||t.getElementsByTagName("head")[0]).appendChild(e);var i=!!e.styleSheet,n={rules:[],commit:function(){try{i&&(e.styleSheet.cssText=this.rules.join("\n"))}catch(t){}},add:function(t,a,o){if(!i){if(e.sheet.insertRule)void 0===o&&(o=e.sheet.cssRules.length),e.sheet.insertRule(t+"{"+a+"}",o);else{if(!e.sheet.addRule)throw"No CSS registration method found";e.sheet.addRule(t,a,o)}return n}this.rules.push(t+"{"+a+"}")}};return n},DayPilot.Args=function(t){var e=this;this.isArgs=!0,this.preventDefault=function(){t&&t.preventDefault(),e.preventDefault.value=!0}},DayPilot.Debug=function(t){var e=this;this.printToBrowserConsole=!1,this.enabled=!1,this.messages=[],this.a=null,this.clear=function(){this.messages=[],e.a&&(e.a.innerHTML="")},this.hide=function(){DayPilot.de(e.a),e.a=null},this.show=function(){e.a&&e.hide();var i=t.nav.top,n=document.createElement("div");n.style.position="absolute",n.style.top="0px",n.style.bottom="0px",n.style.left="0px",n.style.right="0px",n.style.backgroundColor="black",n.style.color="#ccc",n.style.overflow="auto",n.style.webkitUserSelect="auto",n.style.MozUserSelect="all",n.onclick=function(){e.hide()};for(var a=0;a<this.messages.length;a++){var o=e.messages[a].b();n.appendChild(o)}this.a=n,i.appendChild(n)},this.message=function(t,e){if(this.enabled){var i={};i.time=new DayPilot.Date,i.level=e||"debug",i.text=t,i.b=function(){var t=document.createElement("div");switch(t.innerHTML=i.time+" ("+i.level+"): "+i.text,i.level){case"error":t.style.color="red";break;case"warning":t.style.color="orange";break;case"info":t.style.color="white"}return t},this.messages.push(i),this.printToBrowserConsole&&"undefined"!=typeof console&&console.log(i)}}},DayPilot.re=function(t,e,i){if(i&&t)if(t.addEventListener)t.addEventListener(e,i,!1);else if(t.attachEvent){t.attachEvent("on"+e,function(e){i.call(t,e)})}},DayPilot.ue=function(t,e,i){t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent&&t.detachEvent("on"+e,i)},DayPilot.tr=function(t){return t?"string"==typeof t?t.replace(/^\s+|\s+$/g,""):t:""},DayPilot.ds=function(t){return DayPilot.Date.toStringSortable(t)},DayPilot.gs=function(t,e){var i=t;if(i.currentStyle)var n=i.currentStyle[e];else if(window.getComputedStyle)n=document.defaultView.getComputedStyle(i,null).getPropertyValue(e);return void 0===n&&(n=""),n},DayPilot.StyleReader=function(t){this.get=function(e){var i=DayPilot.list(e.split("-")).reduce(function(t,e,i){return t+(e=(n=e).charAt(0).toUpperCase()+n.slice(1));var n});return t?DayPilot.gs(t,i)||DayPilot.gs(t,e):null},this.getPx=function(t){var e=this.get(t);return-1===e.indexOf("px")?void 0:parseInt(e,10)},this.getFont=function(){var t="bold"===this.get("font-weight")?"bold":"",e="italic"===this.get("font-style")?"italic":"";return{family:this.get("font-family"),size:this.get("font-size"),style:e+" "+t}},this.getBackColor=function(t){void 0===t&&(t="white");var e=this.get("background-color");return DayPilot.Util.isTransparentColor(e)?t:e}},DayPilot.he=function(t){var e=t.replace(/&/g,"&amp;");return(e=(e=e.replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/"/g,"&quot;")},DayPilot.he2=function(t){var e=document.createTextNode(t),i=document.createElement("div");return i.appendChild(e),i.innerHTML},DayPilot.us=function(t){if(t){console&&console.log(t),t.setAttribute("unselectable","on"),t.style.userSelect="none",t.style.MozUserSelect="none",t.style.KhtmlUserSelect="none",t.style.webkitUserSelect="none";for(var e=0;e<t.childNodes.length;e++)1===t.childNodes[e].nodeType&&DayPilot.us(t.childNodes[e])}},DayPilot.pu=function(t){var e,i,n,a=t.attributes;if(a)for(i=a.length,e=0;e<i;e+=1)a[e]&&(n=a[e].name,"function"==typeof t[n]&&(t[n]=null));if(a=t.childNodes)for(i=a.length,e=0;e<i;e+=1)DayPilot.pu(t.childNodes[e])},DayPilot.puc=function(t){var e,i=t.childNodes;if(i){var n=i.length;for(e=0;e<n;e+=1)DayPilot.pu(t.childNodes[e])}},DayPilot.de=function(t){if(t)if(DayPilot.isArray(t))for(var e=0;e<t.length;e++)DayPilot.de(t[e]);else t.parentNode&&t.parentNode.removeChild(t)},DayPilot.fade=function(t,e,i){if(t){clearTimeout(t.messageTimeout);var n="none"!==t.style.display,a=e>0,o=e<0;if(0!==e){if(a?t.status="in":o&&(t.status="out"),a&&!n)t.target=parseFloat(t.style.opacity),t.opacity=0,t.style.opacity=0,t.style.filter="alpha(opacity=0)",t.style.display="";else if(o&&!t.target)t.target=t.style.opacity;else{var r=t.opacity,l=Math.floor(10*(r+e))/10;a&&l>t.target&&(l=t.target),o&&l<0&&(l=0);var s=100*l;t.opacity=l,t.style.opacity=l,t.style.filter="alpha(opacity="+s+")"}if(a&&(t.opacity>=t.target||t.opacity>=1)||o&&t.opacity<=0){if(t.target=null,o){t.style.opacity=t.target,t.opacity=t.target;var d=t.target?"alpha(opacity="+100*t.target+")":null;t.style.filter=d,t.style.display="none"}i&&"function"==typeof i&&(t.status=null,i())}else t.messageTimeout=setTimeout(function(){DayPilot.fade(t,e,i)},50)}}},DayPilot.sw=function(t){return t?t.offsetWidth-t.clientWidth:0},DayPilot.swa=function(){var t=document.createElement("div");t.style.position="absolute",t.style.top="-2000px",t.style.left="-2000px",t.style.width="200px",t.style.height="100px",t.style.overflow="auto";var e=document.createElement("div");e.style.width="300px",e.style.height="300px",t.appendChild(e),document.body.appendChild(t);var i=DayPilot.sw(t);return document.body.removeChild(t),i},DayPilot.sh=function(t){return t?t.offsetHeight-t.clientHeight:0},DayPilot.guid=function(){var t=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return""+t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},DayPilot.ua=function(t){if("string"==typeof t||"number"==typeof t)return[t];for(var e={},i=[],n=0,a=t.length;n<a;++n)t[n]in e||(i.push(t[n]),e[t[n]]=1);return i},DayPilot.am=function(){return"undefined"==typeof angular?null:(DayPilot.am.cached||(DayPilot.am.cached=angular.module("daypilot",[])),DayPilot.am.cached)},function(){DayPilot.pop=function(t,e){var i={w:t.offsetWidth,h:t.offsetHeight,x:parseInt(t.style.left),y:parseInt(t.style.top)};i.height=t.style.height,i.width=t.style.width,i.top=t.style.top,i.left=t.style.left,i.toString=function(){return"w: "+this.w+" h:"+this.h};var n={};if(n.finished=null,n.vertical="center",n.horizontal="center",e)for(var a in e)n[a]=e[a];t.style.visibility="hidden",t.style.display="";var o,r,l=e.animation||"fast",s=((r={fast:function(){var t=[];t.time=10;for(var e=.1;e<=1;e+=.08)t.push(e);return t},slow:function(){var t=[];t.time=10;for(var e=.1;e<=1;e+=.04)t.push(e);return t},jump:function(){var t=[];t.time=10;for(var e,i=.08,n=e=.1;n<1.2;n+=i)t.push(n),e=n;i=.03;for(var n=e;n>.8;n-=i)t.push(n),e=n;for(var n=e;n<=1;n+=i)t.push(n),e=n;return t}})[o=l]||(o="fast"),r[o]());s.div=t,s.i=0,s.target=i,s.config=n,function t(e){var i,n=e.div,a=e[e.i],o=a*e.target.h;switch(e.config.vertical){case"center":i=e.target.y-(o-e.target.h)/2;break;case"top":i=e.target.y;break;case"bottom":i=e.target.y-(o-e.target.h);break;default:throw"Unexpected 'vertical' value."}var r,l=a*e.target.w;switch(e.config.horizontal){case"left":r=e.target.x;break;case"center":r=e.target.x-(l-e.target.w)/2;break;case"right":r=e.target.x-(l-e.target.w);break;default:throw"Unexpected 'horizontal' value."}var s=DayPilot.wd(),d=s.height+s.scrollTop-(i+o);d<0&&(i+=d);var c,h=s.width-(r+l);h<0&&(r+=h),n.style.height=o+"px",n.style.top=i+"px",n.style.width=l+"px",n.style.left=r+"px",n.style.visibility="visible",e.i++,e.i<e.length-1?setTimeout((c=e,function(){t(c)}),e.time):(n.style.width=e.target.width,n.style.height=e.target.height,n.style.top=e.target.top,n.style.left=e.target.left,"function"==typeof e.config.finished&&e.config.finished())}(s)}}(),DayPilot.Util={},DayPilot.Util.addClass=function(t,e){if(e&&t)if(DayPilot.isArray(t))for(var i=0;i<t.length;i++)DayPilot.Util.addClass(t[i],e);else{if(!t.className)return void(t.className=e);new RegExp("(^|\\s)"+e+"($|\\s)").test(t.className)||(t.className=t.className+" "+e)}},DayPilot.Util.normalizeColor=function(t){return 0===t.indexOf("rgb")?"#"+((1<<24)+(+(e=(e=t).replace(/[^\d,]/g,"").split(","))[0]<<16)+(+e[1]<<8)+ +e[2]).toString(16).slice(1):t;var e},DayPilot.Util.addClassToString=function(t,e){return t?new RegExp("(^|\\s)"+e+"($|\\s)").test(t)?t:t+" "+e:e},DayPilot.Util.removeClassFromString=function(t,e){if(!t)return"";var i=new RegExp("(^|\\s)"+e+"($|\\s)");return t.replace(i," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},DayPilot.Util.removeClass=function(t,e){if(t)if(DayPilot.isArray(t))for(var i=0;i<t.length;i++)DayPilot.Util.removeClass(t[i],e);else if(t.className){var n=new RegExp("(^|\\s)"+e+"($|\\s)");t.className=t.className.replace(n," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}},DayPilot.Util.props=function(t){var e=[];for(var i in t)e.push(i),e.push(t[i]);return e.join("-")},DayPilot.Util.propArray=function(t,e,i){return DayPilot.list(t).map(function(t){return t[e]?t[e]:i})},DayPilot.Util.updatePropsFromArray=function(t,e,i){for(var n=0;n<i.length;n++)t[n][e]=i[n]},DayPilot.Util.copyProps=function(t,e,i){if(t){if(e||(e={}),void 0===i)for(var n in t)t.hasOwnProperty(n)&&void 0!==t[n]&&(e[n]=t[n]);else for(var a=0;a<i.length;a++){void 0!==t[n=i[a]]&&(e[n]=t[n])}return e}},DayPilot.Util.firstPropValue=function(t){for(var e in t)return t[e]},DayPilot.Util.isOnlyProperty=function(t,e){if(!t)return!1;for(var i in t)if(t.hasOwnProperty(i)&&i!==e)return!1;return!0},DayPilot.Util.createArrayCopy=function(t,e){if(!DayPilot.isArray(t))return[];for(var i=[],n=0;n<t.length;n++){var a={};DayPilot.Util.copyProps(t[n],a,e),i.push(a)}return i},DayPilot.Util.avg=function(t,e){return(t+e)/2},DayPilot.Util.div=function(t,e,i,n,a){var o=document.createElement("div");return(e||i||n||a)&&(n<0&&(e+=n,n*=-1),a<0&&(i+=a,a*=-1),o.style.position="absolute","number"==typeof e?o.style.left=e+"px":"string"==typeof e&&(o.style.left=e),"number"==typeof i?o.style.top=i+"px":"string"==typeof i&&(o.style.top=i),"number"==typeof n?o.style.width=n+"px":"string"==typeof n&&(o.style.width=n),"number"==typeof a?o.style.height=a+"px":"string"==typeof a&&(o.style.height=a)),t&&t.appendChild(o),o},DayPilot.Util.overlaps=function(t,e,i,n){return!(e<=i||t>=n)},DayPilot.Util.isMouseEvent=function(t){return!(!navigator.msPointerEnabled||!t.pointerType||"mouse"!==t.pointerType&&4!==t.pointerType)},DayPilot.Util.mouseButton=function(t){var e={};if(void 0===(t=t||window.event).which)switch(t.button){case 1:e.left=!0;break;case 4:e.middle=!0;break;case 2:e.right=!0;break;case 0:e.unknown=!0}else switch(t.which){case 1:e.left=!0;break;case 2:e.middle=!0;break;case 3:e.right=!0}return e},DayPilot.Util.shouldApply=function(t){if(!t)return!1;var e=t.toLowerCase();return!(e.indexOf("before")>=0||e.indexOf("after")>=0||"onrowfilter"===e||"oneventfilter"===e)},DayPilot.Util.safeApply=function(t,e){var i=t.$root.$$phase;"$apply"===i||"$digest"===i?t.$eval(e):t.$apply(e)},DayPilot.Util.members=function(t,e){var i=DayPilot.list(),n=DayPilot.list(),a=DayPilot.list(),o=t&&t.members?t.members.obsolete:[],r=t&&t.members?t.members.noCssOnly:[],l=t&&t.members?t.members.ignore:[],s=t&&t.members&&t.members.ignoreFilter?t.members.ignoreFilter:function(){return!1};for(var d in t)if(0!==d.indexOf("$")&&0!==d.indexOf("_")&&0!==d.indexOf("number")&&0!==d.indexOf("is")&&"v"!==d&&!DayPilot.contains(l,d)&&!s(d))if(0!==d.indexOf("on"))if("function"!=typeof t[d])if("object"!=typeof t[d])a.push(d);else{var c=t[d];if(0===e){a.push(d);continue}if(c&&c.nodeType>0){a.push(d);continue}if(c instanceof DayPilot.Bubble){a.push(d);continue}if(c instanceof DayPilot.Date){a.push(d);continue}if(c instanceof DayPilot.Scheduler){a.push(d);continue}if(DayPilot.isArray(c)){a.push(d);continue}null===c&&a.push(d);var h=null;"number"==typeof e&&(h=e-1);for(var u=DayPilot.Util.members(c,h),v=0;v<u.events.length;v++)i.push(d+"."+u.events[v].name);for(v=0;v<u.methods.length;v++)n.push(d+"."+u.methods[v].name);for(v=0;v<u.properties.length;v++)a.push(d+"."+u.properties[v].name)}else n.push(d);else i.push(d);i.sort(),n.sort(),a.sort();var f=function(t){for(var e=0;e<t.length;e++){var i=t[e],n={};n.name=i,t[e]=n,DayPilot.contains(o,i)&&(n.obsolete=!0),DayPilot.contains(r,i)&&(n.noCssOnly=!0),-1!==i.indexOf("CallBack")&&(n.aspnet=!0,n.mvc=!0),-1!==i.indexOf("PostBack")&&(n.aspnet=!0),-1!==i.indexOf("Notify")&&(n.aspnet=!0,n.mvc=!0)}};return f(i),f(n),f(a),{events:i,methods:n,properties:a}},DayPilot.Util.replaceCharAt=function(t,e,i){return t.substr(0,e)+i+t.substr(e+i.length)},DayPilot.Util.evalVariable=function(e,t){if(t=t||["object"],null===e||void 0===e)return null;if(-1!==DayPilot.indexOf(t,typeof e))return e;if("string"!=typeof e)throw"Unable to resolve a variable name (not a string).";if(!/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e))throw"Invalid variable name: "+e;return eval(e)},DayPilot.Util.evalFunction=function(e){if(null===e)return null;if("function"==typeof e)return e;if("string"!=typeof e)throw"Unable to resolve a function (not a string).";if(!/^\(?function/.test(e))throw"Invalid function string";return eval("("+e+")")},DayPilot.Util.isNullOrUndefined=function(t){return null===t||void 0===t},DayPilot.Util.log=function(t){window.console&&window.console.log&&window.console.log(t)},DayPilot.Util.adiff=function(t,e,i){var n={add:[],remove:[]};return n},DayPilot.Util.workerFrom=function(t){var e=t.toString(),i=e.slice(e.indexOf("{")+1,e.lastIndexOf("}")),n=new Blob([i]),a=window.URL.createObjectURL(n);return new Worker(a)},DayPilot.Util.dataUriToBlob=function(t){if("string"!=typeof t)throw"DayPilot.Util.dataUriToBlob(): dataURI string expected";for(var e=t.split(","),i=e[0],n=e[1],a=-1!==i.indexOf("base64")?atob:decodeURI,o=i.split(":")[1].split(";")[0],r=a(n),l=new window.Uint8Array(r.length),s=0;s<r.length;s++)l[s]=r.charCodeAt(s);return new Blob([l],{type:o})},DayPilot.Util.downloadDataUri=function(t,e){var i=DayPilot.Util.dataUriToBlob(t);DayPilot.Util.downloadBlob(i,e)},DayPilot.Util.downloadBlob=function(t,e){e=e||"download";if(window.navigator.msSaveBlob)window.navigator.msSaveBlob(t,e);else{var i=window.URL.createObjectURL(t),n=document.createElement("a");n.download=e,n.href=i,n.style="display:none",document.body.appendChild(n),n.click(),setTimeout(function(){document.body.removeChild(n),window.URL.revokeObjectURL(i)})}},DayPilot.Util.monitor=function(t,e,i){var n=t[e];t[e]=function(){i.apply(t,arguments),n.apply(t,arguments)}},DayPilot.Util.isTransparentColor=function(t){return"transparent"===t||"rgba(0, 0, 0, 0)"===t},DayPilot.Util.stripTags=function(t){if(DayPilot.Util.isNullOrUndefined(t))return t;if("string"==typeof t)return t.replace(/<(?:.|\n)*?>/gm,"");throw new DayPilot.Exception("Unable to strip tags from a non-string")},DayPilot.Areas={},DayPilot.Areas.attach=function(t,e,n){var a=(n=n||{}).areas,o=n.allowed||function(){return!0},r=n.offsetX||0;(a=i(e,a))&&DayPilot.isArray(a)&&0!==a.length&&(DayPilot.re(t,"mousemove",function(i){t.active||t.areasDisabled||!o()||DayPilot.Areas.showAreas(t,e,i,a,{offsetX:r,eventDiv:n.eventDiv})}),DayPilot.re(t,"mouseout",function(e){DayPilot.Areas.hideAreas(t,e)}),DayPilot.list(a).each(function(i){if("Visible"===(i.visibility||i.v||"Visible")){var a=DayPilot.Areas.createArea(t,e,i,{offsetX:r,eventDiv:n.eventDiv});t.appendChild(a)}}))},DayPilot.Areas.disable=function(t){t.areasDisabled=!0,DayPilot.list(t.childNodes).filter(function(t){return t.isActiveArea&&!t.area.start}).each(function(t){t.style.display="none"})},DayPilot.Areas.enable=function(t){t.areasDisabled=!1,DayPilot.list(t.childNodes).filter(function(t){return t.isActiveArea&&!t.area.start}).each(function(t){t.style.display=""})},DayPilot.Areas.remove=function(t){var e=DayPilot.list(t.childNodes).filter(function(t){return t.isActiveArea});DayPilot.de(e)};var i=function(t,e){return DayPilot.isArray(e)||((e=t.areas)||(t.cache?e=t.cache.areas:t.data&&(e=t.data.areas))),e};DayPilot.Areas.showAreas=function(t,e,i,n,a){if(!DayPilot.Global.resizing&&!DayPilot.Global.moving){if(DayPilot.Areas.all&&DayPilot.Areas.all.length>0)for(var o=0;o<DayPilot.Areas.all.length;o++){var r=DayPilot.Areas.all[o];r!==t&&DayPilot.Areas.hideAreas(r,i)}if(!t.active&&(t.active={},DayPilot.isArray(n)||((n=e.areas)||(e.cache?n=e.cache.areas:e.data&&(n=e.data.areas))),n&&0!==n.length&&!(t.areas&&t.areas.length>0))){t.areas=[];for(o=0;o<n.length;o++){var l=n[o];if("Hover"===(l.visibility||l.v||"Visible")){var s=DayPilot.Areas.createArea(t,e,l,a);t.areas.push(s),t.appendChild(s),DayPilot.Areas.all.push(t)}}t.active.children=DayPilot.ac(t)}}},DayPilot.Areas.createArea=function(t,e,i,n){var a=(n=n||{}).offsetX||0,r=n.eventDiv||t,l=document.createElement("div");l.isActiveArea=!0,l.area=i,l.setAttribute("unselectable","on");var s,d,c,h,u,v,f,p,g,y,m,b,w,D,P,x,k,C,S,T,E,M,H,R,B,A,_,U,N,L,O,I,z,j=i.w||i.width,q=i.h||i.height,W=i.cssClass||i.css||i.className;if(void 0!==i.style&&l.setAttribute("style",i.style),l.style.position="absolute",void 0!==j&&(l.style.width=j+"px"),void 0!==q&&(l.style.height=q+"px"),void 0!==i.right&&(l.style.right=i.right+"px"),void 0!==i.top&&(l.style.top=i.top+"px"),void 0!==i.left&&(l.style.left=i.left+a+"px"),void 0!==i.bottom&&(l.style.bottom=i.bottom+"px"),void 0!==i.html&&i.html)l.innerHTML=i.html;else if(i.icon){var F=document.createElement("i");F.className=i.icon,l.appendChild(F)}else if(i.image){var G=document.createElement("img");G.src=i.image,l.appendChild(G)}if(W&&(l.className=W),i.toolTip&&l.setAttribute("title",i.toolTip),i.backColor&&(l.style.background=i.backColor),i.background&&(l.style.background=i.background),i.fontColor&&(l.style.color=i.fontColor),i.padding&&(l.style.padding=i.padding+"px",l.style.boxSizing="border-box"),"ResizeEnd"===i.action||"ResizeStart"===i.action||"Move"===i.action){if(e.calendar.isCalendar)switch(i.action){case"ResizeEnd":i.cursor="s-resize",i.dpBorder="bottom";break;case"ResizeStart":i.cursor="n-resize",i.dpBorder="top";break;case"Move":i.cursor="move"}if(e.calendar.isScheduler||e.calendar.isMonth)switch(i.action){case"ResizeEnd":i.cursor="e-resize",i.dpBorder="right";break;case"ResizeStart":i.cursor="w-resize",i.dpBorder="left";break;case"Move":i.cursor="move"}l.onmousemove=(d=r,c=e,h=i,function(t){(t=t||window.event).cancelBubble=!0,c.calendar.internal&&c.calendar.internal.dragInProgress&&c.calendar.internal.dragInProgress()||(d.style.cursor=h.cursor,h.dpBorder&&(d.dpBorder=h.dpBorder))}),l.onmouseout=(s=r,function(t){s.style.cursor=""})}if(("ResizeEnd"===i.action||"ResizeStart"===i.action)&&e.isEvent&&e.calendar.internal.touch){var J=(u=r,v=e,f=i,function(t){t.cancelBubble=!0;var e=v.calendar.internal.touch,i=t.touches?t.touches[0]:t,n={x:i.pageX,y:i.pageY};v.calendar.coords=e.relativeCoords(t),e.preventEventTap=!0,v.calendar.isScheduler?e.startResizing(u,"ResizeEnd"===f.action?"right":"left"):v.calendar.isCalendar&&e.startResizing(u,"ResizeEnd"===f.action?"bottom":"top",n)});DayPilot.re(l,DayPilot.touch.start,J)}if("ContextMenu"===i.action&&e.isEvent&&e.calendar.internal.touch){J=(p=r,g=e,y=i,function(t){t.cancelBubble=!0,t.preventDefault(),o(p,g,y,t),g.calendar.internal.touch.preventEventTap=!0});var Y=function(t){t.cancelBubble=!0,t.preventDefault()};DayPilot.re(l,DayPilot.touch.start,J),DayPilot.re(l,DayPilot.touch.end,Y)}if("Bubble"===i.action&&e.isEvent&&e.calendar.internal.touch){J=(m=e,function(t){var e,i;t.cancelBubble=!0,t.preventDefault(),e=m,i=t,DayPilot.Bubble&&DayPilot.Bubble.touchPosition(i),e.calendar.bubble&&e.calendar.bubble.showEvent(e,!0),m.calendar.internal.touch.preventEventTap=!0}),Y=function(t){t.cancelBubble=!0,t.preventDefault()};DayPilot.re(l,DayPilot.touch.start,J),DayPilot.re(l,DayPilot.touch.end,Y)}if("Move"===i.action&&e.isEvent&&e.calendar.internal.touch){J=(b=r,w=e,function(t){t.cancelBubble=!0;var e=w.calendar.internal.touch,i=t.touches?t.touches[0]:t,n={x:i.pageX,y:i.pageY};w.calendar.coords=e.relativeCoords(t),e.preventEventTap=!0,e.startMoving(b,n)});DayPilot.re(l,DayPilot.touch.start,J)}if("Move"===i.action&&e.isRow&&e.calendar.internal.touch,"Bubble"===i.action&&e.isEvent&&(l.onmousemove=(A=e,_=i,function(t){_.bubble?_.bubble.showEvent(A,!0):A.calendar.bubble&&A.calendar.bubble.showEvent(A,!0)}),l.onmouseout=(R=e,B=i,function(t){void 0!==DayPilot.Bubble&&(B.bubble?B.bubble.hideOnMouseOut():R.calendar.bubble&&R.calendar.bubble.hideOnMouseOut())})),"Bubble"===i.action&&e.isRow&&(l.onmousemove=(M=e,H=i,function(t){H.bubble?H.bubble.showResource(M,!0):M.calendar.resourceBubble&&M.calendar.resourceBubble.showResource(M,!0)}),l.onmouseout=(T=e,E=i,function(t){void 0!==DayPilot.Bubble&&(E.bubble?E.bubble.hideOnMouseOut():T.calendar.resourceBubble&&T.calendar.resourceBubble.hideOnMouseOut())})),"HoverMenu"===i.action&&(l.onmousemove=(C=e,S=i,function(t){var e=S.menu;"string"==typeof e&&(e=DayPilot.Util.evalVariable(e)),e&&e.show&&(e.visible?e.source&&void 0!==e.source.id&&e.source.id!==C.id&&e.show(C):e.show(C),e.cancelHideTimeout())}),l.onmouseout=(k=i,function(t){var e=k.menu;"string"==typeof e&&(e=DayPilot.Util.evalVariable(e)),e&&e.hideOnMouseOver&&e.delayedHide()})),"JavaScript"===i.action){J=(x=e,function(t){DayPilot.Util.isMouseEvent(t)||(t.cancelBubble=!0,t.preventDefault(),x.calendar.internal.touch.start=!0)}),Y=(D=e,P=i,function(t){if(!DayPilot.Util.isMouseEvent(t)){t.cancelBubble=!0,t.preventDefault(),D.calendar.internal.touch.start=!1;var e=P.js;if("string"==typeof e&&(e=DayPilot.Util.evalFunction(P.js)),"function"==typeof e){var i=P.target||D;e.call(this,i)}}});DayPilot.re(l,DayPilot.touch.start,J),DayPilot.re(l,DayPilot.touch.end,Y)}return l.onmousedown=(O=t,I=e,z=i,function(t){if("function"==typeof z.onmousedown&&z.onmousedown(t),"function"==typeof z.mousedown){var e={};e.area=z,e.div=O,e.originalEvent=t,e.source=I,z.mousedown(e)}if("Move"===z.action&&I.isRow){var i=I.$.row;I.calendar.internal.rowtools.startMoving(i)}void 0!==DayPilot.Bubble&&DayPilot.Bubble.hideActive(),"Move"===z.action&&(DayPilot.Global.movingAreaData=z.data),"Move"!==z.action&&"ResizeEnd"!==z.action&&"ResizeStart"!==z.action&&z.action&&((t=t||window.event).preventDefault(),t.cancelBubble=!0)}),l.onclick=(U=t,N=e,L=i,function(t){t=t||window.event;var e={};if(e.area=L,e.source=N,e.originalEvent=t,e.preventDefault=function(){e.preventDefault.value=!0},"function"!=typeof L.onClick||(L.onClick(e),!e.preventDefault.value)){switch(L.action){case"JavaScript":var i=L.js;if("string"==typeof i&&(i=DayPilot.Util.evalFunction(L.js)),"function"==typeof i){var n=L.target||N;i.call(this,n)}t.cancelBubble=!0;break;case"ContextMenu":o(U,N,L,t),t.cancelBubble=!0;break;case"CallBack":t.cancelBubble=!0}"function"==typeof L.onClicked&&L.onClicked(e)}}),l},DayPilot.Areas.all=[],DayPilot.Areas.hideAreas=function(t,e){if(t&&t&&t.active){var i=t.active,n=t.areas;if(i&&i.children)if(e=e||window.event){var a=e.toElement||e.relatedTarget;if(~DayPilot.indexOf(i.children,a))return}if(!n||0===n.length)return void(t.active=null);DayPilot.de(n),t.active=null,t.areas=[],DayPilot.rfa(DayPilot.Areas.all,t),i.children=null}},DayPilot.Areas.hideAll=function(t){if(DayPilot.Areas.all&&0!==DayPilot.Areas.all.length)for(var e=0;e<DayPilot.Areas.all.length;e++)DayPilot.Areas.hideAreas(DayPilot.Areas.all[e],t)},DayPilot.Action=function(t,e,i,n){var a=this;this.calendar=t,this.isAction=!0,this.action=e,this.params=i,this.data=n,this.notify=function(){a.calendar.internal.invokeEvent("Immediate",this.action,this.params,this.data)},this.auto=function(){a.calendar.internal.invokeEvent("Notify",this.action,this.params,this.data)},this.queue=function(){a.calendar.queue.add(this)},this.toJSON=function(){var t={};return t.name=this.action,t.params=this.params,t.data=this.data,t}},DayPilot.Selection=function(t,e,i,n){this.menuType="selection",this.start=new DayPilot.Date(t),this.end=new DayPilot.Date(e),this.resource=i,this.root=n,this.calendar=n,this.toJSON=function(t){var e={};return e.start=this.start,e.end=this.end,e.resource=this.resource,e}},DayPilot.Link=function(t,e){this.isLink=!0,this.data=t,this.calendar=e,this.to=function(){return this.data.to},this.from=function(){return this.data.from},this.type=function(){return this.data.type},this.id=function(){return this.data.id},this.toJSON=function(){var t={};return t.from=this.data.from,t.to=this.data.to,t.id=this.data.id,t.type=this.data.type,t}},DayPilot.Event=function(t,e,i){var n=this;this.calendar=e,this.data=t||{},this.part=i||{},void 0===this.data.id&&(this.data.id=this.data.value);var a={},o=["id","text","start","end","resource"];this.isEvent=!0,DayPilot.Stats.eventObjects+=1,this.temp=function(){if(a.dirty)return a;for(var t=0;t<o.length;t++)a[o[t]]=n.data[o[t]];return a.dirty=!0,a},this.copy=function(){var t={};return DayPilot.Util.copyProps(n.data,t),t},this.commit=function(){if(a.dirty){for(var t=0;t<o.length;t++)n.data[o[t]]=a[o[t]];a.dirty=!1}},this.dirty=function(){return a.dirty},this.id=function(t){return void 0===t?n.data.id:void(this.temp().id=t)},this.value=function(t){return void 0===t?n.id():void n.id(t)},this.text=function(t){return void 0===t?n.data.text:(this.temp().text=t,void this.client.innerHTML(t))},this.start=function(t){return void 0===t?new DayPilot.Date(n.data.start):void(this.temp().start=new DayPilot.Date(t))},this.end=function(t){return void 0===t?e&&e.internal.adjustEndNormalize?e.internal.adjustEndNormalize(new DayPilot.Date(n.data.end)):new DayPilot.Date(n.data.end):void(this.temp().end=new DayPilot.Date(t))},this.duration=function(){return new DayPilot.Duration(this.start(),this.end())},this.rawend=function(){return"undefined"==typeof val?e&&e.internal.adjustEndIn?e.internal.adjustEndIn(new DayPilot.Date(n.data.end)):new DayPilot.Date(n.data.end):void(this.temp().end=new DayPilot.Date(val))},this.partStart=function(){return new DayPilot.Date(this.part.start)},this.partEnd=function(){return new DayPilot.Date(this.part.end)},this.row=function(){return this.resource()},this.allday=function(){return"undefined"==typeof val?n.data.allday:void(this.temp().allday=val)},this.isAllDay=this.allday,this.resource=function(t){return void 0===t?n.data.resource:void(this.temp().resource=t)},this.recurrent=function(){return n.data.recurrent},this.recurrentMasterId=function(){return n.data.recurrentMasterId},this.useBox=function(){return this.part.box},this.staticBubbleHTML=function(){return this.bubbleHtml()},this.bubbleHtml=function(){return n.cache&&n.cache.bubbleHtml||n.data.bubbleHtml},this.tag=function(t){if(n.data.tags)return n.data.tags[t];var e=n.data.tag;if(!e)return null;if(void 0===t)return n.data.tag;for(var i=n.calendar.tagFields,a=-1,o=0;o<i.length;o++)t===i[o]&&(a=o);if(-1===a)throw"Field name not found.";return e[a]},this.client={},this.client.innerHTML=function(t){return void 0===t?n.cache&&void 0!==n.cache.html?n.cache.html:void 0!==n.data.html?n.data.html:n.data.text:(n.data.html=t,void(n.cache&&(n.cache.html=t)))},this.client.html=this.client.innerHTML,this.client.header=function(t){return void 0===t?n.data.header:void(n.data.header=t)},this.client.cssClass=function(t){return void 0===t?n.data.cssClass:void(n.data.cssClass=t)},this.client.toolTip=function(t){return void 0===t?n.cache&&void 0!==n.cache.toolTip?n.cache.toolTip:void 0!==n.data.toolTip?n.data.toolTip:n.data.text:void(n.data.toolTip=t)},this.client.backColor=function(t){return void 0===t?n.cache&&void 0!==n.cache.backColor?n.cache.backColor:void 0!==n.data.backColor?n.data.backColor:n.calendar.eventBackColor:void(n.data.backColor=t)},this.client.borderColor=function(t){return void 0===t?n.cache&&void 0!==n.cache.borderColor?n.cache.borderColor:void 0!==n.data.borderColor?n.data.borderColor:n.calendar.eventBorderColor:void(n.data.borderColor=t)},this.client.barColor=function(t){return void 0===t?n.cache&&void 0!==n.cache.barColor?n.cache.barColor:void 0!==n.data.barColor?n.data.barColor:n.calendar.durationBarColor:void(n.data.barColor=t)},this.client.barVisible=function(t){return void 0===t?n.cache&&void 0!==n.cache.barHidden?!n.cache.barHidden:n.calendar.durationBarVisible&&!n.data.barHidden:void(n.data.barHidden=!t)},this.client.contextMenu=function(t){if(void 0===t){if(n.oContextMenu)return n.oContextMenu;var e=n.cache?n.cache.contextMenu:n.data.contextMenu;return e?DayPilot.Util.evalVariable(e):null}n.oContextMenu=t},this.client.moveEnabled=function(t){return void 0===t?n.cache&&void 0!==n.cache.moveDisabled?!n.cache.moveDisabled:"Disabled"!==n.calendar.eventMoveHandling&&!n.data.moveDisabled:void(n.data.moveDisabled=!t)},this.client.resizeEnabled=function(t){return void 0===t?"Milestone"!==n.data.type&&(n.cache&&void 0!==n.cache.resizeDisabled?!n.cache.resizeDisabled:"Disabled"!==n.calendar.eventResizeHandling&&!n.data.resizeDisabled):void(n.data.resizeDisabled=!t)},this.client.rightClickEnabled=function(t){return void 0===t?n.cache&&void 0!==n.cache.rightClickDisabled?!n.cache.rightClickDisabled:"Disabled"!==n.calendar.rightClickHandling&&!n.data.rightClickDisabled:void(n.data.rightClickDisabled=!t)},this.client.clickEnabled=function(t){return void 0===t?n.cache&&void 0!==n.cache.clickDisabled?!n.cache.clickDisabled:"Disabled"!==n.calendar.clickHandling&&!n.data.clickDisabled:void(n.data.clickDisabled=!t)},this.client.deleteEnabled=function(t){return void 0===t?n.cache&&void 0!==n.cache.deleteDisabled?!n.cache.deleteDisabled:"Disabled"!==n.calendar.eventDeleteHandling&&!n.data.deleteDisabled:void(n.data.deleteDisabled=!t)},this.client.doubleClickEnabled=function(t){return void 0===t?n.cache&&void 0!==n.cache.doubleClickDisabled?!n.cache.doubleClickDisabled:"Disabled"!==n.calendar.eventDoubleClickHandling&&!n.data.doubleClickDisabled:void(n.data.doubleClickDisabled=!t)},this.client.deleteClickEnabled=function(t){return void 0===t?n.cache&&void 0!==n.cache.deleteDisabled?!n.cache.deleteDisabled:"Disabled"!==n.calendar.eventDeleteHandling&&!n.data.deleteDisabled:void(n.data.deleteDisabled=!t)},this.toJSON=function(t){var e={};if(e.value=this.id(),e.id=this.id(),e.text=this.text(),e.start=this.start().toJSON(),e.end=this.end().toJSON(),e.resource=this.resource(),e.isAllDay=!1,e.recurrentMasterId=this.recurrentMasterId(),e.join=this.data.join,e.tag={},n.data.tags)for(var i in n.data.tags)n.data.tags.hasOwnProperty(i)&&(e.tag[i]=""+n.data.tags[i]);else if(n.calendar&&n.calendar.tagFields)for(var a=n.calendar.tagFields,o=0;o<a.length;o++)e.tag[a[o]]=this.tag(a[o]);return e}},DayPilot.Task=function(t,e){if(!t)throw"Trying to initialize DayPilot.Task with null data parameter";var i=this,n=null;if(t instanceof DayPilot.Event)n=t,this.data=t.data.task;else{if(t instanceof DayPilot.Task)return t;t.isTaskWrapper?this.data=t.data:this.data=t}var a={},o=["id","text","start","end","complete","type"];this.isTask=!0,this.calendar=e,this.temp=function(){if(a.dirty)return a;for(var t=0;t<o.length;t++)a[o[t]]=i.data[o[t]];return a.dirty=!0,a},this.copy=function(){var t={};return DayPilot.Util.copyProps(i.data,t),t},this.commit=function(){if(a.dirty){for(var t=0;t<o.length;t++)i.data[o[t]]=a[o[t]];a.dirty=!1}},this.dirty=function(){return a.dirty},this.id=function(t){return void 0===t?i.data.id:void(this.temp().id=t)},this.text=function(t){return void 0===t?i.data.text:(this.temp().text=t,void this.client.innerHTML(t))},this.start=function(t){return void 0===t?new DayPilot.Date(i.data.start):void(this.temp().start=new DayPilot.Date(t))},this.duration=function(){return new DayPilot.Duration(this.start(),this.end())},this.end=function(t){return void 0===t?e&&"Date"===e.eventEndSpec?new DayPilot.Date(i.data.end).getDatePart().addDays(1):new DayPilot.Date(i.data.end):void(this.temp().end=new DayPilot.Date(t))},this.type=function(t){return void 0===t?n?n.data.type:i.data.type:void(this.temp().type=t)},this.complete=function(t){return void 0===t?i.data.complete?i.data.complete:0:void(this.temp().complete=t)},this.children=function(){var t=[];t.add=function(t){var e=new DayPilot.Task(t);this.data.children||(this.data.children=[]),this.children.push(e.data)};for(var i=0;this.data.children&&i<this.data.children.length;i++)t.push(new DayPilot.Task(this.data.children[i],e));return t},this.toJSON=function(t){var e={};return e.id=this.id(),e.text=this.text(),e.start=this.start().toJSON(),e.end=this.end().toJSON(),e.type=this.type(),e.tags={},DayPilot.Util.copyProps(this.data.tags,e.tags),e},this.row={};var r=this.row;r.expanded=function(t){return void 0===t?!i.data.row||!i.data.row.collapsed:(i.data.row||(i.data.row={}),!!i.data.row.collapsed!=!t&&e.internal.rowObjectForTaskData(i.data).toggle(),void(i.data.row.collapsed=!t))},r.expand=function(){r.expanded(!0)},r.collapse=function(){r.expanded(!1)},r.toggle=function(){r.expanded(!r.expanded())}},DayPilot.request=function(t,e,i,n){var a=DayPilot.createXmlHttp();a&&(a.open("POST",t,!0),a.setRequestHeader("Content-type","text/plain"),a.onreadystatechange=function(){if(4===a.readyState)return 200!==a.status&&304!==a.status?void(n?n(a):window.console&&console.log("HTTP error "+a.status)):void e(a)},4!==a.readyState&&("object"==typeof i&&(i=JSON.stringify(i)),a.send(i)))},DayPilot.ajax=function(t){if(!t)throw new DayPilot.Exception("Parameter object required.");if("string"!=typeof t.url)throw new DayPilot.Exception("The parameter object must have 'url' property.");var e=DayPilot.createXmlHttp();if(!e)throw new DayPilot.Exception("Unable to create XMLHttpRequest object");var i="object"==typeof t.data,n=t.data,a=t.method||"GET",o=t.success||function(){},r=t.error||function(){},l=t.url,s=t.contentType||(i?"application/json":"text/plain");e.open(a,l,!0),e.setRequestHeader("Content-type",s),e.onreadystatechange=function(){if(4===e.readyState)if(200===e.status||304===e.status){(t={}).request=e,t.data=JSON.parse(e.responseText),o(t)}else if(r){var t;(t={}).request=e,r(t)}else window.console&&console.log("HTTP error "+e.status)},4!==e.readyState&&(i&&(n=JSON.stringify(n)),e.send(n))},DayPilot.createXmlHttp=function(){return new XMLHttpRequest},DayPilot.Http={},DayPilot.Http.ajax=function(t){DayPilot.ajax(t)},DayPilot.Duration=function(t){var e=this;if(2===arguments.length){var i=arguments[0],n=arguments[1];if(!(i instanceof DayPilot.Date)&&"string"!=typeof i)throw"DayPilot.Duration(): Invalid start argument, DayPilot.Date expected";if(!(n instanceof DayPilot.Date)&&"string"!=typeof n)throw"DayPilot.Duration(): Invalid end argument, DayPilot.Date expected";"string"==typeof i&&(i=new DayPilot.Date(i)),"string"==typeof n&&(n=new DayPilot.Date(n)),t=n.getTime()-i.getTime()}return this.ticks=t,DayPilot.Date.Cache.DurationCtor[""+t]?DayPilot.Date.Cache.DurationCtor[""+t]:(DayPilot.Date.Cache.DurationCtor[""+t]=this,this.toString=function(t){if(!t)return e.days()+"."+e.hours()+":"+e.minutes()+":"+e.seconds()+"."+e.milliseconds();var i=e.minutes();i=(i<10?"0":"")+i;var n=t;return(n=(n=(n=(n=(n=n.replace("mm",i)).replace("m",e.minutes())).replace("H",e.hours())).replace("h",e.hours())).replace("d",e.days())).replace("s",e.seconds())},this.totalHours=function(){return e.ticks/36e5},this.totalDays=function(){return e.ticks/864e5},this.totalMinutes=function(){return e.ticks/6e4},this.totalSeconds=function(){return e.ticks/1e3},this.days=function(){return Math.floor(e.totalDays())},this.hours=function(){var t=e.ticks-864e5*e.days();return Math.floor(t/36e5)},this.minutes=function(){var t=e.ticks-36e5*Math.floor(e.totalHours());return Math.floor(t/6e4)},this.seconds=function(){var t=e.ticks-6e4*Math.floor(e.totalMinutes());return Math.floor(t/1e3)},void(this.milliseconds=function(){return e.ticks%1e3}))},DayPilot.Duration.weeks=function(t){return new DayPilot.Duration(1e3*t*60*60*24*7)},DayPilot.Duration.days=function(t){return new DayPilot.Duration(1e3*t*60*60*24)},DayPilot.Duration.hours=function(t){return new DayPilot.Duration(1e3*t*60*60)},DayPilot.Duration.minutes=function(t){return new DayPilot.Duration(1e3*t*60)},DayPilot.Duration.seconds=function(t){return new DayPilot.Duration(1e3*t)},DayPilot.TimeSpan=function(){throw"Please use DayPilot.Duration class instead of DayPilot.TimeSpan."};try{DayPilot.TimeSpan.prototype=Object.create(DayPilot.Duration.prototype)}catch(e){}DayPilot.Date=function(t,i){if(t instanceof DayPilot.Date)return t;var n;DayPilot.Util.isNullOrUndefined(t)&&(t=n=DayPilot.DateUtil.fromLocal().getTime());var a=DayPilot.Date.Cache.Ctor;if(a[t])return DayPilot.Stats.cacheHitsCtor+=1,a[t];var o=!1;if("string"==typeof t)n=DayPilot.DateUtil.fromStringSortable(t,i).getTime(),o=!0;else if("number"==typeof t){if(isNaN(t))throw"Cannot create DayPilot.Date from NaN";n=t}else{if(!(t instanceof Date))throw"Unrecognized parameter: use Date, number or string in ISO 8601 format";n=i?DayPilot.DateUtil.fromLocal(t).getTime():t.getTime()}var r=e(n);return a[r]?a[r]:(a[r]=this,a[n]=this,o&&r!==t&&DayPilot.DateUtil.hasTzSpec(t)&&(a[t]=this),Object.defineProperty&&!DayPilot.browser.ielt9?(Object.defineProperty(this,"ticks",{get:function(){return n}}),Object.defineProperty(this,"value",{value:r,writable:!1,enumerable:!0})):(this.ticks=n,this.value=r),DayPilot.Date.Config.legacyShowD&&(this.d=new Date(n)),void(DayPilot.Stats.dateObjects+=1))},DayPilot.Date.Config={},DayPilot.Date.Config.legacyShowD=!1,DayPilot.Date.Cache={},DayPilot.Date.Cache.Parsing={},DayPilot.Date.Cache.Ctor={},DayPilot.Date.Cache.Ticks={},DayPilot.Date.Cache.DurationCtor={},DayPilot.Date.Cache.clear=function(){DayPilot.Date.Cache.Parsing={},DayPilot.Date.Cache.Ctor={},DayPilot.Date.Cache.Ticks={},DayPilot.Date.Cache.DurationCtor={}},DayPilot.Date.prototype.addDays=function(t){return new DayPilot.Date(this.ticks+24*t*60*60*1e3)},DayPilot.Date.prototype.addHours=function(t){return this.addTime(60*t*60*1e3)},DayPilot.Date.prototype.addMilliseconds=function(t){return this.addTime(t)},DayPilot.Date.prototype.addMinutes=function(t){return this.addTime(60*t*1e3)},DayPilot.Date.prototype.addMonths=function(t){var e=new Date(this.ticks);if(0===t)return this;var i=e.getUTCFullYear(),n=e.getUTCMonth()+1;if(t>0){for(;t>=12;)t-=12,i++;t>12-n?(i++,n=t-(12-n)):n+=t}else{for(;t<=-12;)t+=12,i--;n+t<=0?(i--,n=12+n+t):n+=t}var a=new Date(e.getTime());a.setUTCDate(1),a.setUTCFullYear(i),a.setUTCMonth(n-1);var o=new DayPilot.Date(a).daysInMonth();return a.setUTCDate(Math.min(o,e.getUTCDate())),new DayPilot.Date(a)},DayPilot.Date.prototype.addSeconds=function(t){return this.addTime(1e3*t)},DayPilot.Date.prototype.addTime=function(t){return t instanceof DayPilot.Duration&&(t=t.ticks),new DayPilot.Date(this.ticks+t)},DayPilot.Date.prototype.addYears=function(t){var e=new Date(this.ticks),i=new Date(this.ticks),n=this.getYear()+t,a=this.getMonth();i.setUTCDate(1),i.setUTCFullYear(n),i.setUTCMonth(a);var o=new DayPilot.Date(i).daysInMonth();return i.setUTCDate(Math.min(o,e.getUTCDate())),new DayPilot.Date(i)},DayPilot.Date.prototype.dayOfWeek=function(){return new Date(this.ticks).getUTCDay()},DayPilot.Date.prototype.getDayOfWeek=function(){return new Date(this.ticks).getUTCDay()},DayPilot.Date.prototype.getDayOfYear=function(){var t=this.firstDayOfYear();return DayPilot.DateUtil.daysDiff(t,this)+1},DayPilot.Date.prototype.daysInMonth=function(){var t=new Date(this.ticks),e=t.getUTCMonth()+1,i=t.getUTCFullYear(),n=[31,28,31,30,31,30,31,31,30,31,30,31];return 2!==e?n[e-1]:i%4!=0?n[1]:i%100==0&&i%400!=0?n[1]:n[1]+1},DayPilot.Date.prototype.daysInYear=function(){var t=this.getYear();return t%4!=0?365:t%100==0&&t%400!=0?365:366},DayPilot.Date.prototype.dayOfYear=function(){return Math.ceil((this.getDatePart().getTime()-this.firstDayOfYear().getTime())/864e5)+1},DayPilot.Date.prototype.equals=function(t){if(null===t)return!1;if(t instanceof DayPilot.Date)return this===t;throw"The parameter must be a DayPilot.Date object (DayPilot.Date.equals())"},DayPilot.Date.prototype.firstDayOfMonth=function(){var t=new Date;return t.setUTCFullYear(this.getYear(),this.getMonth(),1),t.setUTCHours(0),t.setUTCMinutes(0),t.setUTCSeconds(0),t.setUTCMilliseconds(0),new DayPilot.Date(t)},DayPilot.Date.prototype.firstDayOfYear=function(){var t=this.getYear(),e=new Date;return e.setUTCFullYear(t,0,1),e.setUTCHours(0),e.setUTCMinutes(0),e.setUTCSeconds(0),e.setUTCMilliseconds(0),new DayPilot.Date(e)},DayPilot.Date.prototype.firstDayOfWeek=function(t){var e=this;if(t instanceof DayPilot.Locale)t=t.weekStarts;else if("string"==typeof t&&DayPilot.Locale.find(t)){t=DayPilot.Locale.find(t).weekStarts}else t=t||0;for(var i=e.dayOfWeek();i!==t;)e=e.addDays(-1),i=e.dayOfWeek();return new DayPilot.Date(e)},DayPilot.Date.prototype.getDay=function(){return new Date(this.ticks).getUTCDate()},DayPilot.Date.prototype.getDatePart=function(){var t=new Date(this.ticks);return t.setUTCHours(0),t.setUTCMinutes(0),t.setUTCSeconds(0),t.setUTCMilliseconds(0),new DayPilot.Date(t)},DayPilot.Date.prototype.getYear=function(){return new Date(this.ticks).getUTCFullYear()},DayPilot.Date.prototype.getHours=function(){return new Date(this.ticks).getUTCHours()},DayPilot.Date.prototype.getMilliseconds=function(){return new Date(this.ticks).getUTCMilliseconds()},DayPilot.Date.prototype.getMinutes=function(){return new Date(this.ticks).getUTCMinutes()},DayPilot.Date.prototype.getMonth=function(){return new Date(this.ticks).getUTCMonth()},DayPilot.Date.prototype.getSeconds=function(){return new Date(this.ticks).getUTCSeconds()},DayPilot.Date.prototype.getTotalTicks=function(){return this.getTime()},DayPilot.Date.prototype.getTime=function(){return this.ticks},DayPilot.Date.prototype.getTimePart=function(){var t=this.getDatePart();return DayPilot.DateUtil.diff(this,t)},DayPilot.Date.prototype.lastDayOfMonth=function(){var t=new Date(this.firstDayOfMonth().getTime()),e=this.daysInMonth();return t.setUTCDate(e),new DayPilot.Date(t)},DayPilot.Date.prototype.weekNumber=function(){var t=this.firstDayOfYear(),e=(this.getTime()-t.getTime())/864e5;return Math.ceil((e+t.dayOfWeek()+1)/7)},DayPilot.Date.prototype.weekNumberISO=function(){var t=!1,e=this.dayOfYear(),i=this.firstDayOfYear().dayOfWeek(),n=this.firstDayOfYear().addYears(1).addDays(-1).dayOfWeek();0===i&&(i=7),0===n&&(n=7);var a=8-i;4!==i&&4!==n||(t=!0);var o=Math.ceil((e-a)/7);return a>=4&&(o+=1),o>52&&!t&&(o=1),0===o&&(o=this.firstDayOfYear().addDays(-1).weekNumberISO()),o},DayPilot.Date.prototype.toDateLocal=function(){var t=new Date(this.ticks),e=new Date;return e.setFullYear(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()),e.setHours(t.getUTCHours()),e.setMinutes(t.getUTCMinutes()),e.setSeconds(t.getUTCSeconds()),e.setMilliseconds(t.getUTCMilliseconds()),e},DayPilot.Date.prototype.toDate=function(){return new Date(this.ticks)},DayPilot.Date.prototype.toJSON=function(){return this.value},DayPilot.Date.prototype.toString=function(t,e){return t?new a(t,e).print(this):this.toStringSortable()},DayPilot.Date.prototype.toStringSortable=function(){return e(this.ticks)},DayPilot.Date.parse=function(t,e,i){return new a(e,i).parse(t)};var n=0;DayPilot.Date.today=function(){return new DayPilot.Date(DayPilot.DateUtil.localToday(),!0)},DayPilot.Date.fromYearMonthDay=function(t,e,i){e=e||1,i=i||1;var n=new Date(0);return n.setUTCFullYear(t),n.setUTCMonth(e-1),n.setUTCDate(i),new DayPilot.Date(n)},DayPilot.DateUtil={},DayPilot.DateUtil.fromStringSortable=function(t,e){if(!t)throw"Can't create DayPilot.Date from an empty string";var i=t.length,n=10===i,a=19===i;if(!n&&!a&&!(i>19))throw"Invalid string format (use '2010-01-01' or '2010-01-01T00:00:00'): "+t;if(DayPilot.Date.Cache.Parsing[t]&&!e)return DayPilot.Stats.cacheHitsParsing+=1,DayPilot.Date.Cache.Parsing[t];var o=t.substring(0,4),r=t.substring(5,7),l=t.substring(8,10),s=new Date(0);if(s.setUTCFullYear(o,r-1,l),n)return DayPilot.Date.Cache.Parsing[t]=s,s;var d=t.substring(11,13),c=t.substring(14,16),h=t.substring(17,19);if(s.setUTCHours(d),s.setUTCMinutes(c),s.setUTCSeconds(h),a)return DayPilot.Date.Cache.Parsing[t]=s,s;var u=0;if("."===t[19]){var v=parseInt(t.substring(20,23));s.setUTCMilliseconds(v),u=DayPilot.DateUtil.getTzOffsetMinutes(t.substring(23))}else u=DayPilot.DateUtil.getTzOffsetMinutes(t.substring(19));var f=new DayPilot.Date(s);return e||(f=f.addMinutes(-u)),s=f.toDate(),DayPilot.Date.Cache.Parsing[t]=s,s},DayPilot.DateUtil.getTzOffsetMinutes=function(t){if(DayPilot.Util.isNullOrUndefined(t)||""===t)return 0;if("Z"===t)return 0;var e=t[0],i=60*parseInt(t.substring(1,3))+parseInt(t.substring(4));if("-"===e)return-i;if("+"===e)return i;throw"Invalid timezone spec: "+t},DayPilot.DateUtil.hasTzSpec=function(t){return!!t.indexOf("+")||!!t.indexOf("-")},DayPilot.DateUtil.daysDiff=function(t,e){if(t&&e||function(){throw"two parameters required"}(),t=new DayPilot.Date(t),e=new DayPilot.Date(e),t.getTime()>e.getTime())return null;for(var i=0,n=t.getDatePart(),a=e.getDatePart();n<a;)n=n.addDays(1),i++;return i},DayPilot.DateUtil.daysSpan=function(t,e){if(t&&e||function(){throw"two parameters required"}(),(t=new DayPilot.Date(t))===(e=new DayPilot.Date(e)))return 0;var i=DayPilot.DateUtil.daysDiff(t,e);return e==e.getDatePart()&&i--,i},DayPilot.DateUtil.diff=function(t,e){if(!(t&&e&&t.getTime&&e.getTime))throw"Both compared objects must be Date objects (DayPilot.Date.diff).";return t.getTime()-e.getTime()},DayPilot.DateUtil.fromLocal=function(t){t||(t=new Date);var e=new Date;return e.setUTCFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e.setUTCHours(t.getHours()),e.setUTCMinutes(t.getMinutes()),e.setUTCSeconds(t.getSeconds()),e.setUTCMilliseconds(t.getMilliseconds()),e},DayPilot.DateUtil.localToday=function(){var t=new Date;return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t},DayPilot.DateUtil.hours=function(t,e){var i=t.getUTCMinutes();i<10&&(i="0"+i);var n=t.getUTCHours();if(e){var a=n<12;return 0===(n=n%12)&&(n=12),n+":"+i+" "+(a?"AM":"PM")}return n+":"+i},DayPilot.DateUtil.max=function(t,e){return t.getTime()>e.getTime()?t:e},DayPilot.DateUtil.min=function(t,e){return t.getTime()<e.getTime()?t:e};var a=function(e,i){"string"==typeof i&&(i=DayPilot.Locale.find(i));i=i||DayPilot.Locale.US;var n=[{seq:"yyyy",expr:"[0-9]{4,4}",str:function(t){return t.getYear()}},{seq:"yy",expr:"[0-9]{2,2}",str:function(t){return t.getYear()%100}},{seq:"mm",expr:"[0-9]{2,2}",str:function(t){var e=t.getMinutes();return e<10?"0"+e:e}},{seq:"m",expr:"[0-9]{1,2}",str:function(t){return t.getMinutes()}},{seq:"HH",expr:"[0-9]{2,2}",str:function(t){var e=t.getHours();return e<10?"0"+e:e}},{seq:"H",expr:"[0-9]{1,2}",str:function(t){return t.getHours()}},{seq:"hh",expr:"[0-9]{2,2}",str:function(t){var e;0===(e=(e=t.getHours())%12)&&(e=12);return e<10?"0"+e:e}},{seq:"h",expr:"[0-9]{1,2}",str:function(t){var e;return 0===(e=(e=t.getHours())%12)&&(e=12),e}},{seq:"ss",expr:"[0-9]{2,2}",str:function(t){var e=t.getSeconds();return e<10?"0"+e:e}},{seq:"s",expr:"[0-9]{1,2}",str:function(t){return t.getSeconds()}},{seq:"MMMM",expr:"[^\\s0-9]*",str:function(t){return i.monthNames[t.getMonth()]},transform:function(e){var n=DayPilot.indexOf(i.monthNames,e,t);return n<0?null:n+1}},{seq:"MMM",expr:"[^\\s0-9]*",str:function(t){return i.monthNamesShort[t.getMonth()]},transform:function(e){var n=DayPilot.indexOf(i.monthNamesShort,e,t);return n<0?null:n+1}},{seq:"MM",expr:"[0-9]{2,2}",str:function(t){var e=t.getMonth()+1;return e<10?"0"+e:e}},{seq:"M",expr:"[0-9]{1,2}",str:function(t){return t.getMonth()+1}},{seq:"dddd",expr:"[^\\s0-9]*",str:function(t){return i.dayNames[t.getDayOfWeek()]}},{seq:"ddd",expr:"[^\\s0-9]*",str:function(t){return i.dayNamesShort[t.getDayOfWeek()]}},{seq:"dd",expr:"[0-9]{2,2}",str:function(t){var e=t.getDay();return e<10?"0"+e:e}},{seq:"%d",expr:"[0-9]{1,2}",str:function(t){return t.getDay()}},{seq:"d",expr:"[0-9]{1,2}",str:function(t){return t.getDay()}},{seq:"tt",expr:"(AM|PM|am|pm)",str:function(t){return t.getHours()<12?"AM":"PM"},transform:function(t){return t.toUpperCase()}}];this.init=function(){this.year=this.findSequence("yyyy"),this.month=this.findSequence("MMMM")||this.findSequence("MMM")||this.findSequence("MM")||this.findSequence("M"),this.day=this.findSequence("dd")||this.findSequence("d"),this.hours=this.findSequence("HH")||this.findSequence("H"),this.minutes=this.findSequence("mm")||this.findSequence("m"),this.seconds=this.findSequence("ss")||this.findSequence("s"),this.ampm=this.findSequence("tt"),this.hours12=this.findSequence("hh")||this.findSequence("h")},this.findSequence=function(t){function i(t){return parseInt(t)}return-1===e.indexOf(t)?null:{findValue:function(a){for(var o=e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),r=null,l=0;l<n.length;l++){var s=(n[l].length,t===n[l].seq),d=n[l].expr;s&&(d="("+d+")",r=n[l].transform),o=o.replace(n[l].seq,d)}o="^"+o+"$";try{var c=new RegExp(o).exec(a);return c?(r=r||i)(c[1]):null}catch(t){throw"unable to create regex from: "+o}}}},this.print=function(t){for(var i=function(t){for(var e=0;e<n.length;e++)if(n[e]&&n[e].seq===t)return n[e];return null},a=e.length<=0,o=0,r=[];!a;){var l=e.substring(o),s=/%?(.)\1*/.exec(l);if(s&&s.length>0){var d=s[0],c=i(d);c?r.push(c):r.push(d),o+=d.length,a=e.length<=o}else a=!0}for(var h=0;h<r.length;h++){var u=r[h];"string"!=typeof u&&(r[h]=u.str(t))}return r.join("")},this.parse=function(t){var e=this.year.findValue(t);if(!e)return null;var i=this.month.findValue(t);if(DayPilot.Util.isNullOrUndefined(i))return null;if(i>12||i<1)return null;var n=this.day.findValue(t),a=DayPilot.Date.fromYearMonthDay(e,i).daysInMonth();if(n<1||n>a)return null;var o=this.hours?this.hours.findValue(t):0,r=this.minutes?this.minutes.findValue(t):0,l=this.seconds?this.seconds.findValue(t):0,s=this.ampm?this.ampm.findValue(t):null;if(this.ampm&&this.hours12){var d=this.hours12.findValue(t);if(d<1||d>12)return null;o="PM"===s?12===d?12:d+12:12===d?0:d}if(o<0||o>23)return null;if(r<0||r>59)return null;if(l<0||l>59)return null;var c=new Date;return c.setUTCFullYear(e,i-1,n),c.setUTCHours(o),c.setUTCMinutes(r),c.setUTCSeconds(l),c.setUTCMilliseconds(0),new DayPilot.Date(c)},this.init()};DayPilot.Exception=function(t){return new Error(t)},DayPilot.Locale=function(t,e){if(this.id=t,this.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],this.dayNamesShort=["Su","Mo","Tu","We","Th","Fr","Sa"],this.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],this.monthNamesShort=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.datePattern="M/d/yyyy",this.timePattern="H:mm",this.dateTimePattern="M/d/yyyy H:mm",this.timeFormat="Clock12Hours",this.weekStarts=0,e)for(var i in e)this[i]=e[i]},DayPilot.Locale.all={},DayPilot.Locale.find=function(t){if(!t)return null;var e=t.toLowerCase();return e.length>2&&(e=DayPilot.Util.replaceCharAt(e,2,"-")),DayPilot.Locale.all[e]},DayPilot.Locale.register=function(t){DayPilot.Locale.all[t.id]=t},DayPilot.Locale.register(new DayPilot.Locale("en-au",{dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December",""],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],timePattern:"h:mm tt",datePattern:"d/MM/yyyy",dateTimePattern:"d/MM/yyyy h:mm tt",timeFormat:"Clock12Hours",weekStarts:1})),DayPilot.Locale.register(new DayPilot.Locale("vi-vn",{dayNames:["Ch nht","Th hai","Th ba","Th t","Th nm","Th su","Th by"],dayNamesShort:["Th 2","Th 3","Th 4","Th 5","Th 6","Th 7","CN"],monthNames:["Thng mt","Thng hai","Thng ba","Thng t","Thng nm","Thng su","Thng by","Thng tm","Thng chn","Thng mi","Thng mi mt","Thng mi hai",""],monthNamesShort:["Thng 1","Thng 2","Thng 3","Thng 4","Thng 5","Thng 6","Thng 7","Thng 8","Thng 9","Thng 10","Thng 11","Thng 12",""],timePattern:"h:mm tt",datePattern:"d/MM/yyyy",dateTimePattern:"d/MM/yyyy h:mm tt",timeFormat:"Clock12Hours",weekStarts:1})),DayPilot.Locale.register(new DayPilot.Locale("en-us",{dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December",""],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],timePattern:"h:mm tt",datePattern:"M/d/yyyy",dateTimePattern:"M/d/yyyy h:mm tt",timeFormat:"Clock12Hours",weekStarts:0})),DayPilot.Locale.US=DayPilot.Locale.find("en-us"),DayPilot.Switcher=function(t){var e=this;this.views=[],this.triggers=[],this.navigator={},this.selectedClass=null,this.active=null,this.day=DayPilot.Date.today(),this.onChange=null,this.onChanged=null,this.navigator.updateMode=function(t){var i=e.navigator.control;i&&(i.selectMode=t,i.select(e.day))},this.addView=function(t,i){var n;if("string"==typeof t){if(!(n=document.getElementById(t)))throw"Element not found: "+t}else n=t;var a=n,o={isView:!0};return o.id=a.id,o.control=a,o.options=i||{},o.hide=function(){a.hide?a.hide():a.nav&&a.nav.top?a.nav.top.style.display="none":a.style.display="none"},o.sendNavigate=function(t){a.backendUrl||"function"==typeof WebForm_DoCallback&&a.uniqueID?a.commandCallBack&&a.commandCallBack("navigate",{day:t}):(a.startDate=t,a.update())},o.show=function(){e.c(),a.show?a.show():a.nav&&a.nav.top?a.nav.top.style.display="":a.style.display=""},o.selectMode=function(){if(o.options.navigatorSelectMode)return o.options.navigatorSelectMode;if(a.isCalendar)switch(a.viewType){case"Day":return"day";case"Week":case"WorkWeek":return"week";default:return"day"}else if(a.isMonth)switch(a.viewType){case"Month":return"month";case"Weeks":return"week";default:return"day"}return"day"},this.views.push(o),o},this.addTrigger=function(t,i){var n;if("string"==typeof t){if(!(n=document.getElementById(t)))throw"Element not found: "+t}else n=t;var a=this.f(i);a||(a=this.addView(i));var o={isTrigger:!0};return o.element=n,o.id=n.id,o.view=a,o.onClick=function(t){e.show(o),e.g(o),(t=t||window.event)&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},DayPilot.re(n,"click",o.onClick),this.triggers.push(o),o},this.addButton=this.addTrigger,this.select=function(t){var e=this.j(t);e?e.onClick():this.triggers.length>0&&this.triggers[0].onClick()},this.j=function(t){for(var e=0;e<this.triggers.length;e++){var i=this.triggers[e];if(i.id===t)return i}return null},this.g=function(t){if(this.selectedClass){for(var e=0;e<this.triggers.length;e++){var i=this.triggers[e];DayPilot.Util.removeClass(i.element,this.selectedClass)}DayPilot.Util.addClass(t.element,this.selectedClass)}},this.addNavigator=function(t){e.navigator.control=t,t.timeRangeSelectedHandling="JavaScript",t.onTimeRangeSelected=function(){var i,n,a;if(1===t.api)i=arguments[0],n=arguments[1],a=arguments[2];else{var o=arguments[0];i=o.start,n=o.end,a=o.day}e.day=a,function(t,i,n){var a={};a.start=t,a.end=i,a.day=n,a.target=e.active.control,a.preventDefault=function(){this.preventDefault.value=!0};var o=e.k;o&&o.start===a.start&&o.end===a.end&&o.day===a.day&&o.target===a.target||(e.k=a,"function"==typeof e.onChange&&(e.onChange(a),a.preventDefault.value)||"function"==typeof e.onTimeRangeSelect&&(e.onTimeRangeSelect(a),a.preventDefault.value)||(e.active.sendNavigate(e.day),"function"==typeof e.onChanged&&e.onChanged(a),"function"==typeof e.onTimeRangeSelected&&e.onTimeRangeSelected(a)))}(i,n,a)}},this.show=function(t){var i,n;if(t.isTrigger)n=t,i=n.view;else if(i=t.isView?t:this.f(t),this.active===i)return;if(e.onSelect){var a={};a.source=n?n.element:null,a.target=i.control,e.onSelect(a)}this.active=i,i.show();var o=i.selectMode();e.navigator.updateMode(o)},this.f=function(t){for(var e=0;e<this.views.length;e++)if(this.views[e].control===t)return this.views[e];return null},this.c=function(){for(var t=0;t<this.views.length;t++)this.views[t].hide()},this.events={},this.events.load=function(t,i,n){if(!e.active||!e.active.control)throw"DayPilot.Switcher.events.load(): Active view not found";e.active.control.events.load(t,i,n)},this.k=null,this.l=function(){if(t)for(var i in t)"triggers"===i?DayPilot.list(t.triggers).each(function(t){e.addTrigger(t.id,t.view)}):"navigator"===i?e.addNavigator(t.navigator):e[i]=t[i]},this.l()},function(){if(!DayPilot.Global.defaultCss){var t=DayPilot.sheet();t.add(".bubble_default_main","cursor: default;"),t.add(".scheduler_default_main *, .scheduler_default_main *:before, .scheduler_default_main *:after","box-sizing: content-box;"),t.add(".scheduler_default_main","box-sizing: content-box; border: 1px solid #e9e9e9;font-family: Tahoma, Arial, Helvetica, sans-serif; font-size: 12px;"),t.add(".scheduler_default_selected .scheduler_default_event_inner","background: #ddd;"),t.add(".scheduler_default_timeheader","cursor: default;color: rgba(0,0,0,0.65);"),t.add(".scheduler_default_message","opacity: 0.9;filter: alpha(opacity=90);padding: 10px; color: #ffffff;background: #ffa216;"),t.add(".scheduler_default_timeheadergroup,.scheduler_default_timeheadercol","color: rgba(0,0,0,0.65);background: #fdfdfd;"),t.add(".scheduler_default_rowheader,.scheduler_default_corner","color: rgba(0,0,0,0.65);background: #fdfdfd;"),t.add(".scheduler_default_rowheader.scheduler_default_rowheader_selected","background-color: #aaa;background-image: -webkit-gradient(linear, 0 100%, 100% 0,color-stop(.25, rgba(255, 255, 255, .2)), color-stop(.25, transparent),\tcolor-stop(.5, transparent), color-stop(.5, rgba(255, 255, 255, .2)), color-stop(.75, rgba(255, 255, 255, .2)), color-stop(.75, transparent), to(transparent));background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -moz-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -ms-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);-webkit-background-size: 20px 20px;-moz-background-size: 20px 20px;background-size: 20px 20px;"),t.add(".scheduler_default_rowheader_inner","position: absolute;left: 0px;right: 0px;top: 0px;bottom: 0px;border-right: 1px solid #e0e0e0;padding: 2px;display: flex; align-items: center;"),t.add(".scheduler_default_timeheadergroup_inner","position: absolute;left: 0px;right: 0px;top: 0px;bottom: 0px;border-right: 1px solid #e9e9e9;border-bottom: 1px solid #e9e9e9;display: flex; align-items: center; justify-content: center;"),t.add(".scheduler_default_timeheadercol_inner","position: absolute;left: 0px;right: 0px;top: 0px;bottom: 0px;border-right: 1px solid #e9e9e9;display: flex; align-items: center; justify-content: center;"),t.add(".scheduler_default_timeheader_float","display: flex; align-items: center; justify-content: center;"),t.add(".scheduler_default_divider, .scheduler_default_splitter","background-color: #e9e9e9;"),t.add(".scheduler_default_divider_horizontal","background-color: #e9e9e9;"),t.add(".scheduler_default_matrix_vertical_line","background-color: #eee;"),t.add(".scheduler_default_matrix_vertical_break","background-color: #999;"),t.add(".scheduler_default_matrix_horizontal_line","background-color: #eee;"),t.add(".scheduler_default_resourcedivider","background-color: #e9e9e9;"),t.add(".scheduler_default_shadow_inner","background-color: #e6f7ff;opacity:0.8;height: 100%;"),t.add(".scheduler_default_event","font-size:13px;"),t.add(".scheduler_default_event_inner","position:absolute;top:0px;left:0px;right:0px;bottom:0px;padding:2px;overflow:hidden; display: flex; align-items: center;z-index: 1;justify-content: center;"),t.add(".scheduler_default_event_bar","top:0px;left:0px;right:0px;height:100%;background-color:#9dc8e8;"),t.add(".scheduler_default_event_bar_inner","position:absolute;"),t.add(".scheduler_default_event_inner","background: transparent;color: #ffffff;"),t.add(".scheduler_default_event_float","display: flex; align-items: center; z-index:2; color: #ffffff;"),t.add(".scheduler_default_event_float_inner","padding:2px 2px 2px 8px; position: relative;z-index:2; color: #ffffff;"),t.add(".scheduler_default_event_float_inner:after",'content:"";border-color: transparent #666 transparent transparent;border-style:solid;border-width:5px;width:0;height:0;position:absolute;top:4px;left:-4px;'),t.add(".scheduler_default_columnheader_inner","font-weight: bold;"),t.add(".scheduler_default_columnheader_splitter","box-sizing: border-box; border-right: 1px solid #e9e9e9;"),t.add(".scheduler_default_columnheader_splitter:hover","background-color: #e9e9e9;"),t.add(".scheduler_default_columnheader_cell_inner","padding: 2px;"),t.add(".scheduler_default_cell","background-color: #f9f9f9;"),t.add(".scheduler_default_cell.scheduler_default_cell_business","background-color: #fff;"),t.add(".scheduler_default_cell.scheduler_default_cell_business.scheduler_default_cell_selected,.scheduler_default_cell.scheduler_default_cell_selected","background-color: #ccc;background-image: -webkit-gradient(linear, 0 100%, 100% 0,\tcolor-stop(.25, rgba(255, 255, 255, .2)), color-stop(.25, transparent),\tcolor-stop(.5, transparent), color-stop(.5, rgba(255, 255, 255, .2)), color-stop(.75, rgba(255, 255, 255, .2)), color-stop(.75, transparent), to(transparent));background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -moz-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -ms-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);-webkit-background-size: 20px 20px;-moz-background-size: 20px 20px;background-size: 20px 20px;"),t.add(".scheduler_default_tree_image_no_children","background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAIAAABv85FHAAAAKXRFWHRDcmVhdGlvbiBUaW1lAHDhIDMwIEkgMjAwOSAwODo0NjozMSArMDEwMClDkt4AAAAHdElNRQfZAR4HLzEyzsCJAAAACXBIWXMAAA7CAAAOwgEVKEqAAAAABGdBTUEAALGPC/xhBQAAADBJREFUeNpjrK6s5uTl/P75OybJ0NLW8h8bAIozgeSxAaA4E1A7VjmgOL31MeLxHwCeXUT0WkFMKAAAAABJRU5ErkJggg==);"),t.add(".scheduler_default_tree_image_expand","background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAIAAABv85FHAAAAKXRFWHRDcmVhdGlvbiBUaW1lAHDhIDMwIEkgMjAwOSAwODo0NjozMSArMDEwMClDkt4AAAAHdElNRQfZAR4HLyUoFBT0AAAACXBIWXMAAA7CAAAOwgEVKEqAAAAABGdBTUEAALGPC/xhBQAAAFJJREFUeNpjrK6s5uTl/P75OybJ0NLW8h8bAIozgeRhgJGREc4GijMBtTNgA0BxFog+uA4IA2gmUJwFog/IgUhAGBB9KPYhA3T74Jog+hjx+A8A1KRQ+AN5vcwAAAAASUVORK5CYII=);"),t.add(".scheduler_default_tree_image_collapse","background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAIAAABv85FHAAAAKXRFWHRDcmVhdGlvbiBUaW1lAHDhIDMwIEkgMjAwOSAwODo0NjozMSArMDEwMClDkt4AAAAHdElNRQfZAR4HLxB+p9DXAAAACXBIWXMAAA7CAAAOwgEVKEqAAAAABGdBTUEAALGPC/xhBQAAAENJREFUeNpjrK6s5uTl/P75OybJ0NLW8h8bAIozgeSxAaA4E1A7VjmgOAtEHyMjI7IE0EygOAtEH5CDqY9c+xjx+A8ANndK9WaZlP4AAAAASUVORK5CYII=);"),t.add(".scheduler_default_event_move_left",'box-sizing: border-box; padding:2px;border:1px solid #ccc;background:#fff;background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#eeeeee));background: -webkit-linear-gradient(top, #ffffff 0%, #eeeeee);background: -moz-linear-gradient(top, #ffffff 0%, #eeeeee);background: -ms-linear-gradient(top, #ffffff 0%, #eeeeee);background: -o-linear-gradient(top, #ffffff 0%, #eeeeee);background: linear-gradient(top, #ffffff 0%, #eeeeee);filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr="#ffffff", endColorStr="#eeeeee");'),t.add(".scheduler_default_event_move_right",'box-sizing: border-box; padding:2px;border:1px solid #ccc;background:#fff;background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#eeeeee));background: -webkit-linear-gradient(top, #ffffff 0%, #eeeeee);background: -moz-linear-gradient(top, #ffffff 0%, #eeeeee);background: -ms-linear-gradient(top, #ffffff 0%, #eeeeee);background: -o-linear-gradient(top, #ffffff 0%, #eeeeee);background: linear-gradient(top, #ffffff 0%, #eeeeee);filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr="#ffffff", endColorStr="#eeeeee");'),t.add(".scheduler_default_event_delete","background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAYAAACprHcmAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAAAI5JREFUKFNtkLERgCAMRbmzdK8s4gAUlhYOYEHJEJYOYOEwDmGBPxC4kOPfvePy84MGR0RJ2N1A8H3N6DATwSQ57m2ql8NBG+AEM7D+UW+wjdfUPgerYNgB5gOLRHqhcasg84C2QxPMtrUhSqQIhg7ypy9VM2EUZPI/4rQ7rGxqo9sadTegw+UdjeDLAKUfhbaQUVPIfJYAAAAASUVORK5CYII=) center center no-repeat; opacity: 0.6; -ms-filter:'progid:DXImageTransform.Microsoft.Alpha(Opacity=60)';cursor: pointer;z-index: 3;"),t.add(".scheduler_default_event_delete:hover","opacity: 1;-ms-filter: none;"),t.add(".scheduler_default_rowmove_handle","background-repeat: no-repeat; background-position: center center; background-color: #ccc; background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAKCAYAAACT+/8OAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAAAClJREFUGFdj+P//P4O9vX2Bg4NDP4gNFgBytgPxebgAMsYuQGMz/jMAAFsTZDPYJlDHAAAAAElFTkSuQmCC); cursor: move;"),t.add(".scheduler_default_rowmove_source","background-color: black; opacity: 0.2;"),t.add(".scheduler_default_rowmove_position_before, .scheduler_default_rowmove_position_after","background-color: #999; height: 2px;"),t.add(".scheduler_default_rowmove_position_child","margin-left: 10px; background-color: #999; height: 2px;"),t.add(".scheduler_default_rowmove_position_child:before","content: '+'; color: #999; position: absolute; top: -8px; left: -10px;"),t.add(".scheduler_default_rowmove_position_forbidden","background-color: red; height: 2px; margin-left: 10px;"),t.add(".scheduler_default_rowmove_position_forbidden:before","content: 'x'; color: red; position: absolute; top: -8px; left: -10px;"),t.add(".scheduler_default_link_horizontal","border-bottom-style: solid; border-bottom-color: red"),t.add(".scheduler_default_link_vertical","border-right-style: solid; border-right-color: red"),t.add(".scheduler_default_link_arrow_right:before","content: ''; border-width: 6px; border-color: transparent transparent transparent red; border-style: solid; width: 0px; height:0px; position: absolute;"),t.add(".scheduler_default_link_arrow_left:before","content: ''; border-width: 6px; border-color: transparent red transparent transparent; border-style: solid; width: 0px; height:0px; position: absolute;"),t.add(".scheduler_default_link_arrow_down:before","content: ''; border-width: 6px; border-color: red transparent transparent transparent; border-style: solid; width: 0px; height:0px; position: absolute;"),t.add(".scheduler_default_link_arrow_up:before","content: ''; border-width: 6px; border-color: transparent transparent red transparent; border-style: solid; width: 0px; height:0px; position: absolute;"),t.add(".scheduler_default_shadow_overlap .scheduler_default_shadow_inner","background-color: rgb(246, 71, 68);"),t.add(".scheduler_default_block","background-color: gray; opacity: 0.5; filter: alpha(opacity=50);"),t.add(".scheduler_default_main .scheduler_default_event_group","box-sizing: border-box; font-size:13px; color:#666; padding:4px 2px 2px 2px; overflow:hidden; border:1px solid #ccc; background-color: #fff;"),t.add(".scheduler_default_main .scheduler_default_header_icon","box-sizing: border-box; border: 1px solid #e9e9e9; background-color: #f5f5f5; color: #000;z-index: 3;"),t.add(".scheduler_default_header_icon:hover","background-color: #ccc;"),t.add(".scheduler_default_header_icon_hide:before","content: '\\00AB';"),t.add(".scheduler_default_header_icon_show:before","content: '\\00BB';"),t.add(".scheduler_default_row_new .scheduler_default_rowheader_inner","padding-left: 10px; color: #666; cursor: text; background-position: 0px 5px; background-repeat: no-repeat; background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABUSURBVChTY0ACslAaK2CC0iCQDMSlECYmQFYIAl1AjFUxukIQwKoYm0IQwFCMSyEIaEJpMMClcD4Qp0CYEIBNIUzRPzAPCtAVYlWEDgyAGIdTGBgAbqEJYyjqa3oAAAAASUVORK5CYII=);"),t.add(".scheduler_default_row_new .scheduler_default_rowheader_inner:hover","background: white; color: white;"),t.add(".scheduler_default_rowheader textarea","padding: 3px;"),t.add(".scheduler_default_rowheader_scroll","cursor: default;font-weight:bold;"),t.add(".scheduler_default_shadow_forbidden .scheduler_default_shadow_inner","background-color: rgb(246, 71, 68);"),t.add(".scheduler_default_event_moving_source","opacity: 0.5; filter: alpha(opacity=50);"),t.add(".scheduler_default_linkpoint","background-color: white; border: 1px solid gray; border-radius: 5px;"),t.add(".scheduler_default_linkpoint.scheduler_default_linkpoint_hover","background-color: black;"),t.add(".scheduler_default_event.scheduler_default_event_version .scheduler_default_event_inner","background-color: #cfdde8;background-image: -webkit-gradient(linear, 0 100%, 100% 0,\tcolor-stop(.25, rgba(255, 255, 255, .2)), color-stop(.25, transparent),\tcolor-stop(.5, transparent), color-stop(.5, rgba(255, 255, 255, .2)), color-stop(.75, rgba(255, 255, 255, .2)), color-stop(.75, transparent), to(transparent));background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -moz-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -ms-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);-webkit-background-size: 20px 20px;-moz-background-size: 20px 20px;background-size: 20px 20px;"),t.add(".scheduler_default_crosshair_vertical, .scheduler_default_crosshair_horizontal, .scheduler_default_crosshair_left, .scheduler_default_crosshair_top","background-color: #9ecde233"),t.add(".scheduler_default_link_dot","border-radius: 10px; background-color: red"),t.add(".scheduler_default_task_milestone .scheduler_default_event_inner","position:absolute;top:16%;left:16%;right:16%;bottom:16%; background: #38761d; border: 0px none; -webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);-ms-transform: rotate(45deg);-o-transform: rotate(45deg); transform: rotate(45deg); filter: none;"),t.add(".scheduler_default_event_left","white-space: nowrap; padding-top: 5px; color: #666; cursor: default;"),t.add(".scheduler_default_event_right","white-space: nowrap; padding-top: 5px; color: #666; cursor: default;"),t.add(".scheduler_default_main:focus","outline: none;"),t.add(".scheduler_default_cell_focus","outline: red 2px solid; z-index: 100; opacity: 0.5;"),t.commit(),DayPilot.Global.defaultCss=!0}}();var o=function(t){var e=this;this.id=t,this.widths=[],this.titles=[],this.height=null,this.splitterWidth=3,this.css={},this.css.title=null,this.css.titleInner=null,this.css.splitter=null,this.blocks=[],this.drag={},this.updated=function(){},this.updating=function(){},this.init=function(){var i;if(!t)throw"error: id not provided";if("string"==typeof t)i=document.getElementById(t);else{if(!t.appendChild)throw"error: invalid object provided";i=t}this.div=i,this.blocks=[];for(var n=0;n<this.widths.length;n++){var a=document.createElement("div");a.style.display="inline-block",null!==e.height?a.style.height=e.height+"px":a.style.height="100%",a.style.width=this.widths[n]-this.splitterWidth+"px",a.style.overflow="hidden",a.style.verticalAlign="top",a.style.position="relative",a.setAttribute("unselectable","on"),a.className=this.css.title,i.appendChild(a);var o=document.createElement("div");o.innerHTML=this.titles[n],o.setAttribute("unselectable","on"),o.className=this.css.titleInner,a.appendChild(o);var r=document.createElement("div");r.style.display="inline-block",null!==e.height?r.style.height=e.height+"px":r.style.height="100%",r.style.width=this.splitterWidth+"px",r.style.position="relative",r.appendChild(document.createElement("div")),r.style.cursor="col-resize",r.setAttribute("unselectable","on"),r.className=this.css.splitter;var l={};l.index=n,l.width=this.widths[n],r.data=l,r.onmousedown=function(t){e.drag.start=DayPilot.page(t),e.drag.data=this.data,e.div.style.cursor="col-resize",(t=t||window.event).preventDefault?t.preventDefault():t.returnValue=!1},i.appendChild(r);var s={};s.section=a,s.handle=r,this.blocks.push(s)}this.registerGlobalHandlers()},this.updateWidths=function(){for(var t=0;t<this.blocks.length;t++){var e=this.blocks[t],i=this.widths[t];e.handle.data.width=i,this.m(t)}},this.m=function(t){var e=this.blocks[t],i=this.widths[t];e.section.style.width=i-this.splitterWidth+"px"},this.totalWidth=function(){for(var t=0,e=0;e<this.widths.length;e++)t+=this.widths[e];return t},this.gMouseMove=function(t){if(e.drag.start){var i=e.drag.data,n=DayPilot.page(t).x-e.drag.start.x,a=i.index;e.widths[a]=Math.max(5,i.width+n),e.m(a);var o={};o.widths=this.widths,o.index=i.index,e.updating(o)}},this.gMouseUp=function(t){if(e.drag.start){e.drag.start=null,document.body.style.cursor="",e.div.style.cursor="";var i=e.drag.data;i.width=e.widths[i.index];var n={};n.widths=this.widths,n.index=i.index,e.updated(n)}},this.dispose=function(){DayPilot.list(this.blocks).each(function(t){t.handle.onmousedown=null,DayPilot.de(t.section),DayPilot.de(t.handle)}),this.unregisterGlobalHandlers()},this.registerGlobalHandlers=function(){DayPilot.re(document,"mousemove",this.gMouseMove),DayPilot.re(document,"mouseup",this.gMouseUp)},this.unregisterGlobalHandlers=function(){DayPilot.ue(document,"mousemove",this.gMouseMove),DayPilot.ue(document,"mouseup",this.gMouseUp)}};DayPilot.Splitter=o}var y,x,w}(),"undefined"!=typeof Sys&&Sys.Application&&Sys.Application.notifyScriptLoaded&&Sys.Application.notifyScriptLoaded(),void 0===DayPilot)var DayPilot={};if(void 0===DayPilot.Global&&(DayPilot.Global={}),function(){if(void 0===DayPilot.Bubble){var t={mouseMove:function(e){if(void 0!==t){t.mouse=t.mousePosition(e);var i=t.active;if(i&&i.n.showPosition){var n=i.n.showPosition,a=t.mouse;n.clientX!==a.clientX||(n.clientY,a.clientY)}}},touchPosition:function(t){if(!t||!t.touches)return null;var e=t.touches[0],i={};return i.x=e.pageX,i.y=e.pageY,i.clientX=e.clientX,i.clientY=e.clientY,i},mousePosition:function(t){var e=DayPilot.mo3(null,t);return t&&(e.clientY=t.clientY,e.clientX=t.clientX),e}};DayPilot.Bubble=function(e){this.v="2018.4.3469";var i=this,n={};if(this.cssOnly=!0,this.hideAfter=100,this.loadingText="Loading...",this.animated=!0,this.animation="fast",this.position="EventTop",this.hideOnClick=!0,this.showAfter=100,this.showLoadingLabel=!0,this.zIndex=10,this.theme="bubble_default",this.onLoad=null,this.onDomAdd=null,this.onDomRemove=null,this.n=function(){},this.callBack=function(t){this.aspnet()?WebForm_DoCallback(this.uniqueID,JSON.stringify(t),this.updateView,this,this.callbackError,!0):t.calendar.internal.bubbleCallBack?t.calendar.internal.bubbleCallBack(t,this):t.calendar.bubbleCallBack(t,this)},this.callbackError=function(t,e){alert(t)},this.updateView=function(e,a){if(i!==a)throw"Callback object mismatch (internal error)";if(!e)return i.removeDiv(),void i.removeShadow();var o=null,r=null,l=null;if("string"==typeof e?r=e:"object"==typeof e&&(o=e,r=e.html,l=e.element),t.active=i,i){var s=!1;n.div&&(l?(n.div.firstChild.innerHTML="",n.div.firstChild.appendChild(l),n.div.domArgs=o,s=!0):r&&(n.div.firstChild.innerHTML=r,s=!0)),s&&(i.adjustPosition(),i.animated||i.addShadow())}},this.init=function(){},this.aspnet=function(){return"undefined"!=typeof WebForm_DoCallback},this.rounded=function(){return"Rounded"===this.corners},this.showEvent=function(e,i){var n=new t.CallBackArgs(e.calendar||e.root,"Event",e,e.bubbleHtml?e.bubbleHtml():null);i?this.show(n):this.showOnMouseOver(n)},this.showCell=function(e){t.cancelShowing();var i=new t.CallBackArgs(e.calendar||e.root,"Cell",e,e.staticBubbleHTML?e.staticBubbleHTML():null);this.showOnMouseOver(i)},this.showTime=function(e){var i=new t.CallBackArgs(e.calendar||e.root,"Time",e,e.staticBubbleHTML?e.staticBubbleHTML():null);this.showOnMouseOver(i)},this.showResource=function(e,i){var n={};n.calendar=e.calendar,n.id=e.id,n.name=e.name,n.start=e.start,e.bubbleHtml?n.bubbleHtml=function(){return e.bubbleHtml}:e.data&&e.data.bubbleHtml&&(n.bubbleHtml=function(){return e.data.bubbleHtml}),n.toJSON=function(){var t={};return t.id=this.id,t};var a=new t.CallBackArgs(n.calendar||n.root,"Resource",n,n.bubbleHtml?n.bubbleHtml():null);a.div=e.div,i?this.show(a):this.showOnMouseOver(a)},this.p=function(t){return{}},this.showHtml=function(e,i){var n=new t.CallBackArgs(null,"Html",null,e);n.div=i,this.show(n)},this.show=function(e){var a=this.animated;if(this.n.showPosition=t.mouse,t.showing=null,t.mouse){var o,r=this.getDiv(e);if("EventTop"===this.position&&r){var l=DayPilot.abs(r,!0);if(!l)return;this.n.mouse=t.mouse,this.n.mouse.x=l.x,this.n.mouse.y=l.y,this.n.mouse.h=l.h+2,this.n.mouse.w=l.w}else this.n.mouse=t.mouse;try{o=JSON.stringify(e.object)}catch(t){return}if(!(t.active===this&&this.n.sourceId===o||void 0!==DayPilot.Menu&&DayPilot.Menu.active)){i.cssOnly||(i.cssOnly=!0,DayPilot.Util.log("DayPilot: cssOnly = false mode is not supported since DayPilot Pro 8.0.")),t.hideActive(),t.active=this,this.n.sourceId=o;var s=document.createElement("div");s.setAttribute("unselectable","on"),s.style.position="absolute",this.showLoadingLabel||(s.style.display="none"),this.cssOnly?s.className=this.q("_main"):(this.width&&(s.style.width=this.width),s.style.cursor="default"),s.style.top="0px",s.style.left="0px",s.style.zIndex=this.zIndex+1,a&&(s.style.visibility="hidden"),this.hideOnClick&&(s.onclick=function(){t.hideActive()}),s.onmousemove=function(e){t.cancelShowing(),t.cancelHiding(),(e=e||window.event).cancelBubble=!0},s.oncontextmenu=function(){return!1},s.onmouseout=function(){i.delayedHide()};var d=document.createElement("div");s.appendChild(d),this.cssOnly?d.className=this.q("_main_inner"):(d.style.padding="4px",this.border&&(d.style.border=this.border),this.rounded()&&(d.style.MozBorderRadius="5px",d.style.webkitBorderRadius="5px",d.style.borderRadius="5px"),d.style.backgroundColor=this.backgroundColor),d.innerHTML=this.loadingText,document.body.appendChild(s),n.div=s;var c={};c.source=e.object,c.async=!1,c.html=e.staticHTML,c.loaded=function(){this.async&&i.r(c)},this.showLoadingLabel&&!a&&(this.adjustPosition(),this.addShadow()),e.staticHTML&&"function"!=typeof this.onLoad?i.r(c):"function"==typeof this.onLoad?(this.onLoad(c),c.async||i.r(c)):"function"==typeof i.onDomAdd?i.r(c):this.s(e)&&this.callBack(e)}}else setTimeout(function(){i.show(e)},100)},this.r=function(t){var e={};e.source=t.source,e.html=t.html,e.element=null,"function"==typeof i.onDomAdd&&i.onDomAdd(e),i.updateView(e,i)},this.getDiv=function(t){return t.div?t.div:"Event"===t.type&&t.calendar&&t.calendar.internal.findEventDiv?t.calendar.internal.findEventDiv(t.object):void 0},this.q=function(t){var e=this.theme||this.cssClassPrefix;return e?e+t:""},this.loadingElement=null,this.loadingStart=function(t){},this.loadingStop=function(){},this.adjustPosition=function(){var e=this.animated,a=this.position;if(n.div&&this.n.mouse){if(!this.n.mouse.x||!this.n.mouse.y)return void t.hideActive();var o=n.div;o.style.display="";var r=o.offsetHeight,l=o.offsetWidth;o.style.display="none";var s=DayPilot.wd(),d=s.width,c=s.height;if("Mouse"===a){var h=0;if(this.n.mouse.clientY>c-r+10?(this.n.mouse.clientY,h=this.n.mouse.y-r-10):h=this.n.mouse.y+22,"number"==typeof h&&(o.style.top=Math.max(h,0)+"px"),this.n.mouse.clientX>d-l+10){var u=this.n.mouse.clientX-(d-l)+10;o.style.left=this.n.mouse.x-u+"px"}else o.style.left=this.n.mouse.x+"px"}else if("EventTop"===a){var v=this.n.mouse.x+this.n.mouse.w/2,f=this.n.mouse.y+this.n.mouse.h+5;o.style.top=f+"px",o.style.left=v+"px"}if(o.style.display="",e){o.style.display="";var p={};p.color=o.firstChild.style.color,p.overflow=o.style.overflow,o.firstChild.style.color="transparent",o.style.overflow="hidden",this.removeShadow(),DayPilot.pop(o,{finished:function(){o.firstChild.style.color=p.color,o.style.overflow=p.overflow,i.addShadow()},vertical:"bottom",horizontal:"left",animation:i.animation})}}},this.delayedHide=function(){t.showing===this&&t.cancelShowing();var e=t.active;if(e===this&&(t.cancelHiding(),e.hideAfter>0)){var i=e.hideAfter;t.timeoutHide=window.setTimeout(t.hideActive,i)}},this.showOnMouseOver=function(e){t.active===this&&t.cancelHiding();var n;clearTimeout(t.timeoutShow),t.timeoutShow=window.setTimeout((n=e,function(){i.show(n)}),this.showAfter),t.showing=this},this.hideOnMouseOut=function(){this.delayedHide()},this.s=function(t){return!!t.calendar.backendUrl||!("function"!=typeof WebForm_DoCallback||!this.uniqueID)},this.addShadow=function(){if(this.useShadow&&!this.cssOnly&&n.div){var t=n.div;this.shadows&&this.shadows.length>0&&this.removeShadow(),this.shadows=[];for(var e=0;e<5;e++){var i=document.createElement("div");i.setAttribute("unselectable","on"),i.style.position="absolute",i.style.width=t.offsetWidth+"px",i.style.height=t.offsetHeight+"px",i.style.top=t.offsetTop+e+"px",i.style.left=t.offsetLeft+e+"px",i.style.zIndex=this.zIndex,i.style.filter="alpha(opacity:10)",i.style.opacity=.1,i.style.backgroundColor="#000000",this.rounded()&&(i.style.MozBorderRadius="5px",i.style.webkitBorderRadius="5px",i.style.borderRadius="5px"),document.body.appendChild(i),this.shadows.push(i)}}},this.removeShadow=function(){if(this.shadows){for(var t=0;t<this.shadows.length;t++)document.body.removeChild(this.shadows[t]);this.shadows=[]}},this.removeDiv=function(){if(n.div){var t=n.div.domArgs;n.div.domArgs=null,"function"==typeof i.onDomRemove&&i.onDomRemove(t),document.body.removeChild(n.div),n.div=null}},e)for(var a in e)this[a]=e[a];this.init()},DayPilot.Bubble.touchPosition=function(e){e.touches&&(t.mouse=t.touchPosition(e))},t.cancelShowing=function(){t.showing=null,t.timeoutShow&&(window.clearTimeout(t.timeoutShow),t.timeoutShow=null)},t.cancelHiding=function(){t.timeoutHide&&window.clearTimeout(t.timeoutHide)},t.hideActive=function(){t.cancelHiding();var e=t.active;e&&(e.removeDiv(),e.removeShadow()),t.active=null},t.CallBackArgs=function(t,e,i,n){this.calendar=t,this.type=e,this.object=i,this.staticHTML=n,this.toJSON=function(){var t={};return t.uid=this.calendar.uniqueID,t.type=this.type,t.object=i,t}},DayPilot.re(document,"mousemove",t.mouseMove),DayPilot.Bubble.hideActive=t.hideActive,DayPilot.Bubble.cancelShowing=t.cancelShowing,DayPilot.Bubble.hide=function(){t.hideActive()},"undefined"!=typeof Sys&&Sys.Application&&Sys.Application.notifyScriptLoaded&&Sys.Application.notifyScriptLoaded()}}(),void 0===DayPilot)var DayPilot={};if(void 0===DayPilot.Global&&(DayPilot.Global={}),function(){function t(t){for(var e=t.touches[0].clientX,i=t.touches[0].clientY,n=document.elementFromPoint(e,i);n&&n.parentNode;)if(n=n.parentNode,n.daypilotMainD)return n.calendar;return!1}function e(t){var e=t.touches[0].pageX,i=t.touches[0].pageY,n={};return n.x=e,n.y=i,n}if(void 0===DayPilot.Scheduler){var i=(s=navigator.userAgent).indexOf("Mozilla/5.0")>-1&&s.indexOf("Android ")>-1&&s.indexOf("AppleWebKit")>-1&&!(s.indexOf("Chrome")>-1),n={};DayPilot.Scheduler=function(t,l){function s(t,e){return 1-t/e}this.v="2018.4.3469";var d=this;this.id=t,this.isScheduler=!0,this.allowDefaultContextMenu=!1,this.allowEventOverlap=!0,this.allowMultiMove=!1,this.allowMultiRange=!1,this.allowMultiResize=!1,this.allowMultiSelect=!0,this.api=2,this.multiSelectRectangle="Disabled",this.autoRefreshCommand="refresh",this.autoRefreshEnabled=!1,this.autoRefreshInterval=60,this.autoRefreshMaxCount=20,this.autoScroll="Drag",this.blockOnCallBack=!1,this.navigatorBackSync=null,this.backendUrl=null,this.beforeCellRenderCaching=!0,this.businessBeginsHour=9,this.businessEndsHour=18,this.businessWeekends=!1,this.cellDuration=60,this.cellGroupBy="Day",this.cellSweeping=!0,this.cellSweepingCacheSize=1e3,this.cellWidth=40,this.cellWidthMin=1,this.cellWidthSpec="Fixed",this.cellsMarkBusiness=!0,this.cornerHtml="",this.crosshairType="Header",this.cssClassPrefix="scheduler_default",this.days=1,this.doubleClickTimeout=300,this.dragOutAllowed=!1,this.drawBlankCells=!0,this.durationBarHeight=3,this.durationBarVisible=!0,this.durationBarMode="Duration",this.dynamicEventRendering="Progressive",this.dynamicEventRenderingMargin=50,this.dynamicEventRenderingMarginX=null,this.dynamicEventRenderingMarginY=null,this.dynamicEventRenderingCacheSweeping=!1,this.dynamicEventRenderingCacheSize=200,this.dynamicLoading=!1,this.eventEditMinWidth=100,this.eventEndSpec="DateTime",this.eventHeight=35,this.eventHtmlLeftMargin=10,this.eventHtmlRightMargin=10,this.eventMarginLeft=0,this.eventMarginRight=0,this.eventMarginBottom=0,this.eventMinWidth=1,this.eventMoveMargin=5,this.eventMoveToPosition=!1,this.eventMoveSkipNonBusiness=!1,this.eventResizeMargin=5,this.eventStackingLineHeight=100,this.eventTapAndHoldHandling="Move",this.eventTextWrappingEnabled=!1,this.eventUpdateInplaceOptimization=!1,this.eventsLoadMethod="GET",this.eventVersionsEnabled=!1,this.eventVersionHeight=25,this.eventVersionMargin=2,this.eventVersionPosition="Above",this.floatingEvents=!0,this.floatingTimeHeaders=!0,this.groupConcurrentEvents=!1,this.groupConcurrentEventsLimit=1,this.headerHeight=30,this.heightSpec="Auto",this.height=300,this.hideBorderFor100PctHeight=!1,this.hideUntilInit=!0,this.infiniteScrollingEnabled=!1,this.infiniteScrollingMargin=50,this.infiniteScrollingStepDays=30,this.initEventEnabled=!0,this.jointEventsResize=!0,this.jointEventsMove=!0,this.layout="Auto",this.linkCreateHandling="Disabled",this.linkBottomMargin=10,this.linkPointSize=10,this.linksLoadMethod="GET",this.locale="en-us",this.loadingLabelText="Loading...",this.loadingLabelVisible=!0,this.overrideWheelScrolling=!1,this.messageBarPosition="Top",this.messageHideAfter=5e3,this.messageHideOnMouseOut=!0,this.multiMoveVerticalMode="Disabled",this.moveBy="Full",this.notifyCommit="Immediate",this.progressiveRowRendering=!0,this.progressiveRowRenderingPreload=25,this.rowCreateHeight=null,this.rowCreateHtml="New row...",this.rowHeaderColumnDefaultWidth=80,this.rowHeaderHideIconEnabled=!1,this.rowHeaderScrolling=!1,this.rowHeaderSplitterWidth=3,this.rowHeaderWidthAutoFit=!0,this.rowHeaderWidthMarginRight=0,this.rowHeaderCols=null,this.rowHeaderWidth=80,this.rowMarginBottom=0,this.rowMarginTop=0,this.rowMinHeight=0,this.rowsLoadMethod="GET",this.scale="CellDuration",this.scrollDelayDynamic=500,this.scrollDelayEvents=200,this.scrollDelayCells=0,this.scrollDelayFloats=0,this.scrollStep=null,this.scrollX=0,this.scrollY=0,this.selectedRows=[],this.separators=[],this.showNonBusiness=!0,this.showToolTip=!0,this.snapToGrid=!0,this.startDate=DayPilot.Date.today(),this.syncResourceTree=!1,this.tapAndHoldTimeout=300,this.timeHeaders=[{groupBy:"Default"},{groupBy:"Cell"}],this.timeHeaderTextWrappingEnabled=!1,this.treeAutoExpand=!0,this.treeEnabled=!1,this.treeIndent=20,this.treeImageMarginLeft=5,this.treeImageMarginTop=3,this.treeImageMarginRight=2,this.treeImageWidth=10,this.treeImageHeight=10,this.treePreventParentUsage=!1,this.timeFormat="Auto",this.timeline=null,this.useEventBoxes="Always",this.viewType="Resources",this.visible=!0,this.watchWidthChanges=!0,this.weekStarts="Auto",this.width=null,this.eventClickHandling="Enabled",this.eventDeleteHandling="Disabled",this.eventHoverHandling="Bubble",this.eventDoubleClickHandling="Disabled",this.eventEditHandling="Update",this.eventMoveHandling="Update",this.eventResizeHandling="Update",this.eventRightClickHandling="ContextMenu",this.eventSelectHandling="Update",this.resourceCollapseHandling="Enabled",this.resourceExpandHandling="Enabled",this.rowClickHandling="Enabled",this.rowDoubleClickHandling="Disabled",this.rowCreateHandling="Disabled",this.rowEditHandling="Update",this.rowHeaderColumnResizedHandling="Update",this.rowSelectHandling="Update",this.rowMoveHandling="Disabled",this.timeHeaderClickHandling="Enabled",this.timeRangeClickHandling="Enabled",this.timeRangeDoubleClickHandling="Disabled",this.timeRangeSelectedHandling="Enabled",this.timeRangeRightClickHandling="ContextMenu",this.timeRangeSelectingStartEndEnabled=!1,this.timeRangeSelectingStartEndFormat="MMMM d, yyyy",this.eventMovingStartEndEnabled=!1,this.eventMovingStartEndFormat="MMMM d, yyyy",this.eventResizingStartEndEnabled=!1,this.eventResizingStartEndFormat="MMMM d, yyyy","function"==typeof DayPilot.Bubble?this.bubble=new DayPilot.Bubble:this.bubble=null,this.cellBubble=null,this.resourceBubble=null,DayPilot.browser.ie&&(this.scrollDelayCells=100,this.scrollDelayFloats=100),1===d.api&&(this.onEventMove=function(){},this.onEventResize=function(){},this.onResourceExpand=function(){},this.onResourceCollapse=function(){}),this.onEventClick=null,this.onEventClicked=null,this.onEventMove=null,this.onEventMoved=null,this.onEventMoving=null,this.onEventResize=null,this.onEventResized=null,this.onEventResizing=null,this.onEventRightClick=null,this.onEventRightClicked=null,this.onEventMouseOver=null,this.onEventMouseOut=null,this.onRowClick=null,this.onRowClicked=null,this.onTimeRangeClick=null,this.onTimeRangeClicked=null,this.onTimeRangeDoubleClick=null,this.onTimeRangeDoubleClicked=null,this.onTimeRangeSelect=null,this.onTimeRangeSelected=null,this.onTimeRangeSelecting=null,this.onTimeRangeRightClick=null,this.onTimeRangeRightClicked=null,this.onRowHeaderResized=null,this.onCellMouseOver=null,this.onCellMouseOut=null,this.onGridMouseDown=null,this.onBeforeCellRender=null,this.onBeforeEventRender=null,this.onBeforeTimeHeaderRender=null,this.onBeforeResHeaderRender=null,this.onBeforeRowHeaderRender=null,this.onBeforeCellExport=null,this.onBeforeEventExport=null,this.onBeforeTimeHeaderExport=null,this.onBeforeRowHeaderExport=null,this.onDomAddEvent=null,this.onDomRemoveEvent=null,this.onEventFilter=null,this.onRowFilter=null,this.onRectangleEventSelecting=null,this.onRectangleEventSelect=null,this.onRectangleEventSelected=null,this.onDimensionsChanged=null,this.onAfterUpdate=null,this.C=0,this.cg=!0,this.dg=!1,this.eg=!1,this.fg=!1,this.gg=-1,this.hg=-1,this.zd=!1,this.ig=-1,this.jg=!1,this.kg=!0,this.rowlist=DayPilot.list(),this.itline=DayPilot.list(),this.events={},this.cells={},this.elements={},this.elements.events=[],this.elements.bars=[],this.elements.text=[],this.elements.cells=[],this.elements.linesVertical=[],this.elements.separators=[],this.elements.range=[],this.elements.breaks=[],this.elements.links=[],this.elements.linkpoints=[],this.elements.rectangle=[],this.elements.hover=[],this.u={},this.u.cells=[],this.u.linesVertical={},this.u.linesHorizontal={},this.u.timeHeaderGroups=[],this.u.timeHeader={},this.u.pixels=[],this.u.breaks=[],this.u.events=[],this.clientState={},this.members={},this.members.obsolete=["Init","cleanSelection","cssClassPrefix","getHScrollPosition","setHScrollPosition","getVScrollPosition","setVScrollPosition","showBaseTimeHeader"],this.members.ignoreFilter=function(t){return 0===t.indexOf("div")},this.members.ignore=["internal","nav","debug","temp","elements","members","cellProperties","itline","rowlist","timeHeader","timeouts","rowHeaderCols"],this.members.noCssOnly=[],this.D="javasc",this.nav={},this.M=function(t,e){t=JSON.parse(t);if(d.onScrollCalled=!1,t.CallBackRedirect)document.location.href=t.CallBackRedirect;else{if("function"==typeof d.onCallBackResult){var i={};if(i.result=t,i.preventDefault=function(){i.preventDefault.value=!0},d.onCallBackResult(i),i.preventDefault.value)return d.ab(),d._(),d.wa(),t.Message&&d.message&&d.message(t.Message),d.aa(t.CallBackData,!0),d.lg(),void d.mg()}if(t.BubbleGuid){var n=t.BubbleGuid,a=this.bubbles[n];return delete this.bubbles[n],d._(),void 0!==t.Result.BubbleHTML&&a&&a.updateView(t.Result.BubbleHTML,a),void d.lg()}if(void 0!==DayPilot.Bubble&&DayPilot.Bubble.hideActive(),void 0!==t.ClientState&&(null===t.ClientState?d.clientState={}:d.clientState=t.ClientState),"None"===t.UpdateType)return d._(),d.lg(),t.Message&&d.message(t.Message),void d.aa(t.CallBackData,!0);if(t.VsUpdate){var o=document.createElement("input");o.type="hidden",o.name=d.id+"_vsupdate",o.id=o.name,o.value=t.VsUpdate,d.Qe.innerHTML="",d.Qe.appendChild(o)}void 0!==t.TagFields&&(d.tagFields=t.TagFields),void 0!==t.SortDirections&&(d.sortDirections=t.SortDirections),d.u.drawArea=null,"Full"===t.UpdateType&&(d.resources=t.Resources,d.colors=t.Colors,d.palette=t.Palette,d.dirtyColors=t.DirtyColors,d.cellProperties=t.CellProperties,d.cellConfig=t.CellConfig,d.separators=t.Separators,d.timeline=t.Timeline,d.timeHeader=t.TimeHeader,d.timeHeaders=t.TimeHeaders,void 0!==t.Links&&(d.links.list=t.Links),void 0!==t.RowHeaderColumns&&(d.rowHeaderColumns=t.RowHeaderColumns),d.startDate=t.StartDate?new DayPilot.Date(t.StartDate):d.startDate,d.days=t.Days?t.Days:d.days,d.cellDuration=t.CellDuration?t.CellDuration:d.cellDuration,d.cellGroupBy=t.CellGroupBy?t.CellGroupBy:d.cellGroupBy,d.cellWidth=t.CellWidth?t.CellWidth:d.cellWidth,void 0!==t.Scale&&(d.scale=t.Scale),d.viewType=t.ViewType?t.ViewType:d.viewType,void 0!==t.ShowNonBusiness&&(d.showNonBusiness=t.ShowNonBusiness),d.businessBeginsHour=t.BusinessBeginsHour?t.BusinessBeginsHour:d.businessBeginsHour,d.businessEndsHour=t.BusinessEndsHour?t.BusinessEndsHour:d.businessEndsHour,void 0!==t.DynamicLoading&&(d.dynamicLoading=t.DynamicLoading),void 0!==t.TreeEnabled&&(d.treeEnabled=t.TreeEnabled),d.locale=t.Locale?t.Locale:d.locale,void 0!==t.TimeZone&&(d.timeZone=t.TimeZone),d.timeFormat=t.TimeFormat?t.TimeFormat:d.timeFormat,d.rowHeaderCols=t.RowHeaderCols?t.RowHeaderCols:d.rowHeaderCols,void 0!==t.DurationBarMode&&(d.durationBarMode=t.DurationBarMode),void 0!==t.CornerHTML&&(d.cornerHtml=t.CornerHTML),d.hashes=t.Hashes,d.ng(),d.og(),d.pg(),d.ea()),"Scroll"!==t.Action&&d.fa(t.Events),"Full"===t.UpdateType&&(d.qg(),d.rg()),d.sg(),d.ra(),d.tg(),d.u.drawArea=null,"Scroll"!==t.Action?(d.ug(),d.ga(),"Auto"!==d.heightSpec&&"Max"!==d.heightSpec||d.na(),d.vg(),d.P(),d.wg(),d.multiselect.clear(!0),d.multiselect.xg(t.SelectedEvents),d.yg(),d.zg(),d.sa()):(d.multiselect.clear(!0),d.multiselect.xg(t.SelectedEvents),d.Ag(t.Events)),"HoldForever"!==d.timeRangeSelectedHandling&&d.Bg(),"Full"===t.UpdateType&&(d.setScroll(t.ScrollX,t.ScrollY),d.Mf()),d.Cg(),d.ab(),t.SelectedRows&&d.Dg(t.SelectedRows),d._(),"Full"===t.UpdateType&&-1!==navigator.appVersion.indexOf("MSIE 7.")&&window.setTimeout(function(){d.qg(),d.na()},0),d.wa(),t.Message&&d.message&&d.message(t.Message),d.aa(t.CallBackData,!0),d.lg(),d.mg(),"Full"!==t.UpdateType||"Scroll"===t.Action||d.onScrollCalled||setTimeout(function(){d.Eg()},0)}},this.ab=function(){if(d.todo&&d.todo.del){var t=d.todo.del;t.parentNode.removeChild(t),d.todo.del=null}},this.aa=function(t,e){var i,n;window.setTimeout((i=t,n=e,function(){if(d.xa()){if("function"==typeof d.onAfterRender){var t={};t.isCallBack=n,t.isScroll=!1,t.data=i,d.onAfterRender(t)}}else d.afterRender&&d.afterRender(i,n)}),0)},this.scrollTo=function(t,e,i){d.Fg.enabled?(d.Fg.scrollToRequested=t,setTimeout(function(){var t=d.Fg.scrollToRequested;t&&d.Gg(t,e,i)},0)):d.Gg(t,e,i)},this.Gg=function(t,e,i){if(t){if(!d.B)return void(d.Hg={date:t,animated:e,position:i});if("Days"===d.viewType){var n=d.Ig(new DayPilot.Date(t));if(!n)return;return void setTimeout(function(){var t=n.top;d.nav.scroll.scrollTop=t},100)}var a;if(t instanceof DayPilot.Date)a=this.getPixels(t).left;else if("string"==typeof t)a=this.getPixels(new DayPilot.Date(t)).left;else{if("number"!=typeof t)throw"Invalid scrollTo() parameter. Accepted parameters: string (ISO date), number (pixels), DayPilot.Date object";a=t}var o=this.Jg.clientWidth,r=this.nav.scroll.clientWidth;switch((i=i||"left").toLowerCase()){case"left":break;case"middle":a-=r/2;break;case"right":a-=r}if(a<0&&(a=0),a>o-r&&(a=o-r),!e)return void d.Kg(a);var l=Math.abs(d.nav.scroll.scrollLeft-a)/o,s=50;if("number"==typeof e)s=e;else if("string"==typeof e)switch(e){case"fast":s=30;break;case"normal":s=50;break;case"slow":s=100;break;case"linear":s=Math.floor(100*l)}l>.6&&(s=Math.min(s,80)),this.Lg(a,s)}},this.Lg=function(t,e){for(var i={steps:[],index:0,delay:10,next:function(){var t=i.steps[i.index];return i.index+=1,t},finished:function(){d.Eg()}},n=d.getScrollX(),a=(e=e||100,t-n),o=0;o<e;o++){var r=o/e,l=2*(r-.5)/(Math.pow(2*(r-.5),2)+1)+.5;i.steps.push(n+a*l)}i.steps.push(t),function t(e){var i=e.next();return void 0===i?void(e.finished&&e.finished()):(d.setScrollX(i),window.clearTimeout(d.refreshTimeout),void setTimeout(function(){t(e)},e.delay))}(i)},this.scrollToResource=function(t){DayPilot.complete(function(){var e=d.Mg(t);e&&setTimeout(function(){var t=e.top;d.nav.scroll.scrollTop=t},100)})},this.Ng=function(){if(this.floatingTimeHeaders&&this.timeHeader){var t=this.Og();if(t){this.Pg();for(var e=t.pixels.left+h.shiftX,i=t.pixels.right+h.shiftX,n=[],a=0;a<this.timeHeader.length;a++)for(var o=0;o<this.timeHeader[a].length;o++){var r=this.timeHeader[a][o],l=r.left,s=r.left+r.width,d=null;if(l<e&&e<s&&((d={}).x=o,d.y=a,d.marginLeft=e-l,d.marginRight=0,d.div=this.u.timeHeader[o+"_"+a],n.push(d)),l<i&&i<s){d||((d={}).x=o,d.y=a,d.marginLeft=0,d.div=this.u.timeHeader[o+"_"+a],n.push(d)),d.marginRight=s-i;break}}for(var c=0;c<n.length;c++){d=n[c];this.Qg(d.div,d.marginLeft,d.marginRight)}}}},this.Cg=function(){this.Ng(),this.Rg()},this.Sg={};var c=this.Sg;c.eventsInRectangle=function(t,e,i,n){var a=t,o=t+i,r=e,l=e+n;return DayPilot.list(d.elements.events).filter(function(t){var e=t.event,i=e.part.left,n=e.part.left+e.part.width,s=d.rowlist[e.part.dayIndex].top+e.part.top,c=s+e.part.height;if(DayPilot.Util.overlaps(i,n,a,o)&&DayPilot.Util.overlaps(s,c,r,l))return!0})},c.events=function(t){var e=[],i=(t=t||"All",d.Og());if(!i)return DayPilot.list(e);for(var n=i.pixels.left,a=i.pixels.right,o=0;o<d.elements.events.length;o++){var r=d.elements.events[o],l=r.event,s=l.part.left,c=l.part.left+l.part.width;switch(t){case"Left":s<n&&n<c&&e.push(r);break;case"All":DayPilot.Util.overlaps(s,c,n,a)&&e.push(r)}}return DayPilot.list(e).addProps({area:i})},this.Rg=function(){if(this.floatingEvents){var t=c.events("Left");this.Tg(),t.filter(function(t){return"Milestone"!==t.event.data.type}).forEach(function(e){var i=e.event,n=t.area.pixels.left-i.part.left;d.Ug(e,n,0)})}},this.elements.sections=[],this.elements.hsections=[],this.Qg=function(t,e,i){var n=document.createElement("div");n.setAttribute("unselectable","on"),n.className=this.q("_timeheader_float"),n.style.position="absolute",n.style.left=e+"px",n.style.right=i+"px",n.style.top="0px",n.style.bottom="0px",n.style.overflow="hidden";var a=document.createElement("div");a.className=this.q("_timeheader_float_inner"),a.setAttribute("unselectable","on");var o=t.cell.th;o.innerHTML&&(a.innerHTML=o.innerHTML),o.fontColor&&(a.style.color=o.fontColor),n.appendChild(a),t.section=n,t.insertBefore(n,t.firstChild.nextSibling),t.firstChild.innerHTML="",this.elements.hsections.push(t)},this.Pg=function(){for(var t=0;t<this.elements.hsections.length;t++){var e=this.elements.hsections[t],i=e.cell;i&&e.firstChild&&(e.firstChild.innerHTML=i.th.innerHTML),DayPilot.de(e.section),e.section=null}this.elements.hsections=[]},this.Ug=function(t,e,i){var n=document.createElement("div");n.setAttribute("unselectable","on"),n.className=this.q(T.eventFloat),n.style.position="absolute",n.style.left=e+"px",n.style.right=i+"px",n.style.top="0px",n.style.bottom="0px",n.style.overflow="hidden";var a=document.createElement("div");a.className=this.q(T.eventFloatInner),a.setAttribute("unselectable","on"),a.innerHTML=t.event.client.html(),t.event.data.fontColor&&(a.style.color=t.event.data.fontColor),n.appendChild(a),t.section=n,t.insertBefore(n,t.firstChild.nextSibling),t.firstChild.innerHTML="";var o=t.event,r=o.cache?o.cache.areas:o.data.areas;r=r||[];var l={offsetX:d.Vg(a),eventDiv:t,areas:r.filter(function(t){return!(t.start||t.end)})};DayPilot.Areas.attach(n,t.event,l),DayPilot.Areas.disable(t),this.elements.sections.push(t)},this.Wg=null,this.Vg=function(t){return null===d.Wg&&(d.Wg=parseInt(new DayPilot.StyleReader(t).get("padding-left"))),d.Wg},this.Tg=function(){for(var t=0;t<this.elements.sections.length;t++){var e=this.elements.sections[t],i=e.event;i&&(e.firstChild.innerHTML=i.client.html()),DayPilot.de(e.section),DayPilot.Areas.enable(e),e.section=null}this.elements.sections=[]},this.setScrollX=function(t){d.Fg.enabled?(d.Fg.scrollXRequested=t,setTimeout(function(){var t=d.Fg.scrollXRequested;"number"==typeof t&&d.Kg(t)},0)):d.Kg(t)},this.Kg=function(t){var e=d.nav.scroll,i=d.Xg();e.clientWidth+t>i&&(t=i-e.clientWidth),d.divTimeScroll.scrollLeft=t,e.scrollLeft=t},this.setScrollY=function(t){d.Fg.enabled?(d.Fg.scrollYRequested=t,setTimeout(function(){var t=d.Fg.scrollYRequested;"number"==typeof t&&d.Yg(t)},0)):d.Yg(t)},this.Yg=function(t){var e=d.nav.scroll,i=d.ig;e.clientHeight+t>i&&(t=i-e.clientHeight),d.divResScroll.scrollTop=t,e.scrollTop=t},this.setScroll=function(t,e){d.setScrollX(t),d.setScrollY(e)},this.message=function(t,e){if(null!==t){var i={};"object"==typeof arguments[1]&&(i=arguments[1],e=i.delay);e=e||this.messageHideAfter||2e3;var n,a=this.Zg()+1,o=this.$g()+R.splitterWidth(),r=DayPilot.sw(d.nav.scroll)+1,l=DayPilot.sh(d.nav.scroll)+1;if(this.nav.message)n=d.nav.message;else{(n=document.createElement("div")).style.position="absolute",n.style.left=o+"px",n.style.right=r+"px",n.style.display="none",DayPilot.re(n,DayPilot.touch.start,function(t){d.nav.message.style.display="none",t.preventDefault(),t.stopPropagation()}),n.onmousemove=function(){d.messageHideOnMouseOut&&n.messageTimeout&&!n.status&&clearTimeout(n.messageTimeout)},n.onmouseout=function(){d.messageHideOnMouseOut&&"none"!==d.nav.message.style.display&&(n.messageTimeout=setTimeout(d.Ia,500))};var s=document.createElement("div");s.onclick=function(){d.nav.message.style.display="none"},s.className=this.q("_message"),n.appendChild(s);var c=document.createElement("div");c.style.position="absolute",c.className=this.q("_message_close"),c.onclick=function(){d.nav.message.style.display="none"},n.appendChild(c),this.nav.top.appendChild(n),this.nav.message=n}var h=function(){var n=d.nav.message;n.firstChild.className=d.q("_message"),i.cssClass&&DayPilot.Util.addClass(n.firstChild,i.cssClass),d.nav.message.firstChild.innerHTML=t;var o=DayPilot.sw(d.nav.scroll)+1;d.nav.message.style.right=o+"px";var r=d.messageBarPosition||"Top";"Bottom"===r?(d.nav.message.style.bottom=l+"px",d.nav.message.style.top=""):"Top"===r&&(d.nav.message.style.bottom="",d.nav.message.style.top=a+"px");DayPilot.fade(d.nav.message,.2,function(){n.messageTimeout=setTimeout(d.Ia,e)})};clearTimeout(n.messageTimeout),"none"!==this.nav.message.style.display?DayPilot.fade(d.nav.message,-.2,h):h()}},this.Ia=function(){if(d.nav&&d.nav.message){DayPilot.fade(d.nav.message,-.2,function(){d.nav.message.style.display="none"})}},this._g=function(){d.nav&&d.nav.message&&(d.nav.message.style.display="none")},this.message.show=function(t){d.message(t)},this.message.hide=function(){d.Ia()},this.ah=null,this.na=function(){if(this.nav.scroll){n=d.Xg(),d.Jg.style.height=d.ig+"px",d.Jg.style.width=n+"px","Auto"!==d.cellWidthSpec||d.bh?n>d.nav.scroll.clientWidth?d.nav.scroll.style.overflowX="auto":d.nav.scroll.style.overflowX="hidden":(d.nav.scroll.style.overflowX="hidden",d.nav.scroll.scrollLeft=0);null!==this.ah&&(this.nav.top.style.border=this.ah,this.ah=null),"Parent100Pct"!==this.heightSpec&&"Max100Pct"!==this.heightSpec||(this.nav.top.style.height="100%",this.hideBorderFor100PctHeight&&(this.ah=this.nav.top.style.border,this.nav.top.style.border="0 none"),this.height=parseInt(this.nav.top.clientHeight,10)-this.Zg()-1),this.nav.scroll.style.height="30px";var t=this.lc(),e=t+this.Zg()+1;t>=0&&(this.nav.scroll.style.height=t+"px",this.ch.style.height=t+"px"),this.nav.divider&&((!e||isNaN(e)||e<0)&&(e=0),this.nav.divider.style.height=e+"px"),"Parent100Pct"!==this.heightSpec&&(this.nav.top.style.height=e+"px"),d.nav.resScrollSpace&&(d.nav.resScrollSpace.style.height=t+20+"px");for(var i=0;i<this.elements.separators.length;i++)this.elements.separators[i].style.height=this.ig+"px";for(i=0;i<this.elements.linesVertical.length;i++)this.elements.linesVertical[i].style.height=this.ig+"px";d.dh()}var n},this.og=function(){this.startDate=new DayPilot.Date(this.startDate).getDatePart(),this.u.pixels=[],this.itline=DayPilot.list();var t="Auto"===this.cellWidthSpec;if(function(){if(t){var e=0;d.s()&&d.timeline?e=d.timeline.length:"Manual"===d.scale?e=d.timeline.length:(d.eh(),e=d.itline.length,d.itline=DayPilot.list());var i=d.fh();if(e>0&&i>0){var n=i/e;d.cellWidth=Math.max(n,d.cellWidthMin),d.bh=n<d.cellWidthMin}}}(),this.s()&&this.timeline){if(this.timeline){this.itline=DayPilot.list();for(var e=null,i=0,n=0;n<this.timeline.length;n++){var a=this.timeline[n];if((r={}).start=new DayPilot.Date(a.start),r.end=a.end?new DayPilot.Date(a.end):r.start.addMinutes(this.cellDuration),a.width)r.left=a.left||i,r.width=a.width||this.cellWidth,i+=r.width;else{var o=Math.floor(i+this.cellWidth)-Math.floor(i);r.left=Math.floor(i),r.width=o,i+=this.cellWidth}r.breakBefore=e&&e.ticks!==r.start.ticks,e=r.end,this.itline.push(r)}}t&&this.gh()}else{if(this.timeHeader=[],"Manual"===this.scale){this.itline=DayPilot.list();for(i=0,e=null,n=0;n<this.timeline.length;n++){var r;a=this.timeline[n];if((r={}).start=new DayPilot.Date(a.start),r.end=a.end?new DayPilot.Date(a.end):r.start.addMinutes(this.cellDuration),e&&r.start.ticks<e.ticks)throw"The timeline must be sequential";var l=a.width||this.cellWidth;o=Math.floor(i+l)-Math.floor(i);r.left=Math.floor(i),r.width=o,i+=l,r.breakBefore=e&&e.ticks!==r.start.ticks,e=r.end,this.itline.push(r)}}else this.eh();this.hh()}},this.infinite={},this.infinite.shiftStart=function(t){h.shiftStart(t)},this.infinite.scrollTo=function(t){h.shiftTo(t)},this.ih={};var h=this.ih;h.shiftX=0,h.active=!1,h.updateRowStarts=function(){DayPilot.list(d.rowlist).each(function(t,e){t.start=d.Fa(),t.data=null,d.jh(e)})},h.isEnabled=function(){return d.infiniteScrollingEnabled&&!d.s()},h.shiftTo=function(t){var e=(t=new DayPilot.Date(t)).addDays(-d.infiniteScrollingStepDays).getDatePart(),i=new DayPilot.Duration(e.getTime()-d.startDate.getDatePart().getTime()).totalDays();h.shiftStart(i,t)},h.shiftStart=function(t,e){var i;h.active=!0;var n=d.startDate,a=d.startDate.addDays(t);t>0&&(i=-d.getPixels(a).left),d.startDate=d.startDate.addDays(t),d.itline=DayPilot.list(),d.u.pixels=[],d.kh={},d.eh(),h.updateRowStarts(),t<0&&(i=d.getPixels(n).left),d.timeHeader=[],d.hh(),d.rg(),d.cellProperties={},d.vg(),d.wg(),d.fa(),d.P(),d.na(),void 0!==e?(d.scrollTo(new DayPilot.Date(e)),d.Eg()):d.nav.scroll.scrollLeft+=i,d.zg(),d.sa(),h.active=!1},this.eh=function(){for(var t="Days"!==this.viewType?this.startDate.addDays(this.days):this.startDate.addDays(1),e=this.startDate,i=this.lh(e),n=!1,a=0;i.ticks<=t.ticks&&i.ticks>e.ticks;){if(this.mh(e,i,!0)){var o=Math.floor(a+this.cellWidth)-Math.floor(a),r={};r.start=e,r.end=i,r.left=Math.floor(a),r.width=o,r.breakBefore=n,this.itline.push(r),a+=this.cellWidth,n=!1}else n=!0;e=i,i=this.lh(e)}},this.gh=function(){if(this.timeHeader)for(var t=0;t<this.timeHeader.length;t++)for(var e=this.timeHeader[t],i=0;i<e.length;i++){var n=e[i];n.left=this.getPixels(new DayPilot.Date(n.start)).left;var a=this.getPixels(new DayPilot.Date(n.end)).left-n.left;n.width=a}},this.hh=function(){var t=this.timeHeaders;if(t||(t=[{groupBy:this.cellGroupBy},{groupBy:"Cell"}]),this.itline.isEmpty()){this.timeHeader=[];for(var e=0;e<t.length;e++)this.timeHeader[e]=[]}else{var i=d.nh();for(e=0;e<t.length;e++){var n=t[e].groupBy,a=t[e].format;"Default"===n&&(n=this.cellGroupBy);for(var o=[],r=this.Fa();r.ticks<i.ticks;){var l={};if(l.start=r,l.end=this.oh(l.start,n),l.start.ticks===l.end.ticks)break;l.left=this.getPixels(l.start).left;var s=this.getPixels(l.end).left-l.left;if(l.width=s,l.colspan=Math.ceil(s/(1*this.cellWidth)),l.innerHTML="string"==typeof a?l.start.toString(a,R.locale()):this.ph(l,n),l.text=l.innerHTML,s>0){if("function"==typeof this.onBeforeTimeHeaderRender){var c={};c.start=l.start,c.end=l.end,c.text=l.innerHTML,c.html=l.innerHTML,c.toolTip=l.innerHTML,c.backColor=null,c.fontColor=null,c.level=this.timeHeader.length,c.cssClass=null;var h={};h.header=c,this.onBeforeTimeHeaderRender(h),l.text=l.innerHTML,l.innerHTML=c.html,l.backColor=c.backColor,l.fontColor=c.fontColor,l.toolTip=c.toolTip,l.areas=c.areas,l.cssClass=c.cssClass}o.push(l)}r=l.end}this.timeHeader.push(o)}}},this.mh=function(t,e){if("function"==typeof this.onIncludeTimeCell){var i={};i.start=t,i.end=e,i.visible=!0;var n={};return n.cell=i,this.onIncludeTimeCell(n),i.visible}if(this.showNonBusiness)return!0;var a="Days"===d.viewType;return this.isBusiness({start:t,end:e},a)},this.getPixels=function(t){var e=t.ticks,i=this.u.pixels[e];if(i)return i;var n=2218768416e5;if(0===this.itline.length||e<this.itline[0].start.ticks)return(c={cut:!1,left:0}).boxLeft=c.left,c.boxRight=c.left,c.i=null,c;for(var a=this.qh(t),o=Math.max(a.i-1,0);o<this.itline.length;o++){var r=this.itline[o],l=r.start.ticks,s=r.end.ticks;if(l<e&&e<s){var d=e-l;(c={cut:!1}).left=r.left+this.Sc(r,d),c.boxLeft=r.left,c.boxRight=r.left+r.width,c.i=o;break}if(l===e){(c={cut:!1}).left=r.left,c.boxLeft=c.left,c.boxRight=c.left+r.width,c.i=o;break}if(s===e){(c={cut:!1}).left=r.left+r.width,c.boxLeft=c.left,c.boxRight=c.left,c.i=o+1;break}if(e<l&&e>n){(c={cut:!0}).left=r.left,c.boxLeft=c.left,c.boxRight=c.left,c.i=o;break}n=s}if(!c){var c,h=this.itline[this.itline.length-1];(c={cut:!0}).left=h.left+h.width,c.boxLeft=c.left,c.boxRight=c.left,c.i=null}return this.u.pixels[e]=c,c},this.getDate=function(t,e,i){var n=this.rh(t,i);if(!n)return null;var a=n.x,o=this.itline[a];if(!o)return null;var r=i&&!e?o.end:o.start;return e?r.addTime(this.uh(n.cell,n.offset)):r},this.rh=function(t,e){if(0===this.itline.length)return null;for(var i=0,n=0,a=0;a<this.itline.length;a++){if(t<(i+=(r=this.itline[a]).width||this.cellWidth)||e&&t===i)return(o={}).x=a,o.offset=t-n,o.cell=r,o;n=i}var o,r=d.itline.last();return(o={}).x=this.itline.length-1,o.offset=r.width||this.cellWidth,o.cell=r,o},this.vh=function(t){return this.qh(t)},this.wh=function(t){for(var e=new DayPilot.Date(t),i=0;i<this.itline.length;i++){var n=this.itline[i];if(n.start.ticks<=e.ticks&&e.ticks<n.end.ticks)return(a={hidden:!1}).current=n,a;if(e.ticks<n.start.ticks)return(a={hidden:!0}).previous=i>0?this.itline[i-1]:null,a.current=null,a.next=this.itline[i],a}var a;return(a={past:!0}).previous=this.itline[this.itline.length-1],a},this.qh=function(t){var e=new DayPilot.Date(t),i=0,n=this.itline[0];if(e.ticks<n.start.ticks)return(l={hidden:!0,previous:null,current:null}).next=this.itline[0],l.i=-1,l;var a=this.itline.length-1,o=this.itline[a];if(e.ticks>o.end.ticks)return(l={past:!0}).previous=this.itline[this.itline.length-1],l.i=this.itline.length,l;if(e.ticks===o.end.ticks)return(l={past:!1}).current=this.itline[this.itline.length-1],l.i=this.itline.length-1,l;for(var r=function(){for(var t,n=d.itline;i<=a;)if(t=Math.floor((i+a)/2),n[t].start.ticks>e.ticks)a=t-1;else{if(!(n[t].end.ticks<e.ticks))return t;i=t+1}return i}();r<this.itline.length;r++){var l,s=this.itline[r];if(s.start.ticks<=e.ticks&&e.ticks<s.end.ticks)return(l={hidden:!1}).current=s,l.i=r,l;if(e.ticks<s.start.ticks)return(l={hidden:!0}).previous=r>0?this.itline[r-1]:null,l.current=null,l.next=this.itline[r],l.i=r,l}return(l={past:!0}).previous=this.itline[this.itline.length-1],l.i=this.itline.length,l},this.Sc=function(t,e){var i=t.width||this.cellWidth,n=t.end.ticks-t.start.ticks;return Math.floor(i*e/n)},this.uh=function(t,e){var i=t.end.ticks-t.start.ticks,n=t.width||this.cellWidth;return Math.floor(e/n*i)},this.ef=function(t){DayPilot.Global.touch.start||n.preventEventClick||(C={},d.Ka(this,t))},this.eventClickPostBack=function(t,e){this.G("EventClick",t,e)},this.eventClickCallBack=function(t,e){this.I("EventClick",t,e)},this.Ka=function(t,e){var i,n,a=t.event;if(a){e=e||window.event;if(void 0!==DayPilot.Bubble&&DayPilot.Bubble.hideActive(),!a.client.doubleClickEnabled())return void d.La(t,e);d.timeouts.click||(d.timeouts.click=[]);d.timeouts.click.push(window.setTimeout((i=t,n=e,function(){d.La(i,n)}),d.doubleClickTimeout))}},this.xh=function(t){return d.itline[t]},this.La=function(t,e){if("boolean"==typeof e)throw"Invalid _eventClickSingle parameters";var i=t.event;if(i){var n=e.ctrlKey,a=e.metaKey;if(i.client.clickEnabled())if(d.xa()){var o={};if(o.e=i,o.div=t,o.originalEvent=e,o.ctrl=n,o.meta=a,o.shift=e.shiftKey,o.preventDefault=function(){this.preventDefault.value=!0},o.control=d,o.toJSON=function(){return DayPilot.Util.copyProps(o,{},["e","ctrl","meta","shift"])},"function"==typeof d.onEventClick&&(d.onEventClick(o),o.preventDefault.value))return;switch(d.eventClickHandling){case"PostBack":d.eventClickPostBack(i);break;case"CallBack":d.eventClickCallBack(i);break;case"Edit":d.Ma(t);break;case"Select":d.Na(t,i,n,a);break;case"ContextMenu":(r=i.client.contextMenu())?r.show(i):d.contextMenu&&d.contextMenu.show(i);break;case"Bubble":d.bubble&&d.bubble.showEvent(i);break;case"RectangleSelect":if("Disabled"!==d.multiSelectRectangle)return E.start(),!1}"function"==typeof d.onEventClicked&&d.onEventClicked(o)}else switch(d.eventClickHandling){case"PostBack":d.eventClickPostBack(i);break;case"CallBack":d.eventClickCallBack(i);break;case"JavaScript":d.onEventClick(i);break;case"Edit":d.Ma(t);break;case"Select":d.Na(t,i,n,a);break;case"ContextMenu":var r;(r=i.client.contextMenu())?r.show(i):d.contextMenu&&d.contextMenu.show(i);break;case"Bubble":d.bubble&&d.bubble.showEvent(i);break;case"RectangleSelect":if("Disabled"!==d.multiSelectRectangle)return E.start(),!1}}},this.Ta=function(t){if(d.xa()){var e={};if(e.e=t,e.preventDefault=function(){this.preventDefault.value=!0},e.control=d,e.toJSON=function(){return DayPilot.Util.copyProps(e,{},["e"])},"function"==typeof d.onEventDelete&&(d.onEventDelete(e),e.preventDefault.value))return;switch(d.eventDeleteHandling){case"PostBack":d.eventDeletePostBack(t);break;case"CallBack":d.eventDeleteCallBack(t);break;case"Update":d.events.remove(t)}"function"==typeof d.onEventDeleted&&d.onEventDeleted(e)}else switch(d.eventDeleteHandling){case"PostBack":d.eventDeletePostBack(t);break;case"CallBack":d.eventDeleteCallBack(t);break;case"JavaScript":d.onEventDelete(t)}},this.eventDeletePostBack=function(t,e){this.G("EventDelete",t,e)},this.eventDeleteCallBack=function(t,e){this.I("EventDelete",t,e)},this.setHScrollPosition=function(t){this.nav.scroll.scrollLeft=t},this.getScrollX=function(){return this.nav.scroll.scrollLeft},this.getHScrollPosition=this.getScrollX,this.getScrollY=function(){return this.nav.scroll.scrollTop},this.Na=function(t,e,i,n){d.jb(t,e,i,n)},this.eventSelectPostBack=function(t,e,i){var n={};n.e=t,n.change=e,this.G("EventSelect",n,i)},this.eventSelectCallBack=function(t,e,i){var n={};n.e=t,n.change=e,this.I("EventSelect",n,i)},this.jb=function(t,e,i,n){var a=d.multiselect,o=a.isSelected(e);if(i||n||!o||1!==a.kb.length)if(d.xa()){a.Hb=a.events();var r={};if(r.e=e,r.selected=o,r.ctrl=i,r.meta=n,r.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof d.onEventSelect&&(d.onEventSelect(r),r.preventDefault.value))return;switch(d.eventSelectHandling){case"PostBack":d.eventSelectPostBack(e,l);break;case"CallBack":"undefined"!=typeof WebForm_InitCallback&&(window.lb="",window.mb=[],WebForm_InitCallback()),d.eventSelectCallBack(e,l);break;case"Update":a.nb(t,i,n)}"function"==typeof d.onEventSelected&&(r.change=a.isSelected(e)?"selected":"deselected",r.selected=a.isSelected(e),d.onEventSelected(r))}else{a.Hb=a.events(),a.nb(t,i,n);var l=a.isSelected(e)?"selected":"deselected";switch(d.eventSelectHandling){case"PostBack":d.eventSelectPostBack(e,l);break;case"CallBack":"undefined"!=typeof WebForm_InitCallback&&(window.lb="",window.mb=[],WebForm_InitCallback()),d.eventSelectCallBack(e,l);break;case"JavaScript":d.onEventSelect(e,l)}}},this.eventRightClickPostBack=function(t,e){this.G("EventRightClick",t,e)},this.eventRightClickCallBack=function(t,e){this.I("EventRightClick",t,e)},this.Pa=function(t){if(!DayPilot.Global.touch.active&&!DayPilot.Global.touch.start){var e=this.event;if((t=t||window.event).cancelBubble=!0,!this.event.client.rightClickEnabled())return!1;if(d.xa()){var i={};if(i.e=e,i.div=this,i.originalEvent=t,i.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof d.onEventRightClick&&(d.onEventRightClick(i),i.preventDefault.value))return!1;switch(d.eventRightClickHandling){case"PostBack":d.eventRightClickPostBack(e);break;case"CallBack":d.eventRightClickCallBack(e);break;case"ContextMenu":(n=e.client.contextMenu())?n.show(e):d.contextMenu&&d.contextMenu.show(this.event);break;case"Bubble":d.bubble&&d.bubble.showEvent(e)}"function"==typeof d.onEventRightClicked&&d.onEventRightClicked(i)}else switch(d.eventRightClickHandling){case"PostBack":d.eventRightClickPostBack(e);break;case"CallBack":d.eventRightClickCallBack(e);break;case"JavaScript":d.onEventRightClick(e);break;case"ContextMenu":var n;(n=e.client.contextMenu())?n.show(e):d.contextMenu&&d.contextMenu.show(this.event);break;case"Bubble":d.bubble&&d.bubble.showEvent(e)}return!1}},this.eventDoubleClickPostBack=function(t,e){this.G("EventDoubleClick",t,e)},this.eventDoubleClickCallBack=function(t,e){this.I("EventDoubleClick",t,e)},this.Oa=function(t){if(void 0!==DayPilot.Bubble&&DayPilot.Bubble.hideActive(),d.timeouts.click){for(var e in d.timeouts.click)window.clearTimeout(d.timeouts.click[e]);d.timeouts.click=null}t=t||window.event;var i=this.event;if(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0,d.xa()){var n={};if(n.e=i,n.originalEvent=t,n.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof d.onEventDoubleClick&&(d.onEventDoubleClick(n),n.preventDefault.value))return;switch(d.eventDoubleClickHandling){case"PostBack":d.eventDoubleClickPostBack(i);break;case"CallBack":d.eventDoubleClickCallBack(i);break;case"Edit":d.Ma(this);break;case"Select":d.Na(div,i,t.ctrlKey,t.metaKey);break;case"Bubble":d.bubble&&d.bubble.showEvent(i);break;case"ContextMenu":(a=i.client.contextMenu())?a.show(i):d.contextMenu&&d.contextMenu.show(i)}"function"==typeof d.onEventDoubleClicked&&d.onEventDoubleClicked(n)}else switch(d.eventDoubleClickHandling){case"PostBack":d.eventDoubleClickPostBack(i);break;case"CallBack":d.eventDoubleClickCallBack(i);break;case"JavaScript":d.onEventDoubleClick(i);break;case"Edit":d.Ma(this);break;case"Select":d.Na(div,i,t.ctrlKey,t.metaKey);break;case"Bubble":d.bubble&&d.bubble.showEvent(i);break;case"ContextMenu":var a;(a=i.client.contextMenu())?a.show(i):d.contextMenu&&d.contextMenu.show(i)}},this.eventResizePostBack=function(t,e,i,n){this.Za("PostBack",t,e,i,n)},this.eventResizeCallBack=function(t,e,i,n){this.Za("CallBack",t,e,i,n)},this.Za=function(t,e,i,n,a){var o={};o.e=e,o.newStart=i,o.newEnd=n,this.Ua(t,"EventResize",o,a)},this.Ya=function(t,e,i){if("Disabled"!==this.eventResizeHandling)if(i=d.vf(i),d.xa()){var n={},a=function(){if(x.hide(),!n.preventDefault.value){switch(e=n.newStart,i=n.newEnd,d.eventResizeHandling){case"PostBack":d.eventResizePostBack(t,e,i);break;case"CallBack":d.eventResizeCallBack(t,e,i);break;case"Notify":d.eventResizeNotify(t,e,i);break;case"Update":d.yh(n)}"function"==typeof d.onEventResized&&d.onEventResized(n)}};n.e=t,n.async=!1,n.loaded=function(){a()},n.newStart=e,n.newEnd=i,n.preventDefault=function(){this.preventDefault.value=!0},n.multiresize=DayPilot.list(y.list),n.control=d,n.toJSON=function(){return DayPilot.Util.copyProps(n,{},["e","async","newStart","newEnd","multiresize"])};var o={};o.event=t,o.start=e,o.end=i,n.multiresize.splice(0,0,o),"function"==typeof d.onEventResize&&d.onEventResize(n),n.async?d.blockOnCallBack&&x.show():a()}else switch(d.eventResizeHandling){case"PostBack":d.eventResizePostBack(t,e,i);break;case"CallBack":d.eventResizeCallBack(t,e,i);break;case"JavaScript":d.onEventResize(t,e,i);break;case"Notify":d.eventResizeNotify(t,e,i);break;case"Update":d.yh(n)}},this.eventMovePostBack=function(t,e,i,n,a,o){this.bb("PostBack",t,e,i,n,a,o)},this.eventMoveCallBack=function(t,e,i,n,a,o){this.bb("CallBack",t,e,i,n,a,o)},this.bb=function(t,e,i,n,a,o,r){var l={};if(e&&!!e.preventDefault){var s=e;l.e=s.e,l.newStart=s.newStart,l.newEnd=s.newEnd,l.newResource=s.newResource,l.position=s.position,l.multimove=[],s.multimove.each(function(t){var e={};if(e.e=t.event,e.newStart=t.start,e.newEnd=t.end,e.newResource=t.event.resource(),e.e===s.e||e.e.data.id==s.e.data.id)e.newResource=s.newResource;else if(m.rowoffset){var i=t.event.part.dayIndex+m.rowoffset;e.newResource=d.rowlist[i].id}l.multimove.push(e)})}else l.e=e,l.newStart=i,l.newEnd=n,l.newResource=a,l.position=r;this.Ua(t,"EventMove",l,o)},this.zh=function(t,e,i){var n={};n.start=e.start,n.end=e.end,n.resource=e.resource,n.multirange=[],e.multirange.each(function(t){var e={};e.start=t.start,e.end=t.end,e.resource=t.resource,n.multirange.push(e)}),this.Ua(t,"TimeRangeSelected",n,i)},this.Ua=function(t,e,i,n){if("PostBack"===t)d.G(e,i,n);else if("CallBack"===t)d.I(e,i,n,"CallBack");else if("Immediate"===t)d.I(e,i,n,"Notify");else if("Queue"===t)d.queue.add(new DayPilot.Action(this,e,i,n));else{if("Notify"!==t)throw"Invalid event invocation type";"Notify"===R.notifyType()?d.I(e,i,n,"Notify"):d.queue.add(new DayPilot.Action(d,e,i,n))}},this.eventMoveNotify=function(t,e,i,n,a,o){if(t&&t.preventDefault){var r=t;r.old=new DayPilot.Event(r.e.copy(),d),r.multimove.each(function(t){t.old=new DayPilot.Event(t.event.copy(),d)}),d.yh(r),r.e=r.old,delete r.old,r.multimove.each(function(t){t.event=t.old,delete t.old})}else{t=new DayPilot.Event(t.copy(),d);var l=d.events.Ah(t.data);t.start(e),t.end(i),t.resource(n),t.commit(),l=l.concat(d.events.Bh(t.data)),d.Ch(l),d.Dh(),d.Eh(l)}this.bb("Notify",t,e,i,n,a,o)},this.eventResizeNotify=function(t,e,i,n){var a=new DayPilot.Event(t.copy(),this),o=d.events.Ah(t.data);t.start(e),t.end(i),t.commit(),o=o.concat(d.events.Bh(t.data)),d.Ch(o),d.Dh(),d.Eh(o),this.Za("Notify",a,e,i,n)},this.multiselect={},this.multiselect.kb=[],this.multiselect.Gb=[],this.multiselect.Hb=[],this.multiselect.xg=function(t){d.multiselect.kb=DayPilot.list(t).map(function(t){return new DayPilot.Event(t,d)})},this.multiselect.Ib=function(){var t=d.multiselect;return JSON.stringify(t.events())},this.multiselect.events=function(){var t=d.multiselect,e=DayPilot.list();e.ignoreToJSON=!0;for(var i=0;i<t.kb.length;i++)e.push(t.kb[i]);return e},this.multiselect.Jb=function(){},this.multiselect.nb=function(t,e,i){var n=d.multiselect;if(n.isSelected(t.event))if(d.allowMultiSelect)if(e||i)n.remove(t.event,!0);else{var a=n.kb.length;n.clear(),a>1&&n.add(t.event,!0)}else n.clear();else d.allowMultiSelect&&(e||i)?n.add(t.event,!0):(n.clear(),n.add(t.event,!0));n.Vb(t),n.Jb()},this.multiselect.Kb=function(t){var e=d.multiselect;return e.Lb(t,e.initList)},this.multiselect.Mb=function(){for(var t=d.multiselect,e=[],i=0;i<t.kb.length;i++){var n=t.kb[i];e.push(n.value())}},this.multiselect.add=function(t,e){var i=d.multiselect;-1===i.indexOf(t)&&i.kb.push(t),e||i.Fh(t)},this.multiselect.remove=function(t,e){var i=d.multiselect,n=i.indexOf(t);-1!==n&&i.kb.splice(n,1),e||i.Fh(t)},this.multiselect.clear=function(t){var e=d.multiselect;e.kb=[],t||e.redraw()},this.multiselect.redraw=function(){var t=d.multiselect;t.Gb=[];for(var e=0;e<d.elements.events.length;e++){var i=d.elements.events[e];i.event&&i.event.isEvent&&(t.isSelected(i.event)?t.Ob(i):t.Pb(i))}},this.multiselect.Vb=function(t){if(t){var e=d.multiselect;e.isSelected(t.event)?e.Ob(t):e.Pb(t)}},this.multiselect.Fh=function(t){var e=d.multiselect,i=d.td(t);e.Vb(i)},this.multiselect.Ob=function(t){var e=d.multiselect,i=d.q("_selected");t=e.Qb(t);DayPilot.Util.addClass(t,i),e.Gb.push(t)},this.multiselect.Qb=function(t){return t},this.multiselect.Rb=function(){for(var t=d.multiselect,e=0;e<t.Gb.length;e++){var i=t.Gb[e];t.Pb(i,!0)}t.Gb=[]},this.multiselect.Pb=function(t,e){var i=d.multiselect,n=d.q("_selected");if(DayPilot.Util.removeClass(t,n),!e){var a=DayPilot.indexOf(i.Gb,t);-1!==a&&i.Gb.splice(a,1)}},this.multiselect.isSelected=function(t){return!!t&&!!t.isEvent&&d.multiselect.Lb(t,d.multiselect.kb)},this.multiselect.indexOf=function(t){for(var e=t.data,i=0;i<d.multiselect.kb.length;i++)if(d.multiselect.kb[i].data===e)return i;return-1},this.multiselect.Lb=function(t,e){if(!e)return!1;for(var i=0;i<e.length;i++){var n=e[i];if(t===n)return!0;if("function"==typeof n.id){if(null!==n.id()&&null!==t.id()&&n.id()===t.id())return!0;if(null===n.id()&&null===t.id()&&n.recurrentMasterId()===t.recurrentMasterId()&&t.start().toStringSortable()===n.start().toStringSortable())return!0}else{if(null!==n.id&&null!==t.id()&&n.id===t.id())return!0;if(null===n.id&&null===t.id()&&n.recurrentMasterId===t.recurrentMasterId()&&t.start().toStringSortable()===n.start)return!0}}return!1},this.multiselect.startRectangle=function(){E.start()},this.Gh=function(){this.wg(),this.zg()},this.Hh=function(){d.qg(),d.ug(),d.Ih(),d.progressiveRowRendering&&d.Jh()},this.Vb=function(t){var e=!(t=t||{}).eventsOnly;window.clearTimeout(d.Kh),e&&(this.s()||(d.timeHeader=null,d.cellProperties={}),d.kh={},d.ng(),d.og(),t&&t.dontLoadResources||d.pg(),d.events.Lh(),d.Ic.clearCache()),this.fa(),this.Mh(),d.qg(),e&&(d.yd(),d.Nh(),d.rg(),d.Dg(d.selectedRows),d.Oh()),d.sg(),d.ug(),d.Ih(),d.ga(),v.hideLinkpoints(),this.P(),this.vg(),this.mg(),this.ea(),this.yg(),this.Gh(),d.na(),t.immediateEvents||t.eventsOnly?d.sa():setTimeout(function(){d.sa()},100),this.visible?d.kg!=d.visible&&this.show():this.hide(),this.kg=this.visible,this.Cg(),(d.ud.scope||d.Fg.enabled)&&!d.B||this.Eg(),this.Ph(),this.wa()},this.Ph=function(){if("function"==typeof d.onAfterUpdate){d.onAfterUpdate({})}},this.update=function(t){if(d.zd)throw new DayPilot.Exception("You are trying to update a DayPilot.Scheduler object that has been disposed already. Calling .dispose() destroys the object and makes it unusable.");u.request(t)};var u={timeout:null,options:null,enabled:!1,request:function(t){u.enabled?(clearTimeout(u.timeout),u.mergeOptions(t),u.timeout=setTimeout(u.doit)):(u.mergeOptions(t),u.doit())},mergeOptions:function(t){if(t){u.options||(u.options={});for(var e in t)u.options[e]=t[e]}},doit:function(){var t=u.options;return u.options=null,d.B?DayPilot.Util.isOnlyProperty(t,"events")?(d.events.list=t.events,void d.Vb({eventsOnly:!0})):DayPilot.Util.isOnlyProperty(t,"separators")?(d.separators=t.separators,void d.Gh()):DayPilot.Util.isOnlyProperty(t,"rowHeaderColumns")?(d.rowHeaderColumns=t.rowHeaderColumns,void d.Hh()):(d.Ad(t),d.Vb({immediateEvents:!0}),void d.aa(null,!1)):void d.Ad(t)}};this.Eh=function(t,e,i){t=DayPilot.ua(t);for(var n=0;n<t.length;n++){var a=t[n];d.Qh(a)}if(this.Rh){this.sg(),this.ug(),this.vg(),this.wg();for(n=0;n<t.length;n++){a=t[n];this.Sh(a)}for(n=0;n<t.length;n++){a=t[n];this.Th(a)}this.yg(),this.zg(),this.Uh()}else{for(n=0;n<t.length;n++){a=t[n];e||this.Sh(a),this.Th(a)}DayPilot.list(t).each(function(t){d.Vh(t)}),d.yg()}d.Rg(),v.load(),d.multiselect.redraw(),i&&i(),this.mg()},this.vf=function(t){return"DateTime"===d.eventEndSpec?t:t.getDatePart().ticks===t.ticks?t.addDays(-1):t.getDatePart()},this.We=function(t){return"DateTime"===d.eventEndSpec?t:t.getDatePart().addDays(1)},this.xf=function(t){return"DateTime"===d.eventEndSpec?t:t.getDatePart()},this._a=function(t,e,i,n,a,o,r){if(d.Vc=null,"Disabled"!==d.eventMoveHandling){i=d.vf(i);var l={};l.e=t,l.newStart=e,l.newEnd=i,l.newResource=n,l.external=a,l.ctrl=!1,l.meta=!1,l.shift=!1,o&&(l.shift=o.shiftKey,l.ctrl=o.ctrlKey,l.meta=o.metaKey),l.multimove=DayPilot.list(m.list),l.areaData=DayPilot.Global.movingAreaData,l.control=d,l.toJSON=function(){return DayPilot.Util.copyProps(l,{},["e","newStart","newEnd","newResource","external","ctrl","meta","shift","multimove","areaData"])};var s={};if(s.event=t,s.start=e,s.end=i,s.overlapping=!1,s.resource=n,l.multimove.splice(0,0,s),l.position=r,l.preventDefault=function(){this.preventDefault.value=!0},d.xa()){var c=function(){if(x.hide(),l.preventDefault.value)d.Wh();else{switch(e=l.newStart,i=l.newEnd,d.eventMoveHandling){case"PostBack":d.eventMovePostBack(l);break;case"CallBack":d.eventMoveCallBack(l);break;case"Notify":d.eventMoveNotify(l);break;case"Update":d.yh(l)}d.Wh(),"function"==typeof d.onEventMoved&&d.onEventMoved(l)}};l.async=!1,l.loaded=function(){c()},"function"==typeof d.onEventMove&&d.onEventMove(l),l.async?d.blockOnCallBack&&x.show():c()}else{switch(d.eventMoveHandling){case"PostBack":d.eventMovePostBack(l);break;case"CallBack":d.eventMoveCallBack(l);break;case"JavaScript":d.onEventMove(t,e,i,n,a,!!o&&o.ctrlKey,!!o&&o.shiftKey,r);break;case"Notify":d.eventMoveNotify(l);break;case"Update":d.yh(l)}d.Wh()}}},this.yh=function(t){var e=t.e,i=t.newStart,n=t.newEnd,a=t.newResource,o=t.external;e.start(i),e.end(n),e.resource(a),o?(e.commit(),d.events.add(e)):d.events.update(e),t.multimove&&!t.multimove.isEmpty()&&t.multimove.each(function(t){if(t.event!==e){if(t.event.start(t.start),t.event.end(t.end),m.rowoffset){var i=t.event.part.dayIndex+m.rowoffset,n=d.rowlist[i].id;t.event.resource(n)}t.event.commit(),d.events.update(t.event)}}),t.multiresize&&!t.multiresize.isEmpty()&&t.multiresize.each(function(t){t.event!==e&&(t.event.start(t.start),t.event.end(t.end),t.event.commit(),d.events.update(t.event))}),d.events.immediateRefresh(),d.ab()},this.cb=function(t,e){var i=d.db(e),n={};n.args=t,n.guid=i,d.I("Bubble",n)},this.db=function(t){var e=DayPilot.guid();return this.bubbles||(this.bubbles=[]),this.bubbles[e]=t,e},this.eventMenuClickPostBack=function(t,e,i){var n={};n.e=t,n.command=e,this.G("EventMenuClick",n,i)},this.eventMenuClickCallBack=function(t,e,i){var n={};n.e=t,n.command=e,this.I("EventMenuClick",n,i)},this.eb=function(t,e,i){switch(i){case"PostBack":d.eventMenuClickPostBack(e,t);break;case"CallBack":d.eventMenuClickCallBack(e,t)}},this.timeRangeSelectedPostBack=function(t,e,i,n){var a={};a.start=t,a.end=e,a.resource=i,this.G("TimeRangeSelected",a,n)},this.timeRangeSelectedCallBack=function(t,e,i,n){var a={};a.start=t,a.end=e,a.resource=i,this.I("TimeRangeSelected",a,n)},this.Xh=function(t){if(t){if(t.disabled)return void d.clearSelection();var e=d.Yh(t);e&&d.gb(e.start,e.end,e.resource)}},this.gb=function(t,e,i){if("Disabled"!==d.timeRangeSelectedHandling){var n=e;e=d.vf(n);var a={};if(a.control=d,a.start=t,a.end=e,a.resource=i,a.preventDefault=function(){this.preventDefault.value=!0},a.multirange=DayPilot.list(M.list).map(function(t){return d.Yh(t)}),a.multirange.isEmpty()&&a.multirange.push({start:a.start,end:a.end,resource:a.resource}),a.toJSON=function(){return DayPilot.Util.copyProps(a,{},["start","end","resource","multirange"])},d.xa()){if("function"==typeof d.onTimeRangeSelect){if(d.onTimeRangeSelect(a),a.preventDefault.value)return;t=a.start,e=a.end}switch(d.Zh(d.rangeHold,t,e,a.multirange),d.$h(d.rangeHold),d.timeRangeSelectedHandling){case"PostBack":d.zh("PostBack",a);break;case"CallBack":d.zh("CallBack",a)}"function"==typeof d.onTimeRangeSelected&&d.onTimeRangeSelected(a)}else switch(d.timeRangeSelectedHandling){case"PostBack":d.zh("PostBack",a);break;case"CallBack":d.zh("CallBack",a);break;case"JavaScript":d.onTimeRangeSelected(t,e,i,a.multirange)}}},this.Zh=function(t,e,i,n){if(t&&!(n&&n.length>1)){var a,o,r=d.We(i),l=0;"Days"===d.viewType&&(l=d.Ig(e).start.getTime()-d.Fa().getTime()),e.getTime()<d.itline[0].start.getTime()?t.start.x=0:(o=(a=d.vh(e.addTime(-l))).current||a.previous,t.start.x=DayPilot.indexOf(d.itline,o)),(a=d.vh(r.addMilliseconds(-1).addTime(-l))).past?t.end.x=d.itline.length-1:(o=a.current||a.next,t.end.x=DayPilot.indexOf(d.itline,o))}},this.Ig=function(t){var e=t.getDatePart();return DayPilot.list(d.rowlist).find(function(t){return t.start.getDatePart()===e})},this.timeRangeDoubleClickPostBack=function(t,e,i,n){var a={};a.start=t,a.end=e,a.resource=i,this.G("TimeRangeDoubleClick",a,n)},this.timeRangeDoubleClickCallBack=function(t,e,i,n){var a={};a.start=t,a.end=e,a.resource=i,this.I("TimeRangeDoubleClick",a,n)},this.hb=function(t,e,i){if(e=d.vf(e),d.xa()){var n={};if(n.start=t,n.end=e,n.resource=i,n.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof d.onTimeRangeDoubleClick&&(d.onTimeRangeDoubleClick(n),n.preventDefault.value))return;switch(d.timeRangeDoubleClickHandling){case"PostBack":d.timeRangeDoubleClickPostBack(t,e,i);break;case"CallBack":d.timeRangeDoubleClickCallBack(t,e,i)}"function"==typeof d.onTimeRangeDoubleClicked&&d.onTimeRangeDoubleClicked(n)}else switch(d.timeRangeDoubleClickHandling){case"PostBack":d.timeRangeDoubleClickPostBack(t,e,i);break;case"CallBack":d.timeRangeDoubleClickCallBack(t,e,i);break;case"JavaScript":d.onTimeRangeDoubleClick(t,e,i)}},this.timeRangeMenuClickPostBack=function(t,e,i){var n={};n.selection=t,n.command=e,this.G("TimeRangeMenuClick",n,i)},this.timeRangeMenuClickCallBack=function(t,e,i){var n={};n.selection=t,n.command=e,this.I("TimeRangeMenuClick",n,i)},this.fb=function(t,e,i){switch(i){case"PostBack":d.timeRangeMenuClickPostBack(e,t);break;case"CallBack":d.timeRangeMenuClickCallBack(e,t)}},this.linkMenuClickPostBack=function(t,e,i){var n={};n.link=t,n.command=e,this.G("LinkMenuClick",n,i)},this.linkMenuClickCallBack=function(t,e,i){var n={};n.link=t,n.command=e,this.I("LinkMenuClick",n,i)},this._h=function(t,e,i){switch(i){case"PostBack":d.linkMenuClickPostBack(e,t);break;case"CallBack":d.linkMenuClickCallBack(e,t)}},this.rowMenuClickPostBack=function(t,e,i){var n={};n.resource=t,n.command=e,this.G("RowMenuClick",n,i)},this.resourceHeaderMenuClickPostBack=this.rowMenuClickPostBack,this.rowMenuClickCallBack=function(t,e,i){var n={};n.resource=t,n.command=e,this.I("RowMenuClick",n,i)},this.resourceHeaderMenuClickCallBack=this.rowMenuClickCallBack,this.ai=function(t,e,i){switch(i){case"PostBack":d.rowMenuClickPostBack(e,t);break;case"CallBack":d.rowMenuClickCallBack(e,t)}},this.bi=function(t,e){var i=d.ci(t);i.data.name=e,i.data.html&&(i.data.html=e),d.rows.update(i)},this.di=function(t,e){if(e){var i={};if(i.text=e,i.preventDefault=function(){this.preventDefault.value=!0},"function"!=typeof d.onRowCreate||(d.onRowCreate(i),!i.preventDefault.value)){switch(d.rowCreateHandling){case"CallBack":d.rowCreateCallBack(i.text);break;case"PostBack":d.rowCreatePostBack(i.text)}"function"==typeof d.onRowCreated&&d.onRowCreated(i)}}},this.ei=function(t,e,i){if(t.isNewRow)i||d.di(t,e);else{var n=DayPilot.indexOf(d.rowlist,t),a=d.ci(t,n);if(d.xa()){var o={};if(o.resource=a,o.row=a,o.newText=e,o.canceled=i,o.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof d.onRowEdit&&(d.onRowEdit(o),o.preventDefault.value))return;if(!i){switch(d.rowEditHandling){case"PostBack":d.rowEditPostBack(a,e);break;case"CallBack":d.rowEditCallBack(a,e);break;case"Update":d.bi(t,e)}"function"==typeof d.onRowEdited&&d.onRowEdited(o)}}else switch(d.rowEditHandling){case"PostBack":d.rowEditPostBack(a,e);break;case"CallBack":d.rowEditCallBack(a,e);break;case"JavaScript":d.onrowEdit(a,e)}}},this.rowCreatePostBack=function(t,e){var i={};i.text=t,this.G("RowCreate",i,e)},this.rowCreateCallBack=function(t,e){var i={};i.text=t,this.I("RowCreate",i,e)},this.rowEditPostBack=function(t,e,i){var n={};n.resource=t,n.newText=e,this.G("RowEdit",n,i)},this.rowEditCallBack=function(t,e,i){var n={};n.resource=t,n.newText=e,this.I("RowEdit",n,i)},this.rowMovePostBack=function(t,e,i,n){var a={};a.source=t,a.target=e,a.position=i,this.G("RowMove",a,n)},this.rowMoveCallBack=function(t,e,i,n){var a={};a.source=t,a.target=e,a.position=i,this.I("RowMove",a,n)},this.rowMoveNotify=function(t,e,i,n){var a={};a.source=t,a.target=e,a.position=i,this.I("RowMove",a,n,"Notify")},this.rowClickPostBack=function(t,e){var i={};i.resource=t,this.G("RowClick",i,e)},this.resourceHeaderClickPostBack=this.rowClickPostBack,this.rowClickCallBack=function(t,e){var i={};i.resource=t,this.I("RowClick",i,e)},this.resourceHeaderClickCallBack=this.rowClickCallBack,this.fi=function(t,e,i,n){if("Disabled"!==d.rowDoubleClickHandling){d.timeouts.resClick||(d.timeouts.resClick=[]);var a,o,r,l;d.timeouts.resClick.push(window.setTimeout((a=t,o=e,r=i,l=n,function(){d.gi(a,o,r,l)}),d.doubleClickTimeout))}else d.gi(t,e,i,n)},this.gi=function(t,e,i,n){var a=d.resourceHeaderClickHandling||d.rowClickHandling;if(d.xa()){var o={};if(o.resource=t,o.row=t,o.ctrl=e,o.shift=i,o.meta=n,o.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof d.onRowClick&&(d.onRowClick(o),o.preventDefault.value))return;if("function"==typeof d.onResourceHeaderClick&&(d.onResourceHeaderClick(o),o.preventDefault.value))return;switch(a){case"PostBack":d.rowClickPostBack(t);break;case"CallBack":d.rowClickCallBack(t);break;case"Select":d.hi(t.$.row,e,i,n);break;case"Edit":d.ii.edit(t.$.row)}"function"==typeof d.onRowClicked&&d.onRowClicked(o),"function"==typeof d.onResourceHeaderClicked&&d.onResourceHeaderClicked(o)}else switch(a){case"PostBack":d.rowClickPostBack(t);break;case"CallBack":d.rowClickCallBack(t);break;case"JavaScript":d.onRowClick(t);break;case"Select":d.hi(t.$.row,e,i);break;case"Edit":d.ii.edit(t.$.row)}},this.timeHeaderClickPostBack=function(t,e){var i={};i.header=t,this.G("TimeHeaderClick",i,e)},this.timeHeaderClickCallBack=function(t,e){var i={};i.header=t,this.I("TimeHeaderClick",i,e)},this.ji=function(t){if(d.xa()){var e={};if(e.header=t,e.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof d.onTimeHeaderClick&&(d.onTimeHeaderClick(e),e.preventDefault.value))return;switch(this.timeHeaderClickHandling){case"PostBack":d.timeHeaderClickPostBack(t);break;case"CallBack":d.timeHeaderClickCallBack(t)}"function"==typeof d.onTimeHeaderClicked&&d.onTimeHeaderClicked(e)}else switch(this.timeHeaderClickHandling){case"PostBack":d.timeHeaderClickPostBack(t);break;case"CallBack":d.timeHeaderClickCallBack(t);break;case"JavaScript":d.onTimeHeaderClick(t)}},this.resourceCollapsePostBack=function(t,e){var i={};i.resource=t,this.G("ResourceCollapse",i,e)},this.resourceCollapseCallBack=function(t,e){var i={};i.resource=t,this.I("ResourceCollapse",i,e)},this.ki=function(t){if(d.xa()){var e={};if(e.resource=t,e.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof d.onResourceCollapse&&(d.onResourceCollapse(e),e.preventDefault.value))return;switch(this.resourceCollapseHandling){case"PostBack":d.resourceCollapsePostBack(t);break;case"CallBack":d.resourceCollapseCallBack(t)}}else switch(this.resourceCollapseHandling){case"PostBack":d.resourceCollapsePostBack(t);break;case"CallBack":d.resourceCollapseCallBack(t);break;case"JavaScript":d.onResourceCollapse(t)}},this.resourceExpandPostBack=function(t,e){var i={};i.resource=t,this.G("ResourceExpand",i,e)},this.resourceExpandCallBack=function(t,e){var i={};i.resource=t,this.I("ResourceExpand",i,e)},this.li=function(t){if(d.xa()){var e={};if(e.resource=t,e.row=t,e.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof d.onResourceExpand&&(d.onResourceExpand(e),e.preventDefault.value))return;switch(this.resourceExpandHandling){case"PostBack":d.resourceExpandPostBack(t);break;case"CallBack":d.resourceExpandCallBack(t)}}else switch(this.resourceExpandHandling){case"PostBack":d.resourceExpandPostBack(t);break;case"CallBack":d.resourceExpandCallBack(t);break;case"JavaScript":d.onResourceExpand(t)}},this.eventEditPostBack=function(t,e,i){var n={};n.e=t,n.newText=e,this.G("EventEdit",n,i)},this.eventEditCallBack=function(t,e,i){var n={};n.e=t,n.newText=e,this.I("EventEdit",n,i)},this.eventEditNotify=function(t,e,i,n){var a=new DayPilot.Event(t.copy(),this);t.text(e),d.events.update(t,null,n);var o={};o.e=a,o.newText=e,this.I("EventEdit",o,i,"Notify")},this.ib=function(t,e,i){if(d.xa()){var n={};if(n.e=t,n.newText=e,n.canceled=i,n.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof d.onEventEdit&&(d.onEventEdit(n),n.preventDefault.value))return;if(!i)switch(d.eventEditHandling){case"PostBack":d.eventEditPostBack(t,e);break;case"CallBack":d.eventEditCallBack(t,e);break;case"Update":t.text(e),d.events.update(t,null,{inplace:!0})}"function"==typeof d.onEventEdited&&d.onEventEdited(n)}else switch(d.eventEditHandling){case"PostBack":d.eventEditPostBack(t,e);break;case"CallBack":d.eventEditCallBack(t,e);break;case"Notify":d.eventEditNotify(t,e,null,{inplace:!0});break;case"JavaScript":d.onEventEdit(t,e)}},this.commandCallBack=function(t,e){this.mi("CallBack",t,e)},this.commandPostBack=function(t,e){this.mi("PostBack",t,e)},this.mi=function(t,e,i){var n={};n.command=e,this.Ua(t,"Command",n,i)},this.G=function(t,e,i){var n={};n.action=t,n.type="PostBack",n.parameters=e,n.data=i,n.header=this.H();var a="JSON"+JSON.stringify(n);__doPostBack(d.uniqueID,a)},this.I=function(t,e,i,n){if(d.s()){void 0===n&&(n="CallBack"),this.O(),d.J();var a={};a.action=t,a.type=n,a.parameters=e,a.data=i,a.header=this.H();var o,r=JSON.stringify(a);o="undefined"!=typeof Iuppiter&&Iuppiter.compress?"LZJB"+Iuppiter.Base64.encode(Iuppiter.compress(r)):"JSON"+r,this.ni(a),this.backendUrl?DayPilot.request(this.backendUrl,this.K,o,this.L):"function"==typeof WebForm_DoCallback&&WebForm_DoCallback(this.uniqueID,o,this.M,null,this.callbackError,!0)}else d.debug.message("Callback invoked without the server-side backend specified. Callback canceled.","warning")},this.ni=function(t){"function"==typeof d.onCallBackStart&&d.onCallBackStart({})},this.lg=function(){var t={};"function"==typeof d.onCallBackEnd&&setTimeout(function(){d.onCallBackEnd(t)},0)},this.s=function(){return"javasc"!==d.D&&-1===d.D.indexOf("DCODE")||d.devsb},this.N=function(){return!("function"!=typeof WebForm_DoCallback||!this.uniqueID)},this.L=function(t){if("function"==typeof d.onAjaxError){var e={};e.request=t,d.onAjaxError(e)}else"function"==typeof d.ajaxError&&d.ajaxError(t)},this.K=function(t){d.M(t.responseText)},this.callbackProps=[],this.H=function(){var t={};t.v=this.v,t.control="dps",t.id=this.id,t.startDate=d.startDate,t.days=d.days,t.cellDuration=d.cellDuration,t.cellGroupBy=d.cellGroupBy,t.cellWidth=d.cellWidth,t.cellWidthSpec=d.cellWidthSpec,t.viewType=d.viewType,t.showNonBusiness=d.showNonBusiness,t.businessBeginsHour=d.businessBeginsHour,t.businessEndsHour=d.businessEndsHour,t.weekStarts=d.weekStarts,t.treeEnabled=d.treeEnabled,t.locale=d.locale,t.timeZone=d.timeZone,t.tagFields=d.tagFields,t.timeHeaders=d.timeHeaders,t.cssClassPrefix=d.cssClassPrefix,t.durationBarMode=d.durationBarMode,t.rowHeaderColumns=d.rowHeaderColumns,t.rowMarginBottom=d.rowMarginBottom,t.rowMarginTop=d.rowMarginTop,t.rowMinHeight=d.rowMinHeight,t.scale=d.scale,t.clientState=d.clientState,this.nav.scroll&&(t.scrollX=Math.max(0,this.nav.scroll.scrollLeft),t.scrollY=Math.max(0,this.nav.scroll.scrollTop)),t.selected=d.multiselect.events(),t.selectedRows=D.oi(),t.hashes=d.hashes;var e=d.pi(t.scrollX,t.scrollY),i=d.qi(e),n=d.ri(e);if(t.rangeStart=i.start,t.rangeEnd=i.end,t.resources=n,t.dynamicLoading=d.dynamicLoading,t.separators=this.separators,this.syncResourceTree&&"Days"!=this.viewType&&(t.tree=this.U()),this.syncLinks&&(t.links=this.si()),"Manual"===this.scale&&(t.timeline=this.ui()),"function"==typeof d.onCallBackHeader){var a={};a.header=t,d.onCallBackHeader(a)}var o=d.callbackProps;return DayPilot.isArray(o)&&(t.props={},o.forEach(function(e){t.props[e]=d[e]})),t},this.ui=function(){var t=[];return DayPilot.list(d.timeline).each(function(e){var i={};i.start=e.start,i.end=e.end,i.width=e.width,t.push(i)}),t},this.si=function(){var t=[],e=function(t){var e={};if(t.tags)for(var i in t.tags)e[i]=""+t.tags[i];return e};if(!DayPilot.isArray(d.links.list))return t;for(var i=0;i<d.links.list.length;i++){var n=d.links.list[i],a={};a.id=n.id,a.from=n.from,a.to=n.to,a.type=n.type,a.tags=e(n),t.push(a)}return t},this.getViewPort=function(){var t=this.nav.scroll.scrollLeft-h.shiftX,e=this.nav.scroll.scrollTop,i={};if("Days"!==d.viewType){var n=d.pi(t,e),a=d.qi(n),o=d.ri(n);i.start=a.start,i.end=a.end,i.resources=o}else{n=d.pi(t,e),a=d.vi(n);i.start=a.start,i.end=a.end,i.resources=[]}return i},this.pi=function(t,e){var i={start:{},end:{}};i.start.x=Math.floor(t/d.cellWidth),i.end.x=Math.floor((t+d.nav.scroll.clientWidth)/d.cellWidth),i.start.y=d.wi(e).i,i.end.y=d.wi(e+d.nav.scroll.clientHeight).i,i.start.x=Math.max(i.start.x,0);var n=this.itline.length;return i.end.x>=n&&(i.end.x=n-1),i},this.xi=function(){var t=this.nav.scroll.scrollLeft-h.shiftX,e=this.nav.scroll.scrollTop;return d.pi(t,e)},this.qi=function(t){var e={};if(this.itline.length<=0)return e.start=this.startDate,e.end=this.startDate,e;if(!this.itline[t.start.x])throw"Internal error: area.start.x is null.";return e.start=this.itline[t.start.x].start,e.end=this.itline[t.end.x].end,e},this.ri=function(t){if(!t)t=this.pi(this.nav.scroll.scrollLeft,this.nav.scroll.scrollTop);var e=[];e.ignoreToJSON=!0;for(var i=t.start.y;i<=t.end.y;i++){var n=d.rowlist[i];n&&!n.hidden&&e.push(n.id)}return e},this.vi=function(t){if(!t)t=this.pi(this.nav.scroll.scrollLeft,this.nav.scroll.scrollTop);var e={};if(0===d.rowlist.length)return e;var i=d.itline[d.itline.length-1].end.getTime()-d.itline[0].start.getTime();return e.start=d.rowlist[t.start.y]&&d.rowlist[t.start.y].start,e.end=d.rowlist[t.end.y]&&d.rowlist[t.end.y].start.addTime(i),e},this.U=function(){var t=[];t.ignoreToJSON=!0;for(var e=0;e<this.rowlist.length;e++){var i=this.rowlist[e];if(!(i.level>0||i.isNewRow)){var n=this.Y(e);t.push(n)}}return t},this.Z=function(t){var e=[];e.ignoreToJSON=!0;for(var i=0;i<t.length;i++){var n=t[i];d.rowlist[n].isNewRow||e.push(d.Y(n))}return e},this.Y=function(t){var e=this.rowlist[t];if("function"==typeof d.onGetNodeState){var i={};if(i.row=e,i.preventDefault=function(){i.preventDefault.value=!0},i.result={},d.onGetNodeState(i),i.preventDefault.value)return i.result}var n={};return n.Value=e.id,n.BackColor=e.backColor,n.Name=e.name,n.InnerHTML=e.html,n.ToolTip=e.toolTip,n.Expanded=e.expanded,n.Children=this.Z(e.children),n.Loaded=e.loaded,n.IsParent=e.isParent,n.Columns=this.yi(e),e.start.getTime()!==d.Fa().getTime()&&(n.Start=e.start),e.minHeight!==d.rowMinHeight&&(n.MinHeight=e.minHeight),e.marginBottom!==d.rowMarginBottom&&(n.MarginBottom=e.marginBottom),e.marginTop!==d.rowMarginTop&&(n.MarginTop=e.marginTop),e.eventHeight!==d.eventHeight&&(n.EventHeight=e.eventHeight),n},this.yi=function(t){if(!t.columns||0===t.columns.length)return null;var e=[];e.ignoreToJSON=!0;for(var i=0;i<t.columns.length;i++){var n={};n.InnerHTML=t.columns[i].html,e.push(n)}return e},this.q=function(t){var e=this.theme||this.cssClassPrefix;return e?e+t:""},this.yd=function(){d.nav.top.className!==d.q("_main")&&(d.nav.top.className=d.q("_main"),d.nav.dh1.className=d.q("_divider_horizontal"),d.nav.dh2.className=d.q("_divider_horizontal"),d.divResScroll.className=d.q("_rowheader_scroll"),d.nav.divider.className=d.q("_divider")+" "+d.q("_splitter"),d.nav.scroll.className=d.q("_scrollable"),d.Jg.className=d.q("_matrix"),d.nav.loading.className=d.q("_loading"))},this.T=function(){this.nav.top.dispose=this.dispose},this.dispose=function(){var t=d;if(t.zi&&!t.zd){t.zd=!0,t.O(),clearInterval(t.fd),clearInterval(t.Ai);for(var e in t.timeouts){var i=t.timeouts[e];DayPilot.isArray(i)?DayPilot.list(i).each(function(t){clearTimeout(t)}):clearTimeout(i)}t.P(),t.divBreaks=null,t.divCells=null,t.divCorner=null,t.divCrosshair=null,t.divEvents=null,t.divHeader&&(t.divHeader.rows=null),t.divHeader=null,t.divLines=null,t.divNorth=null,t.divRange=null,t.divResScroll=null,t.divSeparators=null,t.divSeparatorsAbove=null,t.divStretch=null,t.divTimeScroll=null,t.ch=null,t.Qe=null,t.Jg.calendar=null,t.Jg=null,t.nav.loading=null,t.nav.top.onmousemove=null,t.nav.top.onmouseout=null,t.nav.top.dispose=null,t.nav.top.ontouchstart=null,t.nav.top.ontouchmove=null,t.nav.top.ontouchend=null,t.nav.top.removeAttribute("style"),t.nav.top.removeAttribute("class"),t.nav.top.innerHTML="",t.nav.top.dp=null,t.nav.top=null,t.nav.scroll.onscroll=null,t.nav.scroll.root=null,t.nav.scroll=null,t.Bi&&(t.Bi.dispose(),t.Bi=null),t.daypilot&&delete t.daypilot,DayPilot.ue(window,"resize",t.Fe),n.unregister(t),b=null}},this.ya=function(t){var e;e=t.nodeType?t.event:t;var i=(d.Jg,d.Ci(e)),a=e;if(!d.Di(i.rowIndex)){var o=e.part.height||d.Ic.eventHeight(),r=e.part&&e.part.top&&d.rowlist[e.part.dayIndex]?e.part.top+d.rowlist[e.part.dayIndex].top:i.top,l=i.left,s=a.cache&&void 0!==a.cache.moveVDisabled?!a.cache.moveVDisabled:!a.data.moveVDisabled,c=a.cache&&void 0!==a.cache.moveHDisabled?!a.cache.moveHDisabled:!a.data.moveHDisabled;!s&&n.moving&&(r=d.rowlist[a.part.dayIndex].top),!c&&n.moving&&(l=e.part.left);var h=document.createElement("div");h.setAttribute("unselectable","on"),h.style.position="absolute",h.style.width=i.width+"px",h.style.height=o+"px",h.style.left=l+"px",h.style.top=r+"px",h.style.zIndex=101,h.style.overflow="hidden";var u=document.createElement("div");return h.appendChild(u),h.className=this.q("_shadow"),u.className=this.q("_shadow_inner"),d.divShadow.appendChild(h),h.calendar=d,h}},this.wi=function(t){for(var e,i={},n=0,a=0,o=this.rowlist.length,r=0;r<o;r++){var l=this.rowlist[r];if(!l.hidden&&(t<(a+=l.height)||r===o-1)){n=a-l.height,e=l;break}}return i.top=n,i.bottom=a,i.i=r,i.element=e,i},this.links={},this.links.list=[],this.links.addData=function(t){d.links.list.push(t),v.load()},this.links.load=function(t,e,i,n){if(!t)throw new DayPilot.Exception("links.load(): 'url' parameter required");n=n||{};var a=function(t){var e={};e.exception=t.exception,e.request=t.request,"function"==typeof i&&i(e)},o=function(t){var i,n=t.request;try{i=JSON.parse(n.responseText)}catch(t){var o={};return o.exception=t,void a(o)}if(DayPilot.isArray(i)){var r={};if(r.preventDefault=function(){this.preventDefault.value=!0},r.data=i,"function"==typeof e&&e(r),r.preventDefault.value)return;d.links.list=i,d.B&&d.update()}};if(d.linksLoadMethod&&"POST"===d.linksLoadMethod.toUpperCase())DayPilot.ajax({method:"POST",contentType:"application/json",data:{start:d.visibleStart().toString(),end:d.visibleEnd().toString()},url:t,success:o,error:a});else{var r=t;if(!n.dontAddStartEnd){var l="start="+d.visibleStart().toString()+"&end="+d.visibleEnd().toString();r+=r.indexOf("?")>-1?"&"+l:"?"+l}DayPilot.ajax({method:"GET",url:r,success:o,error:a})}};var v={};this.Ei=v,v.clear=function(){d.divLinksAbove.innerHTML="",d.divLinksBelow.innerHTML="",d.elements.links=[]},v.showLinkpoints=function(){c.events().each(function(t){v.showLinkpoint(t)})},v.showLinkpoint=function(t){var e=d.linkPointSize,i=e/2,n=t.event.part.left,a=d.rowlist[t.event.part.dayIndex].top+t.event.part.top,o=t.event.part.height,r=t.event.part.right,l=DayPilot.Util.div(d.divLinkpoints,n-i,a-i+o/2,e,e);l.className=d.q("_linkpoint"),l.style.boxSizing="border-box",l.coords={x:n,y:a+o/2},l.type="Start",l.event=t.event,v.activateLinkpoint(l),d.elements.linkpoints.push(l);var s=DayPilot.Util.div(d.divLinkpoints,r-i,a-i+o/2,e,e);s.className=d.q("_linkpoint"),s.style.boxSizing="border-box",s.coords={x:r,y:a+o/2},s.type="Finish",s.event=t.event,v.activateLinkpoint(s),d.elements.linkpoints.push(s)},v.activateLinkpoint=function(t){t.onmousedown=function(e){e=e||window.event;return o.source=t,o.calendar=d,v.showLinkpoints(),e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),!1},t.onmousemove=function(e){DayPilot.Util.addClass(t,d.q("_linkpoint_hover")),v.clearHideTimeout()},t.onmouseout=function(e){o.source&&o.source.event===t.event||DayPilot.Util.removeClass(t,d.q("_linkpoint_hover"))},t.onmouseup=function(e){if(o.source){var i=o.source.type+"To"+t.type,n=o.source.event.id(),a=t.event.id(),r={};if(r.from=n,r.to=a,r.type=i,r.id=null,r.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof d.onLinkCreate&&(d.onLinkCreate(r),r.preventDefault.value))return;var l=function(){DayPilot.isArray(d.links.list)||(d.links.list=[]),d.links.list.push({from:n,to:a,type:i,id:r.id}),v.load()};switch(d.linkCreateHandling){case"Update":l();break;case"CallBack":d.Fi(r);break;case"PostBack":d.Gi(r);break;case"Notify":l(),d.Hi(r)}"function"==typeof d.onLinkCreated&&d.onLinkCreated(r)}}},v.hideLinkpoints=function(){d.divLinkpoints.innerHTML="",d.elements.linkpoints=[]},v.hideTimeout=null,v.hideLinkpointsWithDelay=function(){v.hideTimeout=setTimeout(function(){v.hideLinkpoints()},100)},v.clearHideTimeout=function(){v.hideTimeout&&(clearTimeout(v.hideTimeout),v.hideTimeout=null)},v.load=function(){if(v.clear(),DayPilot.isArray(d.links.list))for(var t=0;t<d.links.list.length;t++){var e=d.links.list[t];v.drawLinkId(e.from,e.to,e)}},v.drawLinkId=function(t,e,i){var n=d.events.find(t),a=d.events.find(e);v.drawLink(n,a,i)},v.drawLink=function(t,e,i){var n;n=t&&t.tagName&&"div"===t.tagName.toLowerCase()?t:d.td(t);var a;if(a=e&&e.tagName&&"div"===e.tagName.toLowerCase()?e:d.td(e),n&&a){var o,r,l=i.type||"FinishToStart",s=n.offsetTop,c=a.offsetTop,h=n.offsetLeft+n.offsetWidth,u=a.offsetLeft+a.offsetWidth,f=a.offsetLeft,p=n.offsetLeft,g=a.offsetHeight;switch(l){case"FinishToStart":(o={x:h,y:s}).y>(r={x:f,y:c}).y&&(c+g>s?r.y=o.y:o.x<=r.x&&(r.y+=g,r.bottom=!0));break;case"StartToFinish":o={x:p,y:s},r={x:u,y:c};break;case"StartToStart":o={x:p,y:s},r={x:f,y:c};break;case"FinishToFinish":o={x:h,y:s},r={x:u,y:c}}return v.drawLinkXy(o,r,i)}},v.clearShadow=function(){d.divLinkShadow.innerHTML="",d.elements.linkshadow=[]},v.drawShadow=function(t,e){if(v.clearShadow(),DayPilot.browser.ielt9)v.drawShadowOldStyle(t,e);else{var i=d.divLinkShadow,n=DayPilot.line(t.x,t.y,e.x,e.y,!0);i.appendChild(n),d.elements.linkshadow.push(n)}},v.drawShadowOldStyle=function(t,e){var i=Math.min(t.x,e.x),n=d.divLinkShadow,a="black",o=DayPilot.Util.div(n,i,t.y,t.x-i,2);o.style.backgroundColor=a,d.elements.linkshadow.push(o);var r=DayPilot.Util.div(n,i,t.y,2,e.y-t.y);r.style.backgroundColor=a,d.elements.linkshadow.push(r);var l=DayPilot.Util.div(n,i,e.y,e.x-i,2);l.style.backgroundColor=a,d.elements.linkshadow.push(l);var s=DayPilot.Util.div(n,e.x-6,e.y-5,0,0);s.style.borderColor="transparent transparent transparent black",s.style.borderStyle="solid",s.style.borderWidth="6px",d.elements.linkshadow.push(s)},v.drawLinkXy=function(t,e,i){var n={divs:[],props:i,clear:function(){DayPilot.de(this.divs),this.divs.forEach(function(t){DayPilot.rfa(d.elements.links,t)})}},a=d.eventHeight/2,o=i.width||1,r=i.type||"FinishToStart",l=i.color,s=i.style,c="Above"===(i.layer||"Above"),h=d.divLinksAbove,u=d.eventHeight,v=d.linkBottomMargin,f=function(t,e){l&&(t.style["border"+e+"Color"]=l),s&&(t.style["border"+e+"Style"]=s)},p=[],g=function(t,e){d.elements.links.push(t),m(t),y(t),t.divs=p,e||p.push(t),n.divs.push(t)},y=function(t){t.oncontextmenu=function(t){if(t=t||window.event,d.contextMenuLink){var e=new DayPilot.Link(i,d);d.contextMenuLink.show(e)}t.cancelBubble=!0,t.preventDefault&&t.preventDefault()}},m=function(t){t.onmouseenter=function(){DayPilot.Util.addClass(t.divs,d.q("_link_hover"))},t.onmouseleave=function(){DayPilot.Util.removeClass(t.divs,d.q("_link_hover"))}};if("FinishToStart"===r)if(t.y===e.y&&t.x===e.x){var b=t.x-5,w=t.y+u-v-5;l?((R=DayPilot.Util.div(h,b,w,10,10)).style.borderRadius="10px",R.style.backgroundColor=l):((R=DayPilot.Util.div(h,b,w,10,10)).className=d.q("_link_dot"),DayPilot.Util.addClass(R,i.cssClass)),g(R,!0)}else if(t.y>e.y||t.y==e.y&&e.bottom)if(t.x<=e.x){var D=t.x,P=t.y+u-v;b=e.x+a,w=e.y;(E=DayPilot.Util.div(h,D,P,b-t.x,o)).style.boxSizing="border-box",E.style.borderBottomWidth=o+"px",E.className=d.q("_link_horizontal"),DayPilot.Util.addClass(E,i.cssClass),f(E,"Bottom"),g(E),(M=DayPilot.Util.div(h,b,P,o,w-P)).style.boxSizing="border-box",M.style.borderRightWidth=o+"px",M.className=d.q("_link_vertical"),DayPilot.Util.addClass(M,i.cssClass),f(M,"Right"),g(M),l?(R=DayPilot.Util.div(h,b-5+Math.floor(o/2),w-5,0,0),t.y<e.y?R.style.borderColor=l+" transparent transparent transparent":R.style.borderColor="transparent transparent "+l+" transparent",R.style.borderStyle="solid",R.style.borderWidth="5px"):(R=DayPilot.Util.div(h,b-6+Math.floor(o/2),w-6,6,6),t.y<e.y?R.className=d.q("_link_arrow_down"):R.className=d.q("_link_arrow_up"),DayPilot.Util.addClass(R,i.cssClass)),g(R,!0)}else{var x=5,k=e.y+u+x;(E=DayPilot.Util.div(h,t.x,t.y+u-v,a+o,o)).style.boxSizing="border-box",E.style.borderBottomWidth=o+"px",E.className=d.q("_link_horizontal"),DayPilot.Util.addClass(E,i.cssClass),f(E,"Bottom"),g(E),(M=DayPilot.Util.div(h,t.x+a,t.y+u-v,o,k-(t.y+u-v))).style.boxSizing="border-box",M.style.borderRightWidth=o+"px",M.className=d.q("_link_vertical"),DayPilot.Util.addClass(M,i.cssClass),f(M,"Right"),g(M),(C=DayPilot.Util.div(h,e.x-a,k,t.x+2*a+o-e.x,o)).style.boxSizing="border-box",C.style.borderBottomWidth=o+"px",C.className=d.q("_link_horizontal"),DayPilot.Util.addClass(C,i.cssClass),f(C,"Bottom"),g(C),(S=DayPilot.Util.div(h,e.x-a,k,o,e.y-k+u-v)).style.boxSizing="border-box",S.style.borderRightWidth=o+"px",S.className=d.q("_link_vertical"),DayPilot.Util.addClass(S,i.cssClass),f(S,"Right"),g(S),(H=DayPilot.Util.div(h,e.x-a,e.y+u-v,a,o)).style.boxSizing="border-box",H.style.borderBottomWidth=o+"px",H.className=d.q("_link_horizontal"),DayPilot.Util.addClass(H,i.cssClass),f(H,"Bottom"),g(H),l?((R=DayPilot.Util.div(h,e.x-6,e.y+u-v-5,0,0)).style.borderWidth="6px",R.style.borderColor="transparent transparent transparent "+l,R.style.borderStyle="solid"):((R=DayPilot.Util.div(h,e.x-6,e.y+u-v-5,6,6)).className=d.q("_link_arrow_right"),DayPilot.Util.addClass(R,i.cssClass)),g(R,!0)}else if(t.y===e.y)if(t.x<e.x){D=t.x,P=t.y+u-v,b=e.x;(E=DayPilot.Util.div(h,D,P,b-t.x,o)).style.boxSizing="border-box",E.style.borderBottomWidth=o+"px",E.className=d.q("_link_horizontal"),DayPilot.Util.addClass(E,i.cssClass),f(E,"Bottom"),g(E),l?((R=DayPilot.Util.div(h,e.x-6,e.y+u-v-5,0,0)).style.borderWidth="6px",R.style.borderColor="transparent transparent transparent "+l,R.style.borderStyle="solid"):((R=DayPilot.Util.div(h,e.x-6,e.y+u-v-5,6,6)).className=d.q("_link_arrow_right"),DayPilot.Util.addClass(R,i.cssClass)),g(R,!0)}else{x=5,k=e.y+u+x;(E=DayPilot.Util.div(h,t.x,t.y+u-v,a+o,o)).style.boxSizing="border-box",E.style.borderBottomWidth=o+"px",E.className=d.q("_link_horizontal"),DayPilot.Util.addClass(E,i.cssClass),f(E,"Bottom"),g(E),(M=DayPilot.Util.div(h,t.x+a,t.y+u-v,o,k-(t.y+u-v))).style.boxSizing="border-box",M.style.borderRightWidth=o+"px",M.className=d.q("_link_vertical"),DayPilot.Util.addClass(M,i.cssClass),f(M,"Right"),g(M),(C=DayPilot.Util.div(h,e.x-a,k,t.x+2*a+o-e.x,o)).style.boxSizing="border-box",C.style.borderBottomWidth=o+"px",C.className=d.q("_link_horizontal"),DayPilot.Util.addClass(C,i.cssClass),f(C,"Bottom"),g(C),(S=DayPilot.Util.div(h,e.x-a,k,o,e.y-k+u-v)).style.boxSizing="border-box",S.style.borderRightWidth=o+"px",S.className=d.q("_link_vertical"),DayPilot.Util.addClass(S,i.cssClass),f(S,"Right"),g(S),(H=DayPilot.Util.div(h,e.x-a,e.y+u-v,a,o)).style.boxSizing="border-box",H.style.borderBottomWidth=o+"px",H.className=d.q("_link_horizontal"),DayPilot.Util.addClass(H,i.cssClass),f(H,"Bottom"),g(H),l?((R=DayPilot.Util.div(h,e.x-6,e.y+u-v-5,0,0)).style.borderWidth="6px",R.style.borderColor="transparent transparent transparent "+l,R.style.borderStyle="solid"):((R=DayPilot.Util.div(h,e.x-6,e.y+u-v-5,6,6)).className=d.q("_link_arrow_right"),DayPilot.Util.addClass(R,i.cssClass)),g(R,!0)}else if(t.x>e.x){c=5,k=e.y-c;(E=DayPilot.Util.div(h,t.x,t.y+u-v,a+o,o)).style.boxSizing="border-box",E.style.borderBottomWidth=o+"px",E.className=d.q("_link_horizontal"),DayPilot.Util.addClass(E,i.cssClass),f(E,"Bottom"),g(E),(M=DayPilot.Util.div(h,t.x+a,t.y+u-v,o,k-(t.y+u-v))).style.boxSizing="border-box",M.style.borderRightWidth=o+"px",M.className=d.q("_link_vertical"),DayPilot.Util.addClass(M,i.cssClass),f(M,"Right"),g(M),(C=DayPilot.Util.div(h,e.x-a,k,t.x+2*a+o-e.x,o)).style.boxSizing="border-box",C.style.borderBottomWidth=o+"px",C.className=d.q("_link_horizontal"),DayPilot.Util.addClass(C,i.cssClass),f(C,"Bottom"),g(C),(S=DayPilot.Util.div(h,e.x-a,k,o,e.y-k+u-v)).style.boxSizing="border-box",S.style.borderRightWidth=o+"px",S.className=d.q("_link_vertical"),DayPilot.Util.addClass(S,i.cssClass),f(S,"Right"),g(S),(H=DayPilot.Util.div(h,e.x-a,e.y+u-v,a,o)).style.boxSizing="border-box",H.style.borderBottomWidth=o+"px",H.className=d.q("_link_horizontal"),DayPilot.Util.addClass(H,i.cssClass),f(H,"Bottom"),g(H),l?((R=DayPilot.Util.div(h,e.x-6,e.y+u-v-5,0,0)).style.borderWidth="6px",R.style.borderColor="transparent transparent transparent "+l,R.style.borderStyle="solid"):((R=DayPilot.Util.div(h,e.x-6,e.y+u-v-5,6,6)).className=d.q("_link_arrow_right"),DayPilot.Util.addClass(R,i.cssClass)),g(R,!0)}else{D=t.x,P=t.y+u-v,b=e.x+a,w=e.y;(E=DayPilot.Util.div(h,D,P,b-t.x,o)).style.boxSizing="border-box",E.style.borderBottomWidth=o+"px",E.className=d.q("_link_horizontal"),DayPilot.Util.addClass(E,i.cssClass),f(E,"Bottom"),g(E),(M=DayPilot.Util.div(h,b,P,o,w-P)).style.boxSizing="border-box",M.style.borderRightWidth=o+"px",M.className=d.q("_link_vertical"),DayPilot.Util.addClass(M,i.cssClass),f(M,"Right"),g(M),l?(R=DayPilot.Util.div(h,b-5+Math.floor(o/2),w-5,0,0),t.y<e.y?R.style.borderColor=l+" transparent transparent transparent":R.style.borderColor="transparent transparent "+l+"transparent",R.style.borderStyle="solid",R.style.borderWidth="5px"):(R=DayPilot.Util.div(h,b-6+Math.floor(o/2),w-6,6,6),t.y<e.y?R.className=d.q("_link_arrow_down"):R.className=d.q("_link_arrow_up"),DayPilot.Util.addClass(R,i.cssClass)),g(R,!0)}else if("StartToFinish"===r){var C,S;c=5,k=e.y-c;(E=DayPilot.Util.div(h,e.x,e.y+u-v,a+o,o)).style.boxSizing="border-box",E.style.borderBottomWidth=o+"px",E.className=d.q("_link_horizontal"),DayPilot.Util.addClass(E,i.cssClass),f(E,"Bottom"),g(E),(M=DayPilot.Util.div(h,e.x+a,e.y+u-v,o,k-(e.y+u-v)+0)).style.boxSizing="border-box",M.style.borderRightWidth=o+"px",M.className=d.q("_link_vertical"),DayPilot.Util.addClass(M,i.cssClass),f(M,"Right"),g(M),(C=DayPilot.Util.div(h,t.x-a,k,e.x+2*a+o-t.x,o)).style.boxSizing="border-box",C.style.borderBottomWidth=o+"px",C.className=d.q("_link_horizontal"),DayPilot.Util.addClass(C,i.cssClass),f(C,"Bottom"),g(C),(S=DayPilot.Util.div(h,t.x-a,k,o,t.y+u-v-k+0)).style.boxSizing="border-box",S.style.borderRightWidth=o+"px",S.className=d.q("_link_vertical"),DayPilot.Util.addClass(S,i.cssClass),f(S,"Right"),g(S),(H=DayPilot.Util.div(h,t.x-a,t.y+u-v,a,o)).style.boxSizing="border-box",H.style.borderBottomWidth=o+"px",H.className=d.q("_link_horizontal"),DayPilot.Util.addClass(H,i.cssClass),f(H,"Bottom"),g(H),l?((R=DayPilot.Util.div(h,e.x-6,e.y+u-v-5,0,0)).style.borderColor="transparent "+l+" transparent transparent",R.style.borderStyle="solid",R.style.borderWidth="6px"):((R=DayPilot.Util.div(h,e.x-6,e.y+u-v-5,6,6)).className=d.q("_link_arrow_left"),DayPilot.Util.addClass(R,i.cssClass)),g(R,!0)}else if("StartToStart"===r){var T=Math.min(t.x,e.x)-a;(E=DayPilot.Util.div(h,T,t.y+u-v,t.x-T,o)).style.boxSizing="border-box",E.style.borderBottomWidth=o+"px",E.className=d.q("_link_horizontal"),DayPilot.Util.addClass(E,i.cssClass),f(E,"Bottom"),g(E),(M=DayPilot.Util.div(h,T,t.y+u-v,o,e.y-t.y)).style.boxSizing="border-box",M.style.borderRightWidth=o+"px",M.className=d.q("_link_vertical"),DayPilot.Util.addClass(M,i.cssClass),f(M,"Right"),g(M),(H=DayPilot.Util.div(h,T,e.y+u-v,e.x-T,o)).style.boxSizing="border-box",H.style.borderBottomWidth=o+"px",H.className=d.q("_link_horizontal"),DayPilot.Util.addClass(H,i.cssClass),f(H,"Bottom"),g(H),l?((R=DayPilot.Util.div(h,e.x-6,e.y+u-v-5,0,0)).style.borderColor="transparent transparent transparent "+l,R.style.borderStyle="solid",R.style.borderWidth="6px"):((R=DayPilot.Util.div(h,e.x-6,e.y+u-v-5,6,6)).className=d.q("_link_arrow_right"),DayPilot.Util.addClass(R,i.cssClass)),g(R,!0)}else if("FinishToFinish"===r){var E,M,H,R,B=Math.max(e.x,t.x)+a;(E=DayPilot.Util.div(h,t.x,t.y+u-v,B-t.x,o)).style.boxSizing="border-box",E.style.borderBottomWidth=o+"px",E.className=d.q("_link_horizontal"),DayPilot.Util.addClass(E,i.cssClass),f(E,"Bottom"),g(E),(M=DayPilot.Util.div(h,B,t.y+u-v,o,e.y-t.y)).style.boxSizing="border-box",M.style.borderRightWidth=o+"px",M.className=d.q("_link_vertical"),DayPilot.Util.addClass(M,i.cssClass),f(M,"Right"),g(M),(H=DayPilot.Util.div(h,e.x,e.y+u-v,B-e.x,o)).style.boxSizing="border-box",H.style.borderBottomWidth=o+"px",H.className=d.q("_link_horizontal"),DayPilot.Util.addClass(H,i.cssClass),f(H,"Bottom"),g(H),l?((R=DayPilot.Util.div(h,e.x-6,e.y+u-v-5,0,0)).style.borderColor="transparent "+l+" transparent transparent",R.style.borderStyle="solid",R.style.borderWidth="6px"):((R=DayPilot.Util.div(h,e.x-6,e.y+u-v-5,6,6)).className=d.q("_link_arrow_left"),DayPilot.Util.addClass(R,i.cssClass)),g(R,!0)}return n},this.Fi=function(t,e){var i={};i.from=t.from,i.to=t.to,i.type=t.type,d.I("LinkCreate",i,e)},this.Hi=function(t,e){var i={};i.from=t.from,i.to=t.to,i.type=t.type,d.I("LinkCreate",i,e,"Notify")},this.Gi=function(t,e){var i={};i.from=t.from,i.to=t.to,i.type=t.type,d.G("LinkCreate",i,e)},this.Ii=function(t){var e,i=0,n=0;if(t>this.rowlist.length-1)throw"Row index too high (DayPilotScheduler._getRowByIndex)";for(var a=0;a<=t;a++){var o=this.rowlist[a];o.hidden||(i+=o.height,n++)}e=i-o.height;var r={};return r.top=e,r.height=o.height,r.bottom=i,r.i=n-1,r.data=o,r},this.Gd=function(){return!!this.backendUrl},this.events.find=function(t){if(!d.events.list||void 0===d.events.list.length)return null;if("function"==typeof t)return d.Ji(t);for(var e=d.events.list.length,i=0;i<e;i++)if(d.events.list[i].id===t)return new DayPilot.Event(d.events.list[i],d);return null},this.Ji=function(t){for(var e=d.events.list.length,i=0;i<e;i++){var n=new DayPilot.Event(d.events.list[i],d);if(t(n))return n}return null},this.events.focus=function(t){var e=d.Ki(t);e&&e.focus()},this.events.scrollIntoView=function(t){if(d.Ki(t)){var e=t.start();(e<d.Fa()||d.nh()<e)&&d.scrollTo(e,"fast","middle");var i=t.resource();-1===d.getViewPort().resources.indexOf(i)&&d.scrollToResource(i)}},this.events.all=function(){for(var t=[],e=0;e<d.events.list.length;e++){var i=new DayPilot.Event(d.events.list[e],d);t.push(i)}return DayPilot.list(t)},this.events.filter=function(t,e){d.events.pd=t,e||d.Vb({eventsOnly:!0})},this.events.edit=function(t){var e=d.td(t);return e||DayPilot.list(d.events.Li.rows).isEmpty()?void d.Ma(e):void setTimeout(function(){d.Ma(d.td(t))})},this.events.load=function(t,e,i){if(!t)throw new DayPilot.Exception("events.load(): 'url' parameter required");var n=function(t){var e={};e.exception=t.exception,e.request=t.request,"function"==typeof i&&i(e)},a=function(t){var i,a=t.request;try{i=JSON.parse(a.responseText)}catch(t){var o={};return o.exception=t,void n(o)}if(DayPilot.isArray(i)){var r={};if(r.preventDefault=function(){this.preventDefault.value=!0},r.data=i,"function"==typeof e&&e(r),r.preventDefault.value)return;d.events.list=i,d.B&&d.update()}};if(d.eventsLoadMethod&&"POST"===d.eventsLoadMethod.toUpperCase())DayPilot.ajax({method:"POST",contentType:"application/json",data:{start:d.visibleStart().toString(),end:d.visibleEnd().toString()},url:t,success:a,error:n});else{var o=t,r="start="+d.visibleStart().toString()+"&end="+d.visibleEnd().toString();o+=o.indexOf("?")>-1?"&"+r:"?"+r,DayPilot.ajax({method:"GET",url:o,success:a,error:n})}},this.events.findRecurrent=function(t,e){if(!d.events.list||void 0===d.events.list.length)return null;for(var i=d.events.list.length,n=0;n<i;n++)if(d.events.list[n].recurrentMasterId===t&&d.events.list[n].start.getTime()===e.getTime())return new DayPilot.Event(d.events.list[n],d);return null},this.events.Ah=function(t){for(var e=[],i=0;i<d.rowlist.length;i++){var n=d.rowlist[i];if(!n.isNewRow){d.jh(i);for(var a=0;a<n.events.length;a++){var o=n.events[a].data;if(d.vd(o,t)){e.push(i),n.events.splice(a,1);break}}}}return e},this.events.Mi=function(t){for(var e=0;e<d.rowlist.length;e++){var i=d.rowlist[e];if(!i.isNewRow){d.jh(e);for(var n=0;n<i.events.length;n++){var a=i.events[n];if(d.vd(a.data,t))return i.events[n]}}}return null},this.events.Bh=function(t){var e=[],i=d.Ni()||"Days"===d.viewType,n=DayPilot.indexOf(d.events.list,t);d.jd(n);for(var a=0;a<d.rowlist.length;a++){var o=d.rowlist[a];if(!o.isNewRow){d.jh(a);var r=d.Oi(t,o);if(r&&("function"==typeof d.onBeforeEventRender&&(r.cache=d.u.events[n]),e.push(a),!i))break}}return e},this.vd=function(t,e){return(t=t instanceof DayPilot.Event?t.data:t)===(e=e instanceof DayPilot.Event?e.data:e)||t.id===e.id||!(!DayPilot.Util.isNullOrUndefined(t.id)||DayPilot.Util.isNullOrUndefined(t.recurrentMasterId))&&t.recurrentMasterId===e.recurrentMasterId&&new DayPilot.Date(t.start)===new DayPilot.Date(e.start)},this.events.update=function(t,e,i){var n={};n.oldEvent=new DayPilot.Event(t.copy(),d),n.newEvent=new DayPilot.Event(t.temp(),d);i=i||{};var a=new DayPilot.Action(d,"EventUpdate",n,e);if(DayPilot.list(d.events.list).find(function(e){return d.vd(e,t.data)})){if(d.ud.scope)d.ud.notify(function(){t.commit()});else if(d.Fg.skip=!0,(d.eventUpdateInplaceOptimization||i.inplace)&&n.oldEvent.resource()===n.newEvent.resource()&&n.oldEvent.start()===n.newEvent.start()&&n.oldEvent.end()===n.newEvent.end()){t.commit();var o=d.td(t);if(o){var r=o.event.part;d.Pi(o),DayPilot.rfa(d.elements.events,o),t.part=r}d.events.Ah(t.data);var l=d.events.Bh(t.data);d.Ch(l);var s=d.events.Mi(t.data);s&&d.cc(s)}else{l=d.events.Ah(t.data);t.commit(),l=l.concat(d.events.Bh(t.data)),d.events.Qi(l)}return a}},this.events.remove=function(t,e){var i={};i.e=new DayPilot.Event(t.data,d);var n=new DayPilot.Action(d,"EventRemove",i,e),a=d.Ri(t.data);if(a&&d.events.list.splice(a.index,1),d.ud.scope)d.ud.notify();else{d.Fg.skip=!0;var o=d.events.Ah(t.data);if(d.eventUpdateInplaceOptimization&&1===o.length&&!d.events.rb(t)){d.Si(d.rowlist[o[0]]);var r=d.td(t);if(r){var l=d.elements.events.indexOf(r);d.elements.events.splice(l,1),d.Pi(r)}}else d.events.Qi(o)}return n},this.events.add=function(t,e){t instanceof DayPilot.Event||(t=new DayPilot.Event(t)),t.calendar=d,d.events.list||(d.events.list=[]);var i=d.Ri(t);if(i&&!d.temp.allowDuplicateEventIds)throw new DayPilot.Exception("The event you are trying to add using DayPilot.Scheduler.events.add() is already loaded. A unique ID is required.");i||d.events.list.push(t.data);var n=new DayPilot.Action(d,"EventAdd",a,e);if(!d.B)return n;if(d.ud.scope)d.ud.notify();else{d.Fg.skip=!0;var a={};a.e=t;var o=d.events.Bh(t.data),r=t.data.height||d.eventHeight;if(d.eventUpdateInplaceOptimization&&1===o.length&&!d.events.rb(t)&&r<=d.eventHeight&&!d.eventVersionsEnabled){var l=d.rowlist[o[0]];d.Si(l);var s=l.events.find(function(e){return e.data===t.data});s.part.top=0,s.part.height=r,s.part.line=0,d.cc(s)}else d.events.Qi(o)}return n},this.events.rb=function(t){var e=t instanceof DayPilot.Event?t.data:t,i=new DayPilot.Date(e.start),n=new DayPilot.Date(e.end);return!!DayPilot.list(d.events.list).find(function(t){if(d.vd(e,t))return!1;if(e.resource!==t.resource)return!1;var a=new DayPilot.Date(t.start),o=new DayPilot.Date(t.end);return DayPilot.Util.overlaps(i,n,a,o)})},this.events.addByData=function(t){d.events.add(new DayPilot.Event(t))},this.events.removeByData=function(t){var e=d.events.find(t.id);if(!e)throw new DayPilot.Exception("The event to be removed was not found");d.events.remove(e)},this.events.updateByData=function(t){var e=d.events.find(t.id);if(!e)throw new DayPilot.Exception("The event to be updated was not found");d.events.remove(e),d.events.add(new DayPilot.Event(t))},this.events.removeById=function(t){var e=d.events.find(t);if(!e)throw new DayPilot.Exception("The event to be removed was not found");d.events.remove(e)},this.events.Li={rows:[]},this.events.Ti=null,this.events.Lh=function(){clearTimeout(d.events.Ti),d.events.Li.rows=[]},this.events.Ui=0,this.events.Qi=function(t){var e=d.events.Li.rows;DayPilot.list(t).each(function(t){e.push(t)}),d.events.Li.rows=DayPilot.ua(e);var i=d.events.immediateRefresh;d.events.Ti||(d.events.Ti=setTimeout(i,d.events.Ui))},this.events.immediateRefresh=function(){clearTimeout(d.events.Ti),d.events.Ti=null;var t=d.events.Li.rows;d.events.Li.rows=[],d.Ch(t),d.Dh(),d.B&&("Gantt"===d.viewType?d.update():(d.Eh(t),d.na(),d.Vi()))},this.Fg={},this.Fg.enabled=!1,this.Fg.skip=!1,this.Fg.skipUpdate=function(){return d.Fg.skip},this.Fg.skipped=function(){d.Fg.skip=!1},this.queue={},this.queue.list=[],this.queue.list.ignoreToJSON=!0,this.queue.add=function(t){if(t){if(!t.isAction)throw"DayPilot.Action object required for queue.add()";d.queue.list.push(t)}},this.queue.notify=function(t){var e={};e.actions=d.queue.list,d.I("Notify",e,t,"Notify"),d.queue.list=[]},this.queue.clear=function(){d.queue.list=[]},this.queue.pop=function(){return d.queue.list.pop()},this.cells.find=function(t,e){var i=d.getPixels(new DayPilot.Date(t));if(!i)return p();var n=i.i,a=d.Mg(e);if(!a)return p();var o=a.index;return this.findXy(n,o)},this.cells.findByPixels=function(t,e){var i=d.rh(t);if(!i)return p();t=i.x;var n=d.wi(e);if(!n)return p();e=n.i;return this.findXy(t,e)},this.cells.all=function(){for(var t=[],e=d.itline.length,i=d.rowlist.length,n=0;n<e;n++)for(var a=0;a<i;a++){var o=d.cells.findXy(n,a);t.push(o[0])}return p(t)},this.cells.Wi=function(t,e){var i=d.xh(t),n=d.rowlist[e],a=n.start.getTime()-d.Fa().getTime(),o=i.start.addTime(a),r=i.end.addTime(a),l={};l.x=t,l.y=e,l.i=t+"_"+e,n.id,l.resource=n.id,l.start=o,l.end=r,l.calendar=d,l.isParent=n.children&&n.children.length,l.update=function(){if(!d.rowlist[l.y].hidden){var t=d.u.cells[l.i];d.Xi(t);var e=d.Og();e.xStart<=l.x&&l.x<=e.xEnd&&e.yStart<=l.y&&l.y<=e.yEnd&&d.rf(l.x,l.y)}},l.utilization=function(t){return n.isNewRow?0:(n.sections||n.calculateUtilization(),n.sections.forRange(o,r).maxSum(t))},l.events=function(){return n.events.forRange(o,r)},l.div=d.u.cells[l.i];var s=d.Yi(t,e);return l.properties=s,l},this.cells.findXy=function(t,e){if(DayPilot.isArray(t)){for(var i=[],n=0;n<t.length;n++){var a=t[n];i.push(d.cells.Wi(a.x,a.y))}return p(i)}return null===t||null===e?p():p(d.cells.Wi(t,e))};var f=function(t){var e=DayPilot.list();if(DayPilot.isArray(t))for(var i=0;i<t.length;i++)e.push(t[i]);else"object"==typeof t&&e.push(t);return e};this.Zi=function(t){var e=DayPilot.list();if(DayPilot.isArray(t))for(var i=0;i<t.length;i++)e.push(t[i]);else"object"==typeof t&&e.push(t);return e.cssClass=function(t){return this.each(function(e){e.properties.cssClass=DayPilot.Util.addClassToString(e.properties.cssClass,t),e.update()}),this},e.removeClass=function(t){return this.each(function(e){e.properties.cssClass=DayPilot.Util.removeClassFromString(e.properties.cssClass,t),e.update()}),this},e.addClass=e.cssClass,e.html=function(t){return this.each(function(e){e.properties.html=t,e.update()}),this},e.invalidate=function(){return this.each(function(t){delete d.kh[t.i]}),this},e};var p=this.Zi;this.ud={},this.ud.scope=null,this.ud.notify=function(t){d.ud.scope&&DayPilot.Util.safeApply(d.ud.scope,t)},this.debug=new DayPilot.Debug(this),this.$i=function(t){if("Days"!==d.viewType)throw"Checking row start when viewType !== 'Days'";for(var e=0;e<d.rowlist.length;e++){var i=d.rowlist[e],n=(i.element?i.element.data:i.data).start;if(t.getTime()>=n.getTime()&&t.getTime()<n.addDays(1).getTime())return n}return null},this._i=function(t){var e=d.Fa();if(t.ticks===e.ticks)return t;var i=e;if(t.ticks<e.ticks){for(var n=this.itline[0].end.ticks-this.itline[0].start.ticks;i.ticks>t.ticks;)i=i.addTime(-n);return i}if("Days"===d.viewType){var a,o=this.$i(t).getTime()-d.Fa().getTime();if((a=this.vh(t.addTime(-o))).current)return a.current.start.addTime(o);if(a.past)return a.previous.end.addTime(o);throw"getBoxStart(): time not found"}if((a=this.vh(t)).current)return a.current.start;if(a.past)return a.previous.end;if(a.hidden){var r=a.next.start.getTime()-t.getTime(),l=a.next.end.getTime()-a.next.start.getTime(),s=Math.ceil(r/l)*l;return a.next.start.addTime(-s)}throw"getBoxStart(): time not found"},this.Ci=function(t){var e=this.wi(d.coords.y);if("function"!=typeof t.end)throw"e.end function is not defined";if(!t.end())throw"e.end() returns null";var i=DayPilot.DateUtil.diff(t.rawend(),t.start());i=Math.max(i,1);var a,o,r,l,s=R.useBox(i),c=t.data&&"Milestone"===t.data.type,h=d.eventHeight,u=0,v=d.coords.x;if(c&&(v+=h/2),"Manual"===d.scale){var f=(o=(a=d.getDate(d.coords.x,!0,!0)).addTime(-i),r=d.getPixels(o).boxLeft,l=d.getPixels(a).boxRight,(a=Math.min(l,d.coords.x))-r),p=Math.min(n.moveOffsetX?n.moveOffsetX:0,f);v=d.coords.x-p}var g=0,y="Days"===this.viewType||this.aj();y&&!t.part.external&&(g=this.rowlist[t.part.dayIndex].start.getTime()-this.Fa().getTime());var m=n.movingEvent?n.movingEvent.calendar:d;if(s&&!c&&m===d){var b=d.vh(t.start()),w=!b.hidden&&!b.past;u=t.start().getTime()-this._i(t.start().addTime(-g)).addTime(g).getTime(),w&&(u=function(t,e){var i=d.bj(d.vh(t).current),n=d.bj(d.rh(v).cell);if(i>1.2*n){var a=e>0?1:-1;for(e=Math.abs(e);e>=n;)e-=n;e*=a}return e}(t.start(),u))}m!==d&&m.cj()!==d.cj()&&(u=0);var D=0;if(n.moveDragStart&&"Manual"!==d.scale&&m===d)if(s){var P=t.start().addTime(-g),x=this._i(P);D=n.moveDragStart.getTime()-x.getTime();var k=60*d.cj()*1e3;D=Math.floor(D/k)*k}else D=n.moveDragStart.getTime()-t.start().addTime(-g).getTime();else D=0;this.eventMoveToPosition&&(D=0);var C=this.getDate(v,!0).addTime(-D).addTime(g);n.resizing&&(C=t.start()),this.snapToGrid&&(C=this._i(C.addTime(-g)).addTime(g));var S=(C=C.addTime(u)).addTime(i),T=C,E=S;if(y){E=(T=C.addTime(-g)).addTime(i);var M=e.element.data.start.getTime()-this.Fa().getTime();S=(C=T.addTime(M)).addTime(i)}if(d.eventMoveSkipNonBusiness){var H=e.i,B=0;if(n.moveDragStart){B=n.moveDragStart.addTime(g);this.snapToGrid&&(B=this._i(B.addTime(-g)).addTime(g))}var A=!t.part.dayIndex,_=0;A||(_=d.dj(t.start(),B,t.part.dayIndex));i=d.ej(t);var U=d.getDate(v,!0);d.snapToGrid&&(U=d.getDate(v));p=d.fj(U,_,H);C=U.addTime(-p).addTime(g),this.snapToGrid&&(C=this._i(C.addTime(-g)).addTime(g)),u=A?0:d.dj(this._i(t.start().addTime(-g)).addTime(g),t.start(),H),C=C.addTime(u),(S=d.gj(C,i,H))>=d.visibleEnd()&&(C=(S=d.visibleEnd()).addTime(-d.hj(S,i))),T=C.addTime(-g),E=S.addTime(-g)}var N=this.getPixels(T),L=this.getPixels(E),O=s?N.boxLeft:N.left,I=s?L.boxRight-O:L.left-O;c&&(O-=(I=h)/2);var z={};return z.top=e.top,z.left=O,z.row=e.element,z.rowIndex=e.i,z.width=I,z.start=C,z.end=S,z.relativeY=d.coords.y-e.top,z},this.ij=function(t,e){var i=d.vh(t),n=d.vh(e),a=null,o=0;i.hidden&&(a=t);for(var r=i.i;r<=n.i;r++){var l=d.itline[r];a&&a<l.start&&(o+=l.start.getTime()-a.getTime()),a=l.end}return o},this.gj=function(t,e,i){var n=e,a=d.rowlist[i].data.start.getTime()-d.Fa().getTime(),o=t.addTime(-a),r=d.jj(o,i);if(!r)throw new DayPilot.Exception("No next cell found");var l=DayPilot.indexOf(d.itline,r);if(r.start>t);else{if((n-=r.end.getTime()-o.getTime())<=0)return t.addTime(e);l+=1}for(var s=l;s<d.itline.length;s++)if(d.Yi(s,i).business){var c=d.itline[s],h=c.start.addTime(a),u=c.end.addTime(a).getTime()-h.getTime();if(n<=u)return h.addTime(n);n-=u}return h||(h=d.itline[d.itline.length-1].end),h.addTime(n)},this.dj=function(t,e,i){var n=d.rowlist[i].data.start.getTime()-d.Fa().getTime(),a=(d.vh(t),t.addTime(-n)),o=e.addTime(-n),r=d.jj(a,i);if(!r)throw new DayPilot.Exception("No next cell found");var l=0,s=DayPilot.indexOf(d.itline,r);if(r.start<=o){if(e<r.end.addTime(n))return r.start>a?e.getTime()-r.start.addTime(n).getTime():e.getTime()-t.getTime();l+=a>r.start?r.end.getTime()-a.getTime():r.end.getTime()-r.start.getTime(),s+=1}for(var c=s;c<d.itline.length;c++)if(d.Yi(c,i).business){var h=d.itline[c],u=h.start.addTime(n),v=h.end.addTime(n),f=v.getTime()-u.getTime();if(e<u)return l;if(e<v)return l+(e.getTime()-u.getTime());l+=f}var p=e.getTime()-d.itline.last().end.addTime(n).getTime();return l+Math.min(0,p)},this.ej=function(t){if(t.part.duration){if(isNaN(t.part.duration))throw new DayPilot.Exception("Unable to get calculated duration");return t.part.duration}var e=t.part.dayIndex;return d.dj(t.start(),t.rawend(),e)},this.hj=function(t,e){var i=0,n=e;if(!(r=d.vh(t)).current)throw new DayPilot.Exception("Current cell not found.");if(t.addTime(-e)>r.current.start)return e;i+=t.getTime()-r.current.start.getTime(),n-=t.getTime()-r.current.start.getTime();var a=DayPilot.indexOf(d.itline,r.current);a-=1;for(var o=r.current.start;a>=0;){var r;o>(r=d.itline[a]).end&&(i+=o.getTime()-r.end.getTime()),o=r.start;var l=r.end.getTime()-r.start.getTime();if(n<=l)return i+n;i+=l,n-=l,a-=1}throw new DayPilot.Exception("Unable to backward calculate offset in visible timeline")},this.fj=function(t,e,i){var n=0,a=e;if(!(l=d.vh(t)).current)throw new DayPilot.Exception("Current cell not found.");var o=DayPilot.indexOf(d.itline,l.current);if(d.Yi(o,i).business){if(t.addTime(-e)>=l.current.start)return e}else if(0===e||t.addTime(-e)>=l.current.start)return t.getTime()-d.jj(t,i).start.getTime();n+=t.getTime()-l.current.start.getTime(),a-=t.getTime()-l.current.start.getTime(),o-=1;for(var r=l.current.start;o>=0;){var l;r>(l=d.itline[o]).end&&(n+=r.getTime()-l.end.getTime()),r=l.start;var s=l.end.getTime()-l.start.getTime();if(d.Yi(o,i).business){if(a<=s)return n+a;n+=s,a-=s}else n+=s;o-=1}return n+a},this.jj=function(t,e){var i=d.vh(t),n=0;if(i.past)return null;if(i.current)n=i.i;else{if(!i.next)return null;n=DayPilot.indexOf(d.itline,i.next)}for(var a=n;a<d.itline.length;a++)if(d.kj(a,e))return d.itline[a];return null},this.kj=function(t,e){return d.Yi(t,e).business},this.cj=function(){switch(this.scale){case"CellDuration":return this.cellDuration;case"Minute":return 1;case"Hour":return 60;case"Day":return 1440;case"Week":return 10080;case"Month":return 43200;case"Year":return 525600;case"Manual":if(d.itline.length>0){var t=d.itline[0];return(t.end.getTime()-t.start.getTime())/6e4}return d.cellDuration}throw"can't guess cellDuration value"},this.bj=function(t){return t.end.ticks-t.start.ticks},this.Di=function(t){return this.treePreventParentUsage&&this.lj(t)},this.lj=function(t){var e=this.rowlist[t];return!!e.isParent||!!(this.treeEnabled&&e.children&&e.children.length>0)},this.mj={},this.nj=function(){if(d.treeAutoExpand){var t=this.Ci(n.movingEvent).rowIndex,e=this.lj(t),i=this.mj;if(i.timeout&&i.y!==t&&(clearTimeout(i.timeout),i.timeout=null),e){i.y=t;var a=!d.rowlist[i.y].expanded;!i.timeout&&a&&(i.timeout=setTimeout(function(){!d.rowlist[i.y].expanded&&(d.oj(i.y),d.pj()),i.timeout=null},500))}}},this.qj=function(){clearTimeout(d.mj.timeout)},this.Uc=function(){var t,e=n.resizingShadow.width,i=n.resizingShadow.left,a=n.resizingEvent,o=n.resizing.dpBorder;t=d.rowlist[a.part.dayIndex].start.getTime()-d.Fa().getTime();var r=null,l=null,s=!d.snapToGrid;"left"===o?(r=d.getDate(i,s).addTime(t),l=a.rawend()):"right"===o&&(r=a.start(),l=d.getDate(i+e,s,!0).addTime(t)),n.resizingShadow.start=r,n.resizingShadow.end=l,y.update()},this.Aj={};var g=this.Aj;g.findJointDivs=function(t){var e=t.data.join;return e?DayPilot.list(d.elements.events).filter(function(i){return i.event.data.join===e&&i.event!==t}):DayPilot.list()},this.Bj={};var y=this.Bj;y.divs=[],y.list=[],y.forbidden=!1,y.additional=function(){var t=DayPilot.list(),e=d.multiselect.isSelected(n.resizing.event),i=d.allowMultiResize;t=DayPilot.list();if(e&&i&&(t=DayPilot.list(d.multiselect.Gb).filter(function(t){return t!==n.resizing})),d.jointEventsResize){var a=g.findJointDivs(n.resizingEvent);t=t.concat(a)}return t},y.update=function(){y.clear(),y.draw()},y.clear=function(){DayPilot.de(y.divs),y.divs=[]},y.draw=function(){if(n.resizing){var t=n.resizingEvent,e=n.resizingShadow,i=e.start.getTime()-t.start().getTime(),a=e.end.getTime()-t.end().getTime();if(y.list=[],y.forbidden=!1,y.invalid=!1,y.rowoffset=0,y.additional().each(function(t){if(t.event){var e=t.event,n=d.rowlist[e.part.dayIndex+0];if(!n)return void(y.invalid=!0);var o=e.part.top+n.top,r=e.part.height,l=e.start().addTime(i),s=e.end().addTime(a),c={};c.event=e,c.start=l,c.end=s,c.overlapping=!1,y.list.push(c);var h=d.getPixels(l),u=d.getPixels(s),v=DayPilot.DateUtil.diff(e.rawend(),e.start());v=Math.max(v,1);var f=R.useBox(v),p=f?h.boxLeft:h.left,g=f?u.boxRight-p:u.left-p,m=document.createElement("div");m.style.position="absolute",m.style.left=p+"px",m.style.top=o+"px",m.style.height=r+"px",m.style.width=g+"px",m.style.zIndex=101,m.style.overflow="hidden",m.className=d.q("_shadow"),m.info=c;var b=document.createElement("div");b.className=d.q("_shadow_inner"),m.appendChild(b),d.Jg.appendChild(m),y.divs.push(m)}}),y.invalid){var o=d.q("_shadow_overlap");return void DayPilot.list(y.divs).each(function(t){DayPilot.Util.addClass(t,o)})}DayPilot.list(y.divs).each(function(t){if(t.info){var e=t,i=t.info,a=t.info.event,o=d.rowlist[a.part.dayIndex+0],r=d.getPixels(i.start),l=d.getPixels(i.end),s=r.left,c=l.left-s,h=DayPilot.list(y.list).map(function(t){return t.event.data}).add(n.resizing.event.data);d.Cj(e,o,s,c,h),d.Dj(e,i.start,i.end,i.resource),e.overlapping&&(i.overlapping=!0,y.forbidden=!0)}})}},this.Ej={},this.Ej.modifiedProps=function(){var t=new DayPilot.Scheduler,e=DayPilot.Util.members(d,2),i=[];return i.push("<div id='dp'></div>"),i.push("<script>"),i.push("var dp = new DayPilot.Scheduler('dp');"),e.properties.each(function(e){var n,a,o=e.name,r=o.split(".");if(r.length>1){var l=r[0],s=r[1];n=JSON.stringify(t[l][s]),a=JSON.stringify(d[l][s])}else n=JSON.stringify(t[o]),a=JSON.stringify(d[o]);n!==a&&i.push("dp."+o+" = "+a+";")}),e.events.each(function(t){var e=t.name;"function"==typeof d[e]&&i.push("dp."+e+" = "+d[e].toString()+";")}),i.push("dp.init();"),i.push("<\/script>"),i.join("\n")},this.Fj={};var m=this.Fj;m.divs=[],m.list=[],m.forbidden=!1,m.verticalAll=function(){return"All"===d.multiMoveVerticalMode},m.additional=function(){var t=DayPilot.list(),e=d.multiselect.isSelected(n.movingEvent),i=d.allowMultiMove;t=DayPilot.list();if(e&&i&&(t=DayPilot.list(d.multiselect.Gb).filter(function(t){return t!==n.moving&&t!==C.moving})),d.jointEventsMove){var a=g.findJointDivs(n.movingEvent);t=t.concat(a)}return t},m.update=function(){m.clear(),m.draw()},m.draw=function(){if(n.moving){var t=n.movingEvent,e=n.movingShadow.start.getTime()-t.start().getTime(),i=t.part.dayIndex,a=DayPilot.indexOf(d.rowlist,n.movingShadow.row)-i;if(m.verticalAll()||(a=0),m.list=[],m.forbidden=!1,m.invalid=!1,m.rowoffset=a,m.additional().each(function(t){if(t.event){var i=t.event,n=d.rowlist[i.part.dayIndex+a];if(!n)return void(m.invalid=!0);var o=i.part.top+n.top,r=i.part.height;a&&(o=n.top,r=n.height);var l=i.start().addTime(e),s=i.end().addTime(e),c={};c.event=i,c.start=l,c.end=s,c.resource=n.id,c.overlapping=!1,m.list.push(c);var h=d.getPixels(l),u=d.getPixels(s),v=DayPilot.DateUtil.diff(i.rawend(),i.start());v=Math.max(v,1);var f=R.useBox(v),p=f?h.boxLeft:h.left,g=f?u.boxRight-p:u.left-p,y=document.createElement("div");y.style.position="absolute",y.style.left=p+"px",y.style.top=o+"px",y.style.height=r+"px",y.style.width=g+"px",y.style.zIndex=101,y.style.overflow="hidden",y.className=d.q("_shadow"),y.info=c;var b=document.createElement("div");b.className=d.q("_shadow_inner"),y.appendChild(b),d.Jg.appendChild(y),m.divs.push(y)}}),m.invalid){var o=d.q("_shadow_overlap");return void DayPilot.list(m.divs).each(function(t){DayPilot.Util.addClass(t,o)})}DayPilot.list(m.divs).each(function(t){if(t.info){var e=t,i=t.info,o=t.info.event,r=d.rowlist[o.part.dayIndex+a],l=d.getPixels(i.start),s=d.getPixels(i.end),c=l.left,h=s.left-c,u=DayPilot.list(m.list).map(function(t){return t.event.data}).add(n.movingEvent.data);d.Cj(e,r,c,h,u),d.Dj(e,i.start,i.end,i.resource),e.overlapping&&(i.overlapping=!0,m.forbidden=!0)}})}},m.clear=function(){DayPilot.de(m.divs),m.divs=[]},this.Gj=function(){var t=d.coords,e=n.resizing.dpBorder,i=n.resizing.event,a=i.part.left;"right"==e&&(a+=i.part.width);var o,r,l=n.resizing.event.calendar.cellWidth,s=n.resizing.event.part.width,c=n.resizing.event.part.left,h=t.x-a;if("right"===e){if(o=c,d.snapToGrid){var u=d.rh(s+c+h).cell;(r=u.left+u.width-c)<l&&(r=l)}else r=s+h;var v=d.Xg();c+r>v&&(r=v-c),n.resizingShadow.left=c,n.resizingShadow.width=r}else{if("left"!==e)throw"Invalid dpBorder.";d.snapToGrid?(h>=s&&(h=s),(o=Math.floor((c+h+0)/l)*l)<0&&(o=0)):o=c+h,r=s-(o-c);var f=c+s,p=l;d.snapToGrid?"Never"===d.useEventBoxes&&(p=s<l?s:1):p=1,r<p&&(o=f-(r=p)),n.resizingShadow.left=o,n.resizingShadow.width=r}!function(){n.resizingShadow.overlapping=!1;var t=n.resizing.event,e=d.rowlist[t.part.dayIndex],i=o,a=r;d.Cj(n.resizingShadow,e,i,a,t.data);var l=n.resizingShadow;if(l.start){var s={start:l.start,end:d.vf(l.end)};d.Dj(n.resizingShadow,s.start,s.end,e.id)}}(),d.Hj()},this.pj=function(){if(this.nav.scroll,d.coords&&n.movingEvent){d._g();var t=n.movingShadow,e=this.Ci(n.movingEvent);if(!d.Di(e.rowIndex)){var i=n.movingEvent,a=0,o=0;!function(){if(d.eg){var t=e.relativeY,i=d.rh(e.left).x,n=(l=e.row).evColumns[i],r=n.events.find(function(e){return t<e.part.top+e.part.height+d.eventMarginBottom});r||(r=n.events.last()),r&&(o=r.part.top,a=DayPilot.indexOf(n.events,r),t-r.part.top>r.part.height/2&&(o=r.part.top+r.part.height+d.eventMarginBottom/2,a+=1))}else{t=e.relativeY;for(var l=e.row,s=d.Ic.eventHeight(),c=l.lines.length,h=0;h<l.lines.length;h++)if(l.lines[h].isFree(e.left,d.cellWidth)){c=h;break}var u=Math.floor((t-0+s/2)/s);u=Math.min(c,u),u=Math.max(0,u);a=u,o=d.rowMarginTop+a*(d.Ic.eventHeight()+d.eventMarginBottom)+d.eventMarginBottom/2}}(),o>0&&(o-=3);var r=i.cache&&void 0!==i.cache.moveVDisabled?!i.cache.moveVDisabled:!i.data.moveVDisabled,l=i.cache&&void 0!==i.cache.moveHDisabled?!i.cache.moveHDisabled:!i.data.moveHDisabled,s=!m.additional().isEmpty();if(s&&"Disabled"===d.multiMoveVerticalMode&&(r=!1),r)if(this.Di(e.rowIndex)){var c;if(!(f=t.row))return;c=e.rowIndex<f.index?1:-1;for(var h=e.rowIndex;h!==f.index;h+=c){var u=this.rowlist[h];if(!this.Di(h)&&!u.hidden){t.style.top=u.top+"px",t.style.height=Math.max(u.height,0)+"px",t.row=u,d.eventMoveToPosition&&(a=c>0?0:u.lines.length-1,t.style.top=e.top+o+"px",t.style.height="3px",t.line=a);break}}}else t.row=e.row,t.style.height=Math.max(e.row.height,0)+"px",t.style.top=e.top+"px",d.eventMoveToPosition&&(t.style.top=e.top+o+"px",t.style.height="3px",t.line=a);else{var f,p=(f=d.rowlist[i.part.dayIndex]).lines.length;for(h=0;h<f.lines.length;h++)if(f.lines[h].isFree(e.left,d.cellWidth)){p=h;break}if(s||(t.style.height=Math.max(f.height,0)+"px",t.style.top=f.top+"px"),t.row=f,d.eventMoveToPosition&&!s)if(e.row===f)t.style.top=f.top+o+"px",t.style.height="3px",t.line=a;else{var g=e.rowIndex>f.index&&p>0?p*d.Ic.eventHeight()-3:0;t.style.top=f.top+g+"px",t.style.height="3px",t.line=0}}l?(t.style.left=e.left+"px",d.eventMoveToPosition?t.style.width=d.cellWidth+"px":t.style.width=e.width+"px",t.start=e.start,t.end=e.end):(t.style.left=i.part.left+"px",t.start=i.start(),t.end=i.rawend(),e.left=i.part.left),function(){t.overlapping=!1;var a=t.row,o=i.data,r=e.width,l=e.left,s=DayPilot.list(m.list).map(function(t){return t.event.data}).add(o);d.Cj(t,a,l,r,s),d.Dj(n.movingShadow,t.start,t.end,t.row.id)}(),function(){var e=d.Vc;if(!e||e.start.getTime()!==t.start.getTime()||e.end.getTime()!==t.end.getTime()||e.resource!==t.row.id){m.update();var r=!!n.drag&&i.part.external,l={};l.start=t.start,l.end=d.vf(t.end),l.duration=new DayPilot.Duration(l.start,l.end),l.e=i,l.external=r,l.resource=t.row.id,l.html=null,l.row=d.ci(t.row),l.position=t.line,l.overlapping=t.overlapping||m.forbidden,l.allowed=!0,l.left={},l.left.html=l.start.toString(d.eventMovingStartEndFormat,R.locale()),l.left.enabled=d.eventMovingStartEndEnabled,l.left.space=5,l.left.width=null,l.right={},l.right.html=l.end.toString(d.eventMovingStartEndFormat,R.locale()),l.right.enabled=d.eventMovingStartEndEnabled,l.right.space=5,l.right.width=null,l.multimove=DayPilot.list(m.list),l.shift=d.coords.shift,l.ctrl=d.coords.ctrl,l.meta=d.coords.meta,l.alt=d.coords.alt,l.areaData=DayPilot.Global.movingAreaData,l.link=null;var s={};s.event=i,s.start=l.start,s.end=l.end,s.overlapping=l.overlapping,s.resource=l.resource,l.multimove.splice(0,0,s),d.Vc=l;var c=l.start,h=l.end,u=l.resource;if("function"==typeof d.onEventMoving&&d.onEventMoving(l),t.allowed=l.allowed,l.start!==c||l.end!==h){var f=l.start,p=d.We(l.end);t.start=f,t.end=p;var g=DayPilot.DateUtil.diff(f,p);g=Math.max(g,1);var y=R.useBox(g),b=y?d.getPixels(f).boxLeft:d.getPixels(f).left,w=y?d.getPixels(p).boxRight:d.getPixels(p).left;t.style.left=b+"px",t.style.width=w-b+"px"}if(l.resource!==u){var D=d.Mg(l.resource);D&&(t.row=D,t.style.height=Math.max(D.height,0)+"px",t.style.top=D.top+"px",d.eventMoveToPosition&&(t.style.top=D.top+o+"px",t.style.height="3px",t.line=a))}l.html?t.firstChild.innerHTML=l.html:t.firstChild.innerHTML="",d.Ij(t,l),d.Jj(n.movingShadow,l),l.link&&(DayPilot.Global.movingLink&&DayPilot.Global.movingLink.clear(),DayPilot.Global.movingLink=v.drawLink(l.link.from,t,l.link))}}()}}},this.Cj=function(t,e,i,n,a){if(!d.allowEventOverlap){!function(){t.overlapping=!1;for(var o=0;o<e.lines.length;o++)if(!e.lines[o].isFree(i,n,a))return void(t.overlapping=!0);if(d.allowMultiRange){var r=e.index;DayPilot.list(M.list).some(function(e){var a=e.div,o=parseInt(a.style.left),l=parseInt(a.style.width),s=e.start.y;return t!==a&&s===r&&DayPilot.Util.overlaps(i,i+n,o,o+l)})&&(t.overlapping=!0)}}();var o=t.overlapping,r=d.q("_shadow_overlap");o?DayPilot.Util.addClass(t,r):DayPilot.Util.removeClass(t,r)}},this.Dj=function(t,e,i,n){if(d.cellConfig&&d.cellConfig.hasDisabled||d.kh.Kj){d.Lj(e,i,n)&&(t.overlapping=!0);var a=d.q("_shadow_overlap");t.overlapping?DayPilot.Util.addClass(t,a):DayPilot.Util.removeClass(t,a)}},this.Lj=function(t,e,i){var n=d.rows.find(i).cells.forRange(t,e);return!!n&&n.some(function(t){return t.properties.disabled})},this.Ij=function(t,e){var i=d.q("_shadow_forbidden");!e.allowed||m.invalid?DayPilot.Util.addClass(t,i):DayPilot.Util.removeClass(t,i)},this.Jj=function(t,e){if(this.Mj(),t.calendar===d){var i={};i.left=parseInt(t.style.left),i.top=parseInt(t.style.top),i.right=i.left+parseInt(t.style.width);var n=e.left.width||10,a=document.createElement("div");if(a.style.position="absolute",a.style.left=i.left-n-e.left.space+"px",a.style.top=i.top+"px",a.style.height=d.eventHeight+"px",a.style.overflow="hidden",a.style.boxSizing="border-box",a.innerHTML=e.left.html,a.className=this.q("_event_move_left"),a.onmousemove=d.Nj,e.left.enabled)if(d.divHover.appendChild(a),e.left.width)a.style.width=n+"px";else{a.style.whiteSpace="nowrap";var o=a.offsetWidth,r=i.left-o-e.left.space;a.style.width=o+"px",a.style.left=r+"px";var l=d.nav.scroll.scrollLeft;r<l&&d.divHover.removeChild(a);var s=d.Oj()+(r-l);s>0&&(a.style.left=s+"px",a.style.top=i.top-d.nav.scroll.scrollTop+d.Zg()+"px",d.nav.top.appendChild(a),d.elements.hover.push(a))}n=e.right.width||10;var c=document.createElement("div");if(c.style.position="absolute",c.style.left=i.right+e.right.space+"px",c.style.top=i.top+"px",c.style.height=d.eventHeight+"px",c.style.overflow="hidden",c.style.boxSizing="border-box",e.right.width?c.style.width=e.right.width+"px":c.style.whiteSpace="nowrap",c.innerHTML=e.right.html,c.className=this.q("_event_move_right"),c.onmousemove=d.Nj,e.right.enabled){d.divHover.appendChild(c);var h=d.nav.scroll.scrollWidth;i.right+e.right.space+c.offsetWidth>=h&&d.divHover.removeChild(c)}}},this.Mj=function(){d.divHover.innerHTML="",DayPilot.de(d.elements.hover),d.elements.hover=[]},this.Pj=function(){var t=d.rowHeaderColumnDefaultWidth;this.rowHeaderColumns?this.rowHeaderCols=DayPilot.Util.propArray(this.rowHeaderColumns,"width",t):this.rowHeaderCols=null},this.Oj=function(){var t=0;if(this.Pj(),this.rowHeaderCols)for(var e=0;e<this.rowHeaderCols.length;e++)t+=this.rowHeaderCols[e];else t=this.rowHeaderWidth;return t},this.Qj=function(){return this.Rj(d.progressiveRowRenderingPreload)},this.Rj=function(t){t=t||0;var e=0,i=d.rowlist.length;if(d.progressiveRowRendering){var n=d.Og();e=n.yStart,i=n.yEnd+1,e=Math.max(0,e-t),i=Math.min(d.rowlist.length,i+t)}return{start:e,end:i}},this.Sj=function(){if(this.dd()){var t=!1,e=0;if(this.rowHeaderWidthAutoFit){var i=this.divHeader;if(!i)return;if(!i.rows)return;for(var n=[],a=d.Qj(),o=a.start;o<a.end;o++){var r=i.rows[o];if(r&&!r.hidden&&!r.autofitDone){r.autofitDone=!0;for(var l=0;l<r.cells.length;l++){var s=r.cells[l].firstChild.firstChild;if(s&&s.style){var c=s.style.width,h=s.style.right,u=s.style.display;s.style.position="absolute",s.style.width="auto",s.style.right="auto",s.style.whiteSpace="nowrap",s.style.display="block";var v=s.offsetWidth+2;s.style.position="",s.style.width=c,s.style.right=h,s.style.display=u,s.style.whiteSpace="",void 0===n[l]&&(n[l]=0),n[l]=Math.max(n[l],v)}}}}if(this.Pj(),this.rowHeaderCols)for(o=0;o<n.length;o++)this.rowHeaderCols[o]&&(n[o]>this.rowHeaderCols[o]&&(this.rowHeaderCols[o]=n[o],t=!0),e+=this.rowHeaderCols[o]);else{e=this.rowHeaderWidth;var f=R.splitterWidth();this.rowHeaderWidth<n[0]+d.rowHeaderWidthMarginRight+f&&(e=n[0]+d.rowHeaderWidthMarginRight+f,t=!0)}}t&&(this.Bi&&(this.Bi.widths=this.rowHeaderCols,this.Bi.updateWidths(),DayPilot.Util.updatePropsFromArray(this.rowHeaderColumns,"width",this.rowHeaderCols)),this.rowHeaderCols||(this.rowHeaderWidth=e),this.Ih(),this.Tj())}},this.qg=function(){this.Uj=!0,this.Pj();var t=this.Oj(),e=this.divHeader;if(e){if(DayPilot.browser.ie)for(var i=0;i<e.childNodes.length;i++)DayPilot.de(e.childNodes[i]);e.innerHTML="",DayPilot.puc(e)}else e=document.createElement("div"),e.onmousemove=function(){d.V()},this.divHeader=e;if(e.style.width=t+"px",e.style.height=d.ig+"px",e.rows=[],d.progressiveRowRendering);else{var n=this.rowlist.length;for(i=0;i<n;i++)d.Vj(i)}d.Wj(),this.divResScroll.appendChild(e),this.rowHeaderWidthAutoFit&&this.Sj()},this.Jh=function(){if(d.progressiveRowRendering){for(var t=this.Qj(),e=0;e<d.rowlist.length;e++)t.start<=e&&e<t.end?d.Vj(e):d.Xj(e);if(this.rowHeaderWidthAutoFit){var i=d.$g();if(this.Sj(),d.$g()!==i){var n=this.cellWidth;this.ng(),this.cellWidth!==n&&(d.og(),d.rg(),d.na(),d.fa(),d.Yj())}}}},this.Wj=function(){var t=d.divHeader;(i=document.createElement("div")).style.position="absolute",t.appendChild(i),d.nav.resScrollSpace=i,i.setAttribute("unselectable","on");var e=document.createElement("div");e.style.position="relative",e.style.height="100%",e.className=this.q("_rowheader"),i.appendChild(e);var i,n=this.Oj();(i=d.nav.resScrollSpace).style.width=n+"px",i.style.top=this.ig+"px",i.style.height=d.divResScroll.clientHeight+20+"px"},this.Xj=function(t){var e=d.divHeader.rows[t];e&&(DayPilot.de(e.cells),d.divHeader.rows[t]=null)},this.Qh=function(t){this.Xj(t),this.Vj(t)},this.Vj=function(t){var e=d.divHeader,i=this.divHeader;if(!i.rows[t]){var n=this.rowHeaderCols,o=n?this.rowHeaderCols.length:0,r=this.Oj(),l=this.rowlist[t];if(l&&!l.hidden){var s=this.zj(l);i.rows[t]={},i.rows[t].cells=[],(m=document.createElement("div")).style.position="absolute",m.style.top=l.top+"px",m.row=l,m.index=t;var c=s.row,h=n?n[0]:this.rowHeaderWidth;m.style.width=h+"px",m.style.border="0px none",c.toolTip&&(m.title=c.toolTip),m.setAttribute("unselectable","on"),void 0!==c.ariaLabel?m.setAttribute("aria-label",c.ariaLabel):m.setAttribute("aria-label",c.html),m.onmousemove=d.Zj,m.onmouseout=d.$j,m.onmouseup=d._j,m.oncontextmenu=d.ak,m.onclick=d.bk,m.ondblclick=d.ck,(w=document.createElement("div")).style.width=h+"px",w.setAttribute("unselectable","on"),w.className=this.q("_rowheader"),c.cssClass&&DayPilot.Util.addClass(w,c.cssClass),c.backColor&&(w.style.background=c.backColor),c.fontColor&&(w.style.color=c.fontColor),c.horizontalAlignment&&(w.style.textAlign=c.horizontalAlignment),w.style.height=l.height+"px",w.style.overflow="hidden",w.style.position="relative",(x=document.createElement("div")).setAttribute("unselectable","on"),x.className=this.q("_rowheader_inner"),w.appendChild(x);var u="Disabled"!==this.rowMoveHandling,v=10,f=c.areas||[];u&&!c.moveDisabled&&f.push({v:"Hover",w:v,bottom:0,top:0,left:0,css:d.q("_rowmove_handle"),action:"Move"});var p=d.ci(l);if(DayPilot.Areas.attach(w,p,{areas:f,allowed:function(){return!a.row}}),(k=document.createElement("div")).style.position="absolute",k.style.bottom="0px",k.style.width="100%",k.style.height="1px",k.className=this.q(T.resourcedivider),w.appendChild(k),function(){var e=document.createElement("div");if(d.treeEnabled&&!l.isNewRow){var i=l.level*d.treeIndent+d.treeImageMarginLeft;u&&(i+=v);var n=d.treeImageWidth,a=d.treeImageHeight;e.style.marginLeft=i+"px",e.style.position="relative",e.className=d.q("_rowheader_inner_indent");var o=document.createElement("div");o.style.width=n+"px",o.style.height=a+"px",o.style.backgroundRepeat="no-repeat",o.style.position="absolute",o.style.top=d.treeImageMarginTop+"px",l.loaded||0!==l.children.length?l.children.length>0?(l.expanded?o.className=d.q("_tree_image_collapse"):o.className=d.q("_tree_image_expand"),o.style.cursor="pointer",o.index=t,o.onclick=function(t){d.oj(this.index),(t=t||window.event).cancelBubble=!0}):o.className=d.q("_tree_image_no_children"):(o.className=d.q("_tree_image_expand"),o.style.cursor="pointer",o.index=t,o.onclick=function(t){d.dk(this.index),(t=t||window.event).cancelBubble=!0}),e.appendChild(o)}var r=document.createElement("div");if(d.treeEnabled){var s=d.treeImageMarginRight;r.style.marginLeft=n+s+"px"}r.innerHTML=c.html,r.className=d.q("_rowheader_inner_text"),m.textDiv=r,m.cellDiv=w,e.appendChild(r),x.appendChild(e);var h=c.verticalAlignment;if(h)switch(x.style.display="flex",h){case"center":x.style.alignItems="center";break;case"top":x.style.alignItems="flex-start";break;case"bottom":x.style.alignItems="flex-end"}}(),m.appendChild(w),e.appendChild(m),i.rows[t].cells.push(m),l.columns&&0!==l.columns.length)for(var g=h,y=1;y<o;y++){var m,b=c.columns[y-1]||{};(m=document.createElement("div")).style.position="absolute",m.style.top=l.top+"px",m.style.left=g+"px",e.appendChild(m),i.rows[t].cells.push(m),m.row=l,m.index=t,c.toolTip&&(m.title=c.toolTip),m.setAttribute("unselectable","on"),m.onmousemove=d.Zj,m.onmouseout=d.$j,m.onmouseup=d._j,m.oncontextmenu=d.ak,m.onclick=d.bk,m.ondblclick=d.ck;var w=document.createElement("div"),D=n[y];g+=D;var P=b.backColor||c.backColor;P&&(w.style.backgroundColor=P);var x,k,C=c.fontColor;C&&(w.style.color=C),w.style.width=D+"px",w.style.height=l.height+"px",w.style.overflow="hidden",w.style.position="relative",w.setAttribute("unselectable","on"),DayPilot.Util.addClass(w,this.q("_rowheader")),DayPilot.Util.addClass(w,this.q("_rowheadercol")),DayPilot.Util.addClass(w,this.q("_rowheadercol"+y)),c.cssClass&&DayPilot.Util.addClass(w,c.cssClass),b.cssClass&&DayPilot.Util.addClass(w,b.cssClass),b.horizontalAlignment&&(w.style.textAlign=b.horizontalAlignment),(x=document.createElement("div")).setAttribute("unselectable","on"),x.className=this.q("_rowheader_inner"),w.appendChild(x),(k=document.createElement("div")).style.position="absolute",k.style.bottom="0px",k.style.width="100%",k.style.height="1px",k.className=this.q("_resourcedivider"),w.appendChild(k);var S=document.createElement("div"),E=b.html||b.text||"";S.innerHTML=E,m.textDiv=S,m.cellDiv=w,x.appendChild(S),DayPilot.Areas.attach(w,p,{areas:b.areas,allowed:function(){return!a.row}}),m.appendChild(w)}else m.colSpan=o>0?o:1,w.style.width=r+"px"}}},this.ak=function(){var t=this.row;return t.contextMenu&&t.contextMenu.show(d.ci(t)),!1},this.bk=function(t){if(!D.cancelClick){var e=this.row,i=d.ci(e,this.index);return e.isNewRow?void d.ii.edit(e):void d.fi(i,t.ctrlKey,t.shiftKey,t.metaKey)}},this.ck=function(t){if(d.timeouts.resClick){for(var e in d.timeouts.resClick)window.clearTimeout(d.timeouts.resClick[e]);d.timeouts.resClick=null}var i=this.row,n=d.ci(i,this.index);if(d.xa()){var a={};if(a.resource=n,a.row=n,a.ctrl=t.ctrlKey,a.shift=t.shiftKey,a.meta=t.metaKey,a.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof d.onRowDoubleClick&&(d.onRowDoubleClick(a),a.preventDefault.value))return;switch(d.rowDoubleClickHandling){case"PostBack":d.rowDoubleClickPostBack(n);break;case"CallBack":d.rowDoubleClickCallBack(n);break;case"Select":d.hi(i,t.ctrlKey,t.shiftKey,t.metaKey);break;case"Edit":d.ii.edit(i)}"function"==typeof d.onRowDoubleClicked&&d.onRowDoubleClicked(a)}else switch(d.rowDoubleClickHandling){case"PostBack":d.rowDoubleClickPostBack(n);break;case"CallBack":d.rowDoubleClickCallBack(n);break;case"JavaScript":d.onRowDoubleClick(n);break;case"Select":d.hi(i,t.ctrlKey,t.shiftKey,t.metaKey);break;case"Edit":d.ii.edit(i)}},this.rowDoubleClickPostBack=function(t,e){var i={};i.resource=t,this.G("RowDoubleClick",i,e)},this.rowDoubleClickCallBack=function(t,e){var i={};i.resource=t,this.I("RowDoubleClick",i,e)},this.ek=function(t){if("Disabled"!==d.timeHeaderClickHandling){var e={};e.start=this.cell.start,e.level=this.cell.level,e.end=this.cell.end,e.end||(e.end=new DayPilot.Date(e.start).addMinutes(d.cellDuration)),d.ji(e)}},this.ci=function(t){return new DayPilot.Row(t,d)},this.jh=function(t){var e=this.rowlist[t];if(e.events||e.resetEvents(),!e.data){e.data={},e.data.start=new DayPilot.Date(e.start),e.data.startTicks=e.data.start.getTime();var i=this.nh().getTime()-this.Fa().getTime();e.data.end=R.isResourcesView()?e.data.start.addTime(i):e.data.start.addDays(1),e.data.endTicks=e.data.end.getTime(),e.data.offset=e.start.getTime()-this.Fa().getTime(),e.data.i=t}},this.fk={},this.fa=function(t){if(t?this.events.list=t:this.events.list||(this.events.list=[]),null!=this.events.list&&!DayPilot.isArray(this.events.list))throw"DayPilot.Scheduler.events.list expects an array object";b.prepareRows(!0);var e,i=this.events.list,n=i.length,a="function"==typeof this.onBeforeEventRender,o="Resources"===d.viewType;d.fk={};for(var r=0;r<n;r++){var l=i[r];if(l){if("object"!=typeof l)throw new DayPilot.Exception("Event data item must be an object");if(!l.start)throw new DayPilot.Exception("Event data item must specify 'start' property");if(l instanceof DayPilot.Event)throw"DayPilot.Scheduler: DayPilot.Event object detected in events.list array. Use raw event data instead.";var s="string"==typeof l.id||"number"==typeof l.id,c="string"==typeof l.recurrentMasterId||"number"==typeof l.recurrentMasterId;if(!s)if(!(c="string"==typeof l.recurrentMasterId||"number"==typeof l.recurrentMasterId))throw new DayPilot.Exception("All events must have an id property (string or number)");if(!d.temp.allowDuplicateEventIds){var h="_"+l.id;if(!s&&c&&(h="#"+l.recurrentMasterId+"#"+new DayPilot.Date(l.start)),d.fk[h])throw new DayPilot.Exception("Duplicate event IDs are not allowed: "+h);d.fk[h]=!0}"Milestone"===l.type&&(l.end=l.start),a&&this.jd(r),"*"===l.resource?e=d.rowlist:o?e=DayPilot.list(b.rowcache[l.resource]).concat(b.rowcache["*"]):"Days"===d.viewType?e=d.rowlist:"Gantt"===d.viewType&&(e=b.rowcache[l.id]);for(var u=0;e&&u<e.length;u++){var v=e[u],f=this.Oi(l,v);f&&a&&(f.cache=this.u.events[r])}}}DayPilot.list(d.rowlist).each(function(t){d.Si(t)}),this.Dh()},this.gk={};var b=this.gk;b.rowCache={},b.prepareRows=function(t){b.rowcache={};for(var e=0;e<d.rowlist.length;e++){var i=d.rowlist[e];if(t&&i.resetEvents(),d.jh(e),i.id){var n=i.id.toString();b.rowcache[n]||(b.rowcache[n]=DayPilot.list()),b.rowcache[n].push(i)}}},b.loadEvent=function(t){},this.Ni=function(){var t={};if("Resources"!==d.viewType)return!1;for(var e=0;e<d.rowlist.length;e++){var i=d.rowlist[e].id;if(t[i])return!0;t[i]=!0}return!1},this.jd=function(t){var e=this.u.events,i=this.events.list[t],n={};i instanceof DayPilot.Event&&(i=i.data);for(var a in i)n[a]=i[a];if("function"==typeof this.onBeforeEventRender){var o={};o.e=n,o.data=n,this.onBeforeEventRender(o)}e[t]=n},this.Si=function(t){if(t.lines=[],t.sections=null,!t.isNewRow){if(this.sortDirections?t.events.sort(this.rd):d.eg||t.events.sort(this.qd),d.eg)return void k.loadRow(t);var e=d.groupConcurrentEvents;if(e)for(var i=0;i<t.blocks.length;i++)t.blocks[i].clear();DayPilot.list(t.events).each(function(e){if(!e.part.height)return t.eventHeight?void(e.part.height=t.eventHeight):void(e.part.height=R.eventHeight())});for(var n=0;n<t.events.length;n++){var a=t.events[n];t.putIntoLine(a),e&&t.putIntoBlock(a)}var o=0;for(i=0;i<t.lines.length;i++){(s=t.lines[i]).top=o,o+=(s.height||t.eventHeight)*t.eventStackingLineHeight/100}if(e)for(n=0;n<t.blocks.length;n++){var r=t.blocks[n];r.lines=[],r.events.sort(this.rd);for(var l=0;l<r.events.length;l++){a=r.events[l];r.putIntoLine(a)}r.lines.length<=d.groupConcurrentEventsLimit&&(r.expanded=!0),DayPilot.list(r.events).map(function(t){return t.id()}).some(function(t){return DayPilot.contains(d.hk,t)})&&(r.expanded=!0);for(o=0,i=0;i<r.lines.length;i++){var s;(s=r.lines[i]).top=o,o+=(s.height||t.eventHeight)*t.eventStackingLineHeight/100}}}},this.Ch=function(t){t=DayPilot.ua(t);for(var e=0;e<t.length;e++){var i=t[e];d.Si(d.rowlist[i])}if(d.eg)k.calculateEventPositions();else for(e=0;e<t.length;e++){i=t[e];var n=d.rowlist[i];d.xj(n)}},this.aj=function(){var t="Manual"===d.scale?d.itline[0].start:d.startDate;return DayPilot.list(d.rowlist).some(function(e){return!!e.start&&e.start.getTime()!==new DayPilot.Date(t).getTime()})},this.Oi=function(t,e){if(!e.hideEvents){var i=new DayPilot.Date(t.start),n=new DayPilot.Date(t.end);n=d.We(n);var a=i.ticks,o=n.ticks;if(o<a)return null;var r=null;if("function"==typeof d.onBeforeEventRender){var l=DayPilot.indexOf(d.events.list,t);r=d.u.events[l]}if(r){if(r.hidden)return null}else if(t.hidden)return null;var s=!1;switch(this.viewType){case"Days":s=!(o<=e.data.startTicks||a>=e.data.endTicks)||a===o&&a===e.data.startTicks;break;case"Resources":s=(e.id===t.resource||"*"===e.id||"*"===t.resource)&&(!(o<=e.data.startTicks||a>=e.data.endTicks)||a===o&&a===e.data.startTicks);break;case"Gantt":s=e.id===t.id&&!(o<=e.data.startTicks||a>=e.data.endTicks)}if(!s)return null;var c=new DayPilot.Event(t,d);c.part.dayIndex=e.data.i,c.part.start=e.data.startTicks<a?i:e.data.start,c.part.end=e.data.endTicks>o?n:e.data.end;var h=this.getPixels(c.part.start.addTime(-e.data.offset)),u=this.getPixels(c.part.end.addTime(-e.data.offset));c.part.start===c.part.end&&(u=this.getPixels(c.part.end.addTime(-e.data.offset).addMilliseconds(1))),r&&r.height?c.part.height=r.height:t.height&&(c.part.height=t.height),c.part.ik=function(){var t=this.height;if(d.eventVersionsEnabled&&!DayPilot.list(c.data.versions).isEmpty()){var e=c.versions.length;t+=e*d.eventVersionHeight,t+=e*d.eventVersionMargin}return t+d.eventMarginBottom};var v=h.left,f=u.left;if(c.part.startPixels=h,c.part.endPixels=u,v===f){if(h.cut||u.cut)return null;var p=(c.part.start.addTime(-e.data.offset).getTime()+c.part.end.addTime(-e.data.offset).getTime())/2;if(d.getPixels(new DayPilot.Date(Math.floor(p))).cut)return null}c.part.box=R.useBox(o-a);var g=d.eventHeight;if("Milestone"===t.type){var y=t.width||g;c.part.end=c.part.start,c.part.left=v-y/2,c.part.width=y,c.part.barLeft=0,c.part.barWidth=y}else if(c.part.box){var m=h.boxLeft,b=u.boxRight;c.part.left=m,c.part.width=b-m,c.part.barLeft=Math.max(v-c.part.left,0),c.part.barWidth=Math.max(f-v,1)}else c.part.left=v,c.part.width=Math.max(f-v,1),c.part.barLeft=0,c.part.barWidth=Math.max(f-v-1,1);var w=d.eventMinWidth;if(c.part.width=Math.max(c.part.width,w),d.eventVersionsEnabled&&d.jk(c,e),"function"==typeof d.onEventFilter&&d.events.pd){var D={};if(D.filter=d.events.pd,D.visible=!0,D.e=c,d.onEventFilter(D),!D.visible)return null}return e.events.push(c),c}},this.jk=function(t,e){t.versions=[];var i=t.data,n=DayPilot.list(i.versions);n.isEmpty()||n.each(function(i){var n=new DayPilot.Date(i.start),a=new DayPilot.Date(i.end),o=d.getPixels(n.addTime(-e.data.offset)),r=d.getPixels(a.addTime(-e.data.offset));n.ticks===a.ticks&&(r=d.getPixels(a.addTime(-e.data.offset).addTime(1)));var l=o.left,s=r.left;if(l===s&&(o.cut||r.cut))return null;var c={};c.left=l,c.continueLeft=n<e.data.start,c.right=s,c.continueRight=a>e.data.end,c.width=s-l,t.versions.push(c)})},this.qd=function(t,e){if(!(t&&e&&t.start&&e.start))return 0;var i=t.start().ticks-e.start().ticks;return 0!==i?i:e.end().ticks-t.end().ticks},this.rd=function(t,e){if(!t||!e)return 0;if(!(t.data&&e.data&&t.data.sort&&e.data.sort&&0!==t.data.sort.length&&0!==e.data.sort.length))return d.qd(t,e);for(var i=0,n=0;0===i&&void 0!==t.data.sort[n]&&void 0!==e.data.sort[n];)i=t.data.sort[n]===e.data.sort[n]?0:"number"==typeof t.data.sort[n]&&"number"==typeof e.data.sort[n]?t.data.sort[n]-e.data.sort[n]:d.sd(t.data.sort[n],e.data.sort[n],d.sortDirections[n]),n++;return i},this.sd=function(t,e,i){var n="desc"!==i?-1:1,a=-n;if(null===t&&null===e)return 0;if(null===e)return a;if(null===t)return n;var o=[];return o[0]=t,o[1]=e,o.sort(),t===o[0]?n:a},this.hi=function(t,e,i,n){if(d.xa()){var a=DayPilot.indexOf(d.rowlist,t),o=d.ci(t,a),r=(u=-1!==DayPilot.indexOf(D.selected,t))?"deselected":"selected",l={};if(l.row=o,l.selected=u,l.ctrl=e,l.shift=i,l.meta=n,l.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof d.onRowSelect&&(d.onRowSelect(l),l.preventDefault.value))return;var s=i&&!e&&!n;if(i||(D.kk={row:t,index:a}),s){D.fixRowSelectLast();var c=D.kk.index,h=a;D.selectRange(c,h)}switch(d.rowSelectHandling){case"PostBack":d.rowSelectPostBack(o,r);break;case"CallBack":d.rowSelectCallBack(o,r);break;case"Notify":!s&&D.select(t,e,i,n),d.rowSelectNotify(o,r);break;case"Update":!s&&D.select(t,e,i,n)}"function"==typeof d.onRowSelected&&(l.selected=-1!==DayPilot.indexOf(D.selected,t),d.onRowSelected(l))}else{D.select(t,e,i);var u;a=DayPilot.indexOf(d.rowlist,t),o=d.ci(t,a),r=(u=-1!==DayPilot.indexOf(D.selected,t))?"deselected":"selected";switch(d.rowSelectHandling){case"PostBack":d.rowSelectPostBack(o,r);break;case"CallBack":d.rowSelectCallBack(o,r);break;case"Notify":d.rowSelectNotify(o,r);break;case"JavaScript":d.onRowSelect(o,r)}}},this.rowSelectPostBack=function(t,e,i){var n={};n.resource=t,n.change=e,this.G("RowSelect",n,i)},this.rowSelectCallBack=function(t,e,i){var n={};n.resource=t,n.change=e,this.I("RowSelect",n,i)},this.rowSelectNotify=function(t,e,i){var n={};n.resource=t,n.change=e,this.I("RowSelect",n,i,"Notify")},this.rows={},this.rows.selection={};var w=this.rows.selection;w.get=function(){var t=[];return DayPilot.list(D.selected).each(function(e){t.push(d.ci(e))}),t},w.clear=function(){D.clearSelection()},w.add=function(t){if(!t||!t.isRow)throw"DayPilot.Scheduler.rows.selection.add(): DayPilot.Row object expected";DayPilot.list(D.selected).some(function(e){return e===t.$.row})||D.selected.push(t.$.row),D.lk(),w.mk()},w.remove=function(t){if(!t||!t.isRow)throw"DayPilot.Scheduler.rows.selection.remove(): DayPilot.Row object expected";w.isSelected(t)&&(D.unselect(t.$.row),DayPilot.rfa(D.selected,t.$.row)),w.mk()},w.isSelected=function(t){if(!t||!t.isRow)throw"DayPilot.Scheduler.rows.selection.isSelected(): DayPilot.Row object expected";return-1!==DayPilot.indexOf(D.selected,t.$.row)},w.mk=function(){d.selectedRows=DayPilot.list(D.selected).map(function(t){return t.id})},this.rows.all=function(){for(var t=[],e=0;e<d.rowlist.length;e++){var i=d.ci(d.rowlist[e]);t.push(i)}return f(t)},this.rows.visible=function(){for(var t=[],e=0;e<d.rowlist.length;e++){if(!(i=d.rowlist[e]).hidden){var i=d.ci(d.rowlist[e]);t.push(i)}}return f(t)},this.rows.each=function(t){d.rows.all().each(t)},this.rows.filter=function(t,e){d.rows.pd=t,e||d.B&&d.Vb({immediateEvents:!0})},this.rows.find=function(t,e){var i,n=DayPilot.list(b.rowcache[t]);return(i="string"==typeof e?n.find(function(t){return e===t.start.toString()}):n.first())?new DayPilot.Row(i,d):null},this.rows.load=function(t,e,i){if(!t)throw new DayPilot.Exception("rows.load(): 'url' parameter required");var n=function(t){var e={};e.exception=t.exception,e.request=t.request,"function"==typeof i&&i(e)},a=function(t){var i,a=t.request;try{i=JSON.parse(a.responseText)}catch(t){var o={};return o.exception=t,void n(o)}if(DayPilot.isArray(i)){var r={};if(r.preventDefault=function(){this.preventDefault.value=!0},r.data=i,"function"==typeof e&&e(r),r.preventDefault.value)return;d.resources=i,d.B&&d.update()}};d.rowsLoadMethod&&"POST"===d.rowsLoadMethod.toUpperCase()?DayPilot.ajax({method:"POST",url:t,success:a,error:n}):DayPilot.ajax({method:"GET",url:t,success:a,error:n})},this.rows.expand=function(t){for(var e=[],i=t||1,n=0;n<d.rowlist.length;n++){var a=d.rowlist[n],o=-1===i;a.level<i&&(o=!0),o&&!a.expanded&&a.children&&a.children.length>0&&e.push(a.index)}if(0!==e.length)if(1===e.length)d.oj(e[0]);else{for(n=0;n<e.length;n++){var r=e[n];d.rowlist[r].resource.expanded=!0}d.Vb()}},this.rows.expandAll=function(){d.rows.expand(-1)},this.rows.collapseAll=function(){d.rowlist.each(function(t){t.resource.expanded=!1}),d.Vb()},this.rows.headerHide=function(){d.nk=!0,d.ok(),d.Tj(),d.dh()},this.rows.headerShow=function(){d.nk=!1,d.ok(),d.Tj(),d.dh()},this.rows.headerToggle=function(){d.nk?d.rows.headerShow():d.rows.headerHide()},this.rows.edit=function(t){D.edit(t.$.row)},this.rows.remove=function(t){var e=t.$.row.resource,i=P.findParentArray(e);if(!i)throw"Cannot find source node parent";var n=DayPilot.indexOf(i,e);i.splice(n,1),d.update()},this.rows.update=function(t){if(!(t instanceof DayPilot.Row))throw new DayPilot.Exception("DayPilot.Scheduler.rows.update() expects a DayPilot.Row object.");var e=t.index,i=d.rowlist[e],n=t.data,a=t.parent()?t.parent().$.row:null,o=d.pk(n);(t=d.qk(o,a)).hidden=i.hidden,t.level=i.level,t.children=i.children,t.index=e,t.top=i.top,t.height=i.height,d.rowlist[e]=t,t.resetEvents(),d.jh(e),d.rk(t),d.Si(t),d.Qh(e),d.vg(),d.yg()},this.rk=function(t){for(var e=d.events.list,i=e.length,n="function"==typeof d.onBeforeEventRender,a=0;a<i;a++){var o=e[a];if(o){if(o instanceof DayPilot.Event)throw new DayPilot.Exception("DayPilot.Scheduler: DayPilot.Event object detected in events.list array. Use raw event data instead.");if("Days"===d.viewType)throw new DayPilot.Exception(".rows.update() not supported for viewType = 'Days'.");if("Gantt"===d.viewType)throw new DayPilot.Exception(".rows.update() not supported for viewType = 'Gantt'.");if("*"===o.resource||"*"===t.id||o.resource===t.id){n&&this.jd(a);var r=this.Oi(o,t);r&&n&&(r.cache=this.u.events[a])}}}},this.sk=function(){var t=a.source,e=a.target,i=a.position,n=a.sourceCalendar;if(D.resetMoving(),d.xa()){var o={};if(o.source=d.ci(t),o.source.calendar=n,o.target=d.ci(e),o.position=i,o.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof d.onRowMove&&(d.onRowMove(o),o.preventDefault.value))return;switch(d.rowMoveHandling){case"Update":D.move(o);break;case"CallBack":d.rowMoveCallBack(o.source,o.target,o.position);break;case"PostBack":d.rowMovePostBack(o.source,o.target,o.position);break;case"Notify":D.move(o),d.rowMoveNotify(o.source,o.target,o.position)}"function"==typeof d.onRowMoved&&d.onRowMoved(o)}else{t=d.ci(t),e=d.ci(e),i=i;switch(d.rowMoveHandling){case"CallBack":d.rowMoveCallBack(t,e,i);break;case"PostBack":d.rowMovePostBack(t,e,i);break;case"JavaScript":d.onRowMove(t,e,i)}}},this.Dg=function(t){var e=DayPilot.list(t);D.selected=[],e.isEmpty()||(d.cg=!1,d.ea()),e.each(function(t){var e=d.Mg(t);e&&D.selected.push(e)}),D.lk()},this.ii={};var D=this.ii;D.edit=function(t){D.tk(t)},D.rowSelectLastSetDefault=function(){D.kk={row:d.rowlist[0],index:0}},D.rowSelectSetLast=function(t){var e=DayPilot.indexOf(d.rowlist,t);if(-1===e)throw"DayPilot.Scheduler: Row not found when selecting a range";D.kk={row:t,index:e}},D.fixRowSelectLast=function(){D.kk||D.rowSelectLastSetDefault();var t=DayPilot.indexOf(d.rowlist,D.kk.row);if(!(t>-1)){var e=d.Mg(D.kk.row.id);e?(t=DayPilot.indexOf(d.rowlist,e),D.kk={row:e,index:t}):D.rowSelectLastSetDefault()}},D.createOverlay=function(t){var e=d.Oj(),i=d.q("_rowmove_source"),n=DayPilot.Util.div(d.divHeader,0,t.top,e,t.height);n.className=i,t.moveOverlay=n},D.deleteOverlay=function(t){t&&(DayPilot.de(t.moveOverlay),t.moveOverlay=null)},D.tk=function(t){var e=D.uk(t).cells[0];if(e.input)return e.input;DayPilot.Areas.disable(e.firstChild);var i=e.clientWidth;t.isNewRow&&(i=d.$g());var n=document.createElement("textarea");n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.width=i+"px",n.style.height=t.height+"px",n.style.border="0px none",n.style.overflow="hidden",n.style.boxSizing="border-box",n.style.resize="none",n.style.paddingLeft=t.level*d.treeIndent+"px";var a=e.textDiv;n.style.fontFamily=DayPilot.gs(a,"fontFamily")||DayPilot.gs(a,"font-family"),n.style.fontSize=DayPilot.gs(a,"fontSize")||DayPilot.gs(a,"font-size"),n.value=t.name||"",e.firstChild.appendChild(n),e.input=n;var o=function(){try{e.input.parentNode.removeChild(e.input)}catch(t){}e.input=null};return n.focus(),n.onblur=function(){n.onblur=null;var i=n.value;o(),DayPilot.Areas.enable(e.firstChild),d.ei(t,i,n.canceled)},n.onkeydown=function(t){var e=window.event?event.keyCode:t.keyCode;return 27===e&&(n.canceled=!0,o()),13!==e||(n.onblur(),!1)},n.setSelectionRange?n.setSelectionRange(0,9999):n.select(),n},D.selected=[],D.select=function(t,e,i,n){var a=-1!==DayPilot.indexOf(D.selected,t);if(e||n){if(a)return D.unselect(t),void DayPilot.rfa(D.selected,t)}else a=!1,D.clearSelection();D.vk(t),a||D.selected.push(t),w.mk()},D.selectRange=function(t,e){D.clearSelection();for(var i=Math.min(t,e),n=Math.max(t,e),a=i;a<=n;a++){var o=d.rowlist[a];D.vk(o),D.selected.push(o)}w.mk()},D.lk=function(){for(var t=0;t<D.selected.length;t++){var e=D.selected[t];D.vk(e)}},D.vk=function(t){if(-1===(r=DayPilot.indexOf(d.rowlist,t))){var e=d.Mg(t.id);if(!e)return;r=e.index}for(var i=d.q("_cell_selected"),n=[],a=0;a<d.itline.length;a++){(c={}).x=a,c.y=r,n.push(c)}d.cells.findXy(n).addClass(i);i=d.q("_rowheader_selected");for(var o=d.divHeader,r=0;r<o.rows.length;r++){var l=o.rows[r];if(l&&l.cells[0]&&l.cells[0].row===t)for(var s=0;s<l.cells.length;s++){var c,h=(c=l.cells[s]).firstChild;DayPilot.Util.addClass(h,i)}}},D.oi=function(){var t=[];if(!D.selected)return t;for(var e=0;e<D.selected.length;e++){var i=D.selected[e],n=DayPilot.indexOf(d.rowlist,i),a=d.ci(i,n);t.push(a.toJSON())}return t},D.unselect=function(t){for(var e=d.q("_cell_selected"),i=DayPilot.indexOf(d.rowlist,t),n=[],a=0;a<d.itline.length;a++){(l={}).x=a,l.y=i,n.push(l)}d.cells.findXy(n).removeClass(e);e=d.q("_rowheader_selected");var o=(d.divHeader,D.uk(t));if(o)for(var r=0;r<o.cells.length;r++){var l,s=(l=o.cells[r]).firstChild;DayPilot.Util.removeClass(s,e)}},D.kk=null,D.clearSelection=function(){for(var t=0;t<D.selected.length;t++){var e=D.selected[t];D.unselect(e)}D.selected=[],d.selectedRows=[]},D.uk=function(t){for(var e=d.divHeader,i=0;i<e.rows.length;i++){var n=e.rows[i];if(n&&n.cells[0]&&n.cells[0].row===t)return n}return null},D.selectById=function(t){var e=d.Mg(t);e&&D.select(e)},D.startMoving=function(t){var e=DayPilot.Global.rowmoving;e.row=t,e.sourceCalendar=d,e.cursor=d.divResScroll.style.cursor,d.divResScroll.style.cursor="move",D.createOverlay(t)},D.resetMoving=function(){d.divResScroll.style.cursor=a.cursor,DayPilot.de(a.div),D.deleteOverlay(a.row),DayPilot.Global.rowmoving=a={}},D.move=function(t){var e=t.source.$.row.resource,i=t.target.$.row.resource,n=t.position;if("forbidden"!==n){var a=t.source.calendar.wk.findParentArray(e);if(!a)throw"Cannot find source node parent";var o=DayPilot.indexOf(a,e);a.splice(o,1);var r=P.findParentArray(i);if(!r)throw"Cannot find target node parent";var l=DayPilot.indexOf(r,i);switch(n){case"before":r.splice(l,0,e);break;case"after":r.splice(l+1,0,e);break;case"child":i.children||(i.children=[],i.expanded=!0),i.children.push(e)}d.update()}};var P={};this.wk=P,P.findParentArray=function(t){return P.findInArray(d.resources,t)},P.findInArray=function(t,e){if(-1!==DayPilot.indexOf(t,e))return t;for(var i=0;i<t.length;i++){var n=t[i];if(n.children&&n.children.length>0){var a=P.findInArray(n.children,e);if(a)return a}}return null},this.pg=function(){this.rowlist=DayPilot.list();var t=this.resources,e=this.s();e||("Gantt"===this.viewType?t=this.xk():"Days"===this.viewType&&(t=this.yk())),!e||"Days"!==this.viewType||t&&0!==t.length||(t=this.yk());var i={};if(i.i=0,null!=t&&!DayPilot.isArray(t))throw"DayPilot.Scheduler.resources expects an array object";this.zk(t,i,0,null,this.treeEnabled,!1),"Disabled"!==d.rowCreateHandling&&this.Ak()},this.Ak=function(){var t={id:"NEW",isNewRow:!0,html:""};t.index=d.rowlist.length,t.loaded=!0,t.start=this.startDate,t.children=[],t.height=d.eventHeight,t.marginBottom=0,t.marginTop=0,t.getHeight=function(){return d.rowCreateHeight?d.rowCreateHeight:d.eventHeight+d.rowMarginBottom+d.rowMarginTop},t.putIntoLine=function(){},t.resetEvents=function(){},this.rowlist.push(t)},this.xk=function(){var t=[];if(this.jg&&this.resources)for(var e=0;e<this.resources.length;e++)t.push(this.resources[e]);if(this.events.list){for(e=0;e<this.events.list.length;e++){var i=this.events.list[e],n={};n.id=i.id,n.name=i.text,n.columns=i.columns,t.push(n)}return t}},this.yk=function(){for(var t=[],e=d.Fa(),i=this.Ic.locale(),n=0;n<this.days;n++){var a=e.addDays(n);if(d.showNonBusiness||d.businessWeekends||0!=a.dayOfWeek()&&6!=a.dayOfWeek()){var o={};o.name=a.toString(i.datePattern,i),o.start=a,t.push(o)}}return t},this.Fa=function(){return this.itline&&this.itline.length>0?this.itline[0].start:this.startDate},this.nh=function(){if(this.itline&&this.itline.length>0){var t=d.itline[this.itline.length-1].end;return"Days"!==d.viewType?t:t.addDays(d.days-1)}return d.startDate.addDays(d.days)},this.visibleStart=function(){return this.Fa()},this.visibleEnd=function(){return this.nh()},this.qk=function(t,e){var i={};if(i.backColor=t.backColor,i.fontColor=t.fontColor,i.cssClass=t.cssClass,i.expanded=t.expanded,i.name=t.name,i.html=t.html?t.html:i.name,i.eventHeight=void 0!==t.eventHeight?t.eventHeight:d.Ic.eventHeight(),i.minHeight=void 0!==t.minHeight?t.minHeight:d.rowMinHeight,i.marginBottom=void 0!==t.marginBottom?t.marginBottom:d.rowMarginBottom,i.marginTop=void 0!==t.marginTop?t.marginTop:d.rowMarginTop,i.eventStackingLineHeight=void 0!==t.eventStackingLineHeight?t.eventStackingLineHeight:d.eventStackingLineHeight,i.loaded=!t.dynamicChildren,i.id=t.id||t.value,i.toolTip=t.toolTip,i.children=[],i.columns=[],i.start=t.start?new DayPilot.Date(t.start):this.Fa(),i.isParent=t.isParent,i.contextMenu=t.contextMenu?DayPilot.Util.evalVariable(t.contextMenu):this.contextMenuResource,i.areas=t.areas,i.moveDisabled=t.moveDisabled,i.bubbleHtml=t.bubbleHtml,i.cellsDisabled=t.cellsDisabled,i.tags=t.tags,i.task=t.task,i.swimlane=t.swimlane,i.hideEvents=t.hideEvents,i.height=i.eventHeight,i.resource=t.Bk,i.lines=[],i.blocks=[],i.isRow=!0,i.getHeight=function(){var t=0;if(d.groupConcurrentEvents)for(var e=0;e<this.blocks.length;e++){var i=this.blocks[e];t=Math.max(t,i.getHeight())}else if(this.lines.length>0){var n=this.lines.length-1,a=this.lines[n],o=a.height||this.eventHeight;t=(a.top||0)+o}return 0===t&&(t=this.eventHeight),t>this.minHeight?t:this.minHeight},i.resetEvents=function(){var t=this;t.events=DayPilot.list(),t.events.forRange=function(e,i){e=new DayPilot.Date(e),i=new DayPilot.Date(i);for(var n=DayPilot.list(),a=0;a<t.events.length;a++){var o=t.events[a];DayPilot.Util.overlaps(o.start(),o.end(),e,i)&&n.push(o)}return n}},i.calculateUtilization=function(){for(var t=this,e=t.sections=function(){for(var e=function(){for(var e=[],i=0;i<t.events.length;i++){var n=t.events[i];DayPilot.contains(e,n.start().toString())||e.push(n.start().toString()),DayPilot.contains(e,n.rawend().toString())||e.push(n.rawend().toString())}return e.sort(),e}(),i=[],n={start:t.data.start},a=0;a<e.length;a++)n.end=new DayPilot.Date(e[a]),i.push(n),n={start:new DayPilot.Date(e[a])};return n.end=t.data.end,i.push(n),i.forRange=function(t,e){for(var i=DayPilot.list(),n=0;n<this.length;n++){var a=this[n];DayPilot.Util.overlaps(t,e,a.start,a.end)&&i.push(a)}return i.maxSum=function(t){for(var e=0,i=0;i<this.length;i++){var n=this[i].sum(t);n>e&&(e=n)}return e},i},i}(),i=0;i<e.length;i++){var n=e[i];n.events=DayPilot.list();for(var a=0;a<t.events.length;a++){var o=t.events[a];DayPilot.Util.overlaps(n.start,n.end,o.start(),o.rawend())&&n.events.push(o)}n.sum=function(t){for(var e=0,i=0;i<this.events.length;i++){var n=this.events[i],a=0;void 0===t?a=1:n.tag(t)?a=n.tag(t):n.data[t]&&(a=n.data[t]),"number"==typeof a&&(e+=a)}return e}}},i.putIntoLine=function(t){for(var e=0;e<this.lines.length;e++){if((i=this.lines[e]).isFree(t.part.left,t.part.width))return i.add(t),e}var i;return(i=[]).height=0,i.add=function(t){this.push(t);var e=t.part.ik();e>i.height&&(i.height=e)},i.isFree=function(t,e,i){for(var n=t+e-1,a=this.length,o=0;o<a;o++){var r=this[o];if(!(n<r.part.left||t>r.part.left+r.part.width-1)){if(DayPilot.contains(i,r.data))continue;return!1}}return!0},i.add(t),this.lines.push(i),this.lines.length-1},i.putIntoBlock=function(t){for(var e=0;e<this.blocks.length;e++){var i=this.blocks[e];if(-1!==DayPilot.indexOf(i.events,t))return;if(i.overlapsWith(t.part.left,t.part.width))return i.events.push(t),t.part.block=i,i.min=Math.min(i.min,t.part.left),i.max=Math.max(i.max,t.part.left+t.part.width),e}(i={expanded:!1}).row=this,i.events=DayPilot.list(),i.lines=DayPilot.list(),i.putIntoLine=function(t){for(var e=0;e<this.lines.length;e++){if((i=this.lines[e]).isFree(t.part.left,t.part.width))return i.add(t),e}var i;(i=[]).height=0,i.add=function(t){this.push(t),t.part.height>i.height&&(i.height=t.part.height)},i.isFree=function(t,e){for(var i=t+e-1,n=this.length,a=0;a<n;a++){var o=this[a];if(!(i<o.part.left||t>o.part.left+o.part.width-1))return!1}return!0},i.add(t),this.lines.push(i)},i.overlapsWith=function(t,e){return!(t+e-1<this.min||t>this.max-1)},i.getHeight=function(){if(!this.expanded)return d.eventHeight;if(this.lines.length>0){var t=this.lines.length-1,e=this.lines[t],i=e.height||d.eventHeight;return(e.top||0)+i}return d.eventHeight},i.clear=function(){i.events=DayPilot.list(),i.min=null,i.max=null},i.events.push(t),t.part.block=i,i.min=t.part.left,i.max=t.part.left+t.part.width,this.blocks.push(i)},i.Ck=!1,i.Dk=e,i._b=function(){this.hidden=!this.Ek(),this.Ck=!1,this.Dk&&this.Dk._b()},i.Ek=function(){return!this.Dk||this.Dk.Ek()&&this.Dk.expanded},t.columns)for(var n=0;n<t.columns.length;n++)i.columns.push(t.columns[n]);return i},this.Mh=function(){d.rowlist.each(function(t){if("function"==typeof d.onRowFilter&&d.rows.pd){var e=t.Dk,i={visible:!0};i.row=d.ci(t),i.filter=d.rows.pd,d.onRowFilter(i),t.Ck=!i.visible,i.visible?e&&e._b():t.hidden=!0}})},this.zk=function(t,e,i,n,a,o){if(t)for(var r=0;r<t.length;r++)if(t[r]){var l={};if(l.level=i,l.hidden=o,l.index=e.i,!t[r].hidden){var s=this.pk(t[r],l),c=d.qk(s,n);if(o&&(c.hidden=!0),c.level=i,c.index=e.i,null!==n&&n.children.push(e.i),this.rowlist.push(c),e.i++,a&&s.children&&s.children.length){var h=o||!c.expanded;this.zk(s.children,e,i+1,c,!0,h)}}}},this.Fk=["text","html","backColor","cssClass","areas","horizontalAlignment"],this.zj=function(t){if(t.isNewRow)return{row:{cssClass:d.q("_row_new"),moveDisabled:!0,html:d.rowCreateHtml||""}};var e={};if(e.row=this.ci(t),DayPilot.Util.copyProps(t,e.row,["html","backColor","fontColor","cssClass","toolTip","contextMenu","moveDisabled"]),e.row.columns=DayPilot.Util.createArrayCopy(t.columns,d.Fk),e.row.areas=DayPilot.Util.createArrayCopy(t.areas),void 0===e.row.columns&&d.rowHeaderColumns&&d.rowHeaderColumns.length>0){r.columns=[];for(var i=0;i<d.rowHeaderColumns.length;i++)r.columns.push({})}return"function"==typeof this.onBeforeRowHeaderRender&&this.onBeforeRowHeaderRender(e),e},this.pk=function(t,e){var i=this.Gk(t,e);if("function"==typeof this.onBeforeResHeaderRender){var n={};n.resource=i,this.onBeforeResHeaderRender(n)}return i},this.Gk=function(t,e){var i={get data(){return this.Bk}};for(var n in e)i[n]=e[n];for(var n in t)i[n]=t[n];if(void 0===t.html&&(i.html=t.name),void 0===i.columns&&d.rowHeaderColumns&&d.rowHeaderColumns.length>0){i.columns=[];for(var a=0;a<d.rowHeaderColumns.length;a++)i.columns.push({})}return i.Bk=t,i},this.Hk=function(){this.Hd(),this.nav.top.dp=this,this.nav.top.innerHTML="",DayPilot.Util.addClass(this.nav.top,this.q("_main")),this.nav.top.setAttribute("role","region"),this.nav.top.setAttribute("aria-label","scheduler"),DayPilot.browser.ie9&&DayPilot.Util.addClass(this.nav.top,this.q("_browser_ie9")),DayPilot.browser.ie8&&DayPilot.Util.addClass(this.nav.top,this.q("_browser_ie8")),this.nav.top.style.MozUserSelect="none",this.nav.top.style.KhtmlUserSelect="none",this.nav.top.style.webkitUserSelect="none",this.nav.top.style.WebkitTapHighlightColor="rgba(0,0,0,0)",this.nav.top.style.WebkitTouchCallout="none",this.width&&(this.nav.top.style.width=this.width),"Parent100Pct"===this.heightSpec&&(this.nav.top.style.height="100%"),this.nav.top.style.lineHeight="1.2",this.nav.top.style.position="relative",this.visible||(this.nav.top.style.display="none"),this.nav.top.onmousemove=this.Yf,this.nav.top.onmouseout=function(){d.qj()},this.nav.top.ontouchstart=S.onMainTouchStart,this.nav.top.ontouchmove=S.onMainTouchMove,this.nav.top.ontouchend=S.onMainTouchEnd,this.hideUntilInit&&this.backendUrl&&(this.nav.top.style.visibility="hidden");var t=this.$g();if("DivBased"===this.Ic.layout()){var e=document.createElement("div");e.style.position="absolute",e.style.left="0px",e.style.width=t+"px",e.appendChild(this.Kc());var i=document.createElement("div");i.style.height="1px",i.className=this.q("_divider_horizontal"),e.appendChild(i),this.nav.dh1=i,e.appendChild(this.Ik()),this.nav.left=e;var n=document.createElement("div");n.style.position="absolute",n.style.left=t+"px",n.style.width=R.splitterWidth()+"px",n.style.height=this.Zg()+this.lc()+"px",n.className=this.q("_divider")+" "+this.q("_splitter"),n.setAttribute("unselectable","on"),this.nav.divider=n,this.rowHeaderScrolling&&this.Jk();var a=document.createElement("div");a.style.marginLeft=t+R.splitterWidth()+"px",a.style.marginRight="1px",a.style.position="relative",a.appendChild(this.Kk()),this.nav.right=a;var o=document.createElement("div");o.style.height="1px",o.style.position="absolute",o.style.top=this.Zg()+"px",o.style.width="100%",o.className=this.q("_divider_horizontal"),a.appendChild(o),this.nav.dh2=o,a.appendChild(this.Lk());var r=document.createElement("div");r.style.clear="left",this.nav.top.appendChild(e),this.nav.top.appendChild(n),this.nav.top.appendChild(a),this.nav.top.appendChild(r)}else{var l=document.createElement("table");l.cellPadding=0,l.cellSpacing=0,l.border=0,l.style.position="absolute";var s=l.insertRow(-1);s.insertCell(-1).appendChild(this.Kc()),s.insertCell(-1).appendChild(this.Kk());var c=l.insertRow(-1);c.insertCell(-1).appendChild(this.Ik()),c.insertCell(-1).appendChild(this.Lk()),this.nav.top.appendChild(l)}if(this.Qe=document.createElement("div"),this.Qe.style.display="none",this.nav.top.appendChild(this.Qe),this.N()){var h=document.createElement("input");h.type="hidden",h.id=this.id+"_state",h.name=this.id+"_state",this.nav.state=h,this.nav.top.appendChild(h)}var u=document.createElement("div");u.style.position="absolute",u.style.left=this.$g()+R.splitterWidth()+5+"px",u.style.top=this.Zg()+5+"px",u.style.display="none",u.innerHTML=this.loadingLabelText,DayPilot.Util.addClass(u,this.q("_loading")),this.nav.loading=u,this.nav.top.appendChild(u),this.Mk()},this.Yf=function(t){if(a.row){var e=DayPilot.mo3(d.divHeader,t),i=d.wi(e.y),o=d.rowlist[i.i];if(!o)return;if(o.isNewRow)return;var r=e.y-i.top,l=i.bottom-i.top,s=l/3,c=2*s,h=l/2,u="before",v=o.children&&o.children.length>0,f=function(){for(var t=i.i,e=o.level;t>=0;){var n=d.rowlist[t];if(t--,!(e<=n.level)){if(n===a.row)return!0;if(0===n.level)return!1;e=n.level}}return!1}(),p=d.treeEnabled;if(u=f||i.i===a.row.index?"forbidden":p?v?r<h?"before":"child":r<s?"before":r<c?"child":"after":v?"before":r<h?"before":"after",a.row.moveDisabled&&(u="forbidden"),a.calendar=d,a.source=a.row,a.target=d.rowlist[i.i],a.position=u,a.last&&a.last.target===a.target&&a.last.position===a.position)a.last&&(a.position=a.last.position);else if("function"==typeof d.onRowMoving){var g={};g.source=d.ci(a.source),g.target=d.ci(a.target),g.position=u,d.onRowMoving(g),a.position=g.position}a.last={},a.last.target=a.target,a.last.position=a.position,function(){a.div&&DayPilot.de(a.div);var t=i.top,e=a.position,n=d.rowlist[i.i].level*d.treeIndent;switch(e){case"before":t=i.top;break;case"child":t=i.top+h;break;case"after":t=i.bottom;break;case"forbidden":t=i.top+h}var o=d.Oj()-n,r=document.createElement("div");r.style.position="absolute",r.style.left=n+"px",r.style.width=o+"px",r.style.top=t+"px",r.className=d.q("_rowmove_position_"+e),a.div=r,d.divResScroll.appendChild(r)}()}else if(n.splitting){var y=DayPilot.mo3(d.nav.top,t).x,m=d.Oj(),b=y-1;d.rowHeaderCols&&(b=Math.min(m,y-1)),d.rowHeaderWidth=b,d.nk=!1,d.rowHeaderCols||d.Nk(),d.ok()}},this.ga=function(){var t=this.Zg();this.nav.corner.style.height=t+"px",this.divTimeScroll.style.height=t+"px",this.divNorth.style.height=t+"px",this.nav.dh1&&this.nav.dh2&&(this.nav.dh1.style.top=t+"px",this.nav.dh2.style.top=t+"px"),this.nav.loading.style.top=t+5+"px",this.nav.scroll.style.top=t+1+"px"},this.$g=function(){if(this.nk)return 0;return this.rowHeaderScrolling?this.rowHeaderWidth:this.Oj()},this.Jk=function(){var t=this.nav.divider;t.style.cursor="col-resize",t.setAttribute("unselectable","on"),t.onmousedown=function(t){var e=n.splitting={};return e.cursor=d.nav.top.style.cursor,e.cleanup=function(){if(d.nav.top.style.cursor=e.cursor,"function"==typeof d.onRowHeaderResized){d.onRowHeaderResized({})}},d.nav.top.style.cursor="col-resize",!1}},this.ok=function(){var t=R.splitterWidth(),e=this.$g();if(this.nav.corner.style.width=e+"px",this.divCorner.style.width=e+"px",this.divResScroll.style.width=e+"px","DivBased"===R.layout()&&(this.nav.left.style.width=e+"px",this.nav.divider.style.left=e-t+"px",this.nav.right.style.marginLeft=e+"px"),this.nav.message&&(this.nav.message.style.left=e+t+"px"),this.nav.loading&&(this.nav.loading.style.left=e+t+5+"px"),this.nav.hideIcon){var i=this.nav.hideIcon,n=d.q("_header_icon_show"),a=d.q("_header_icon_hide");i.style.left=e-1+"px",d.nk?(DayPilot.Util.removeClass(i,a),DayPilot.Util.addClass(i,n)):(DayPilot.Util.removeClass(i,n),DayPilot.Util.addClass(i,a))}},this.Nk=function(){this.Pj();var t=this.Oj(),e=function(t,e,i){if(t&&t.style){var n=t.firstChild;d.Uj?(t.style.width=e+"px",n.style.width=e+"px","number"==typeof i&&(t.style.left=i+"px")):n.style.width=e+"px"}},i=this.divHeader;i.style.width=t+"px";for(var n=d.Qj(),a=n.start;a<n.end;a++){var o=i.rows[a];if(o)if(o.cells[0].colSpan>1)e(o.cells[0],t);else if(this.rowHeaderCols)for(var r=0,l=0;l<o.cells.length;l++){var s=this.rowHeaderCols[l];e(o.cells[l],s,r),r+=s}else{s=this.rowHeaderWidth;e(o.cells[0],s)}}d.nav.resScrollSpace&&(d.nav.resScrollSpace.style.width=t+"px"),this.W()},this.Ih=function(){this.ok(),this.Nk()},this.Ok=function(){var t=d.nav.corner,e=this.rowHeaderColumns,i=document.createElement("div");i.style.position="absolute",i.style.bottom="0px",i.style.left="0px",i.style.width="100%",i.style.height=R.headerHeight()+"px",i.style.overflow="hidden",d.nav.columnScroll=i;var n=document.createElement("div");n.style.position="absolute",n.style.bottom="0px",n.style.left="0px",n.style.width="5000px",n.style.height=R.headerHeight()+"px",n.style.overflow="hidden",n.className=this.q("_columnheader"),i.appendChild(n);var a=document.createElement("div");a.style.position="absolute",a.style.top="0px",a.style.bottom="0px",a.style.left="0px",a.style.right="0px",a.className=this.q("_columnheader_inner"),n.appendChild(a),d.Bi&&(d.Bi.dispose(),d.Bi=null);var o=new DayPilot.Splitter(a);o.widths=DayPilot.Util.propArray(e,"width",d.rowHeaderColumnDefaultWidth),o.height=R.headerHeight(),o.css.title=this.q("_columnheader_cell"),o.css.titleInner=this.q("_columnheader_cell_inner"),o.css.splitter=this.q("_columnheader_splitter"),o.titles=DayPilot.list(e).map(function(t){return t.html||t.name||t.title||""}),o.updating=function(t){DayPilot.Util.updatePropsFromArray(d.rowHeaderColumns,"width",this.widths),d.Ih(),d.cellWidthSpec},o.updated=function(t){if(d.Tj(),d.xa())"function"==typeof d.onRowHeaderColumnResized&&((e={}).column=d.rowHeaderColumns[t.index],d.onRowHeaderColumnResized(e));else switch(d.rowHeaderColumnResizedHandling){case"CallBack":case"PostBack":break;case"JavaScript":var e;if("function"==typeof d.onRowHeaderColumnResized)(e={}).column=d.rowHeaderColumns[t.index],d.onRowHeaderColumnResized(e)}},o.color="#000000",o.opacity=30,o.init(),t.appendChild(i),this.Bi=o},this.Nh=function(){var t=this.nav.corner;t.innerHTML="",t.className=this.q("_corner");var e=document.createElement("div");if(e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.right="0px",e.style.bottom="0px",e.className=this.q("_corner_inner"),this.divCorner=e,e.innerHTML="&nbsp;",this.rowHeaderColumns&&this.rowHeaderColumns.length>0){var i=document.createElement("div");i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.style.right="0px",i.style.bottom=R.headerHeight()+1+"px",t.appendChild(i);var n=document.createElement("div");n.style.position="absolute",n.style.left="0px",n.style.right="0px",n.style.height="1px",n.style.bottom=R.headerHeight()+"px",n.className=this.q("_divider"),t.appendChild(n),i.appendChild(e),this.Ok()}else t.appendChild(e);document.createElement("div")},this.Mk=function(){var t=this.$g()+R.splitterWidth()-1,e=this.Zg()+3,i=DayPilot.Util.div(this.nav.top,t,e,10,20);i.style.cursor="pointer",i.className=d.q("_header_icon"),DayPilot.Util.addClass(i,d.q("_header_icon_hide")),i.onclick=function(){d.rows.headerToggle()},this.nav.hideIcon=i},this.Oh=function(){d.nav.hideIcon&&(d.rowlist.length>0&&d.rowHeaderHideIconEnabled?d.nav.hideIcon.style.display="":d.nav.hideIcon.style.display="none")},this.Kc=function(){var t=this.$g(),e=document.createElement("div");return d.nav.corner=e,e.style.width=t+"px",e.style.height=this.Zg()+"px",e.style.overflow="hidden",e.style.position="relative",e.setAttribute("unselectable","on"),e.onmousemove=function(){d.V()},e.oncontextmenu=function(){return!1},this.Nh(),e},this.Zg=function(){if(d.timeHeaders){var t=B.timeHeader(d.timeHeaders.length-1);return t.top+t.height}return this.timeHeader?d.timeHeader.length*R.headerHeight():0},this.Pk=null,this.Qk=function(){return d.scrollStep||d.eventHeight},this.Ik=function(){var t=document.createElement("div");t.style.width=this.$g()+"px",t.style.height=this.lc()+"px",t.style.overflow="hidden",t.style.position="relative",t.className=d.q("_rowheader_scroll");var e=d.Qk(),i=-1!==navigator.userAgent.indexOf("Mobile");return i&&(t.style.overflowY="auto"),t.onmousemove=function(){d.V()},t.onscroll=function(){if(d.nav.columnScroll&&d.rowHeaderScrolling&&(d.nav.columnScroll.scrollLeft=t.scrollLeft),d.Pk&&clearTimeout(d.Pk),i){var e=d.rj()-d.nav.scroll.offsetHeight;t.scrollTop=Math.min(t.scrollTop,e),d.nav.scroll.scrollTop=t.scrollTop}else d.Pk=setTimeout(function(){d.nav.scroll.scrollTop=t.scrollTop},500)},t.addEventListener("wheel",function(i){var n;n=d.overrideWheelScrolling||d.scrollStep?i.deltaY>0?e:-e:i.deltaY,d.nav.scroll.scrollTop=t.scrollTop+n,i.preventDefault&&i.preventDefault()},!1),t.oncontextmenu=function(){return!1},t.onmouseenter=function(){d.rowHeaderScrolling&&(t.style.overflowX="auto")},t.onmouseleave=function(){d.rowHeaderScrolling&&(t.style.overflowX="hidden")},t.setAttribute("role","region"),t.setAttribute("aria-label","scheduler rows"),this.divResScroll=t,this.ch=t,t},this.Rk=function(t){if("TableBased"===R.layout()){var e=parseInt(this.width,10),i=isNaN(e)||-1!==this.width.indexOf("%"),n=(/MSIE/i.test(navigator.userAgent),this.Oj());i?this.nav.top&&this.nav.top.offsetWidth>0&&(t.style.width=this.nav.top.offsetWidth-6-n+"px"):t.style.width=e-n+"px"}},this.Fe=function(t){d.tg(),d.Eg()},this.tg=function(){"TableBased"===d.Ic.layout()&&(d.Rk(d.nav.scroll),d.Rk(d.divTimeScroll)),d.na(),d.Tj(),d.Sk(),d.u.drawArea=null},this.Tk=null,this.Ai=null,this.Uk=function(){d.watchWidthChanges&&(d.Ai||(this.Ai=setInterval(function(){return d.nav&&d.nav.top?(d.Tk||(d.Tk={},d.Tk.counter=0,d.Tk.changed=!1,d.Tk.width=d.nav.top.offsetWidth),d.Tk.width!==d.nav.top.offsetWidth&&(d.Tk.changed=!0,d.Tk.counter=0,d.Tk.width=d.nav.top.offsetWidth),d.Tk.changed&&(d.Tk.counter+=1),void(d.Tk.changed&&d.Tk.counter>2&&(d.Tk.changed=!1,d.tg(),d.Eg()))):void clearInterval(d.Ai)},20)))},this.Sk=function(){var t=d.rangeHold;d.clearSelection(),d.rangeHold=t,d.$h(t,!0)},this.Tj=function(){d.B&&"Auto"===d.cellWidthSpec&&(d.ng(),d.og(),d.rg(),d.vg(),d.yg(),d.wg(),d.zg(),d.P(),d.fa(),d.sa(),d.na())},this.ng=function(){if("Auto"===this.cellWidthSpec){var t=this.nav.top.clientWidth-this.$g()-d.Vk();if(this.tj()){var e=t/this.tj();this.cellWidth=Math.max(e,d.cellWidthMin),d.bh=e<d.cellWidthMin}}},this.Vk=function(){return"Auto"===d.heightSpec?0:"Max"===d.heightSpec||"Fixed"===d.heightSpec||"Parent100Pct"===d.heightSpec?d.rj()>d.height?DayPilot.sw(d.nav.scroll):0:DayPilot.sw(d.nav.scroll)},this.fh=function(){var t=this.nav.top.clientWidth,e=this.$g(),i=this.lc(),n=this.rj(),a="Auto"===d.heightSpec,o=0;return n>i&&!a&&(o=DayPilot.swa()),t-e-2-o},this.Kk=function(){var t=document.createElement("div");t.style.overflow="hidden",t.style.position="absolute",t.style.display="block",t.style.top="0px",t.style.width="100%",t.style.height=this.Zg()+"px",t.style.overflow="hidden",t.onmousemove=function(){d.V(),d.cellBubble&&d.cellBubble.delayedHide()},this.Rk(t),this.divTimeScroll=t;var e=document.createElement("div");return e.style.width=this.tj()*this.cellWidth+5e3+"px",this.divNorth=e,t.appendChild(e),t},this.lc=function(){var t=0,e=d.heightSpec;return"Fixed"===e||"Parent100Pct"===e?this.height?this.height:0:(t=d.rj(),("Max"===e||"Max100Pct"===e)&&t>d.height?d.height:t)},this.Wk=null,this.Xk=0,this.Yk=0,this.Zk=0,this.dh=function(){if("function"==typeof d.onHeightChanged||"function"==typeof d.onDimensionsChanged){d.Wk&&clearTimeout(d.Wk);d.Wk=setTimeout(function(){var t=d.nav.top.offsetHeight,e=d.Xk;d.Xk=t;var i=d.nav.top.offsetWidth,n=d.Yk;d.Yk=i;var a,o=d.$g(),r=d.Zk;d.Zk=o,"function"==typeof d.onHeightChanged&&t!==e&&((a={}).oldHeight=e,a.newHeight=t,d.onHeightChanged(a));"function"!=typeof d.onDimensionsChanged||t===e&&i===n&&o===r||((a={}).oldHeight=e,a.newHeight=t,a.oldWidth=n,a.newWidth=i,a.oldRowHeaderWidth=r,a.newRowHeaderWidth=o,d.onDimensionsChanged(a))},100)}},this.rj=function(){var t;return-1!==this.ig?(t=this.ig,this.ig>0&&"auto"===d.nav.scroll.style.overflowX&&(t+=DayPilot.sh(d.nav.scroll))):t=this.rowlist.length*this.Ic.eventHeight(),t},this.V=function(){this.W(),this.$k(),this._k(),this.Mj(),this.qj(),d.cellBubble&&d.cellBubble.hideOnMouseOut(),d.bubble&&d.bubble.hideOnMouseOut()},this.Lk=function(){var t=document.createElement("div");if(t.style.overflow="auto",t.style.overflowX="auto",t.style.overflowY="auto",t.style.position="absolute",t.style.height=this.lc()+"px",t.style.top=this.Zg()+1+"px",t.style.width="100%",t.className=this.q("_scrollable"),t.oncontextmenu=function(){return!1},this.Rk(t),d.overrideWheelScrolling){var e=d.Qk();t.onwheel=function(i){var n=i.deltaY>0?e:-e;d.nav.scroll.scrollTop=t.scrollTop+n,i.preventDefault&&i.preventDefault()},t.onmousewheel=function(i){var n=(i=i||window.event).wheelDelta<0?e:-e;d.nav.scroll.scrollTop=t.scrollTop+n,i.preventDefault&&i.preventDefault(),i.returnValue=!1}}this.nav.scroll=t,this.Jg=document.createElement("div"),this.Jg.style.MozUserSelect="none",this.Jg.style.KhtmlUserSelect="none",this.Jg.style.webkitUserSelect="none",this.Jg.daypilotMainD=!0,this.Jg.calendar=this,i&&(this.Jg.style.webkitTransform="translateZ(0px)"),this.Jg.style.position="absolute";var n=this.Xg();return n>0&&!isNaN(n)&&(this.Jg.style.width=n+"px"),this.Jg.setAttribute("unselectable","on"),this.Jg.onmousedown=this.al,this.Jg.onmousemove=this.Nj,this.Jg.onmouseup=this.bl,this.Jg.oncontextmenu=this.cl,this.Jg.ondblclick=this.dl,this.Jg.className=this.q("_matrix"),this.divStretch=document.createElement("div"),this.divStretch.style.position="absolute",this.divStretch.style.height="1px",this.Jg.appendChild(this.divStretch),this.divCells=document.createElement("div"),this.divCells.style.position="absolute",this.divCells.oncontextmenu=this.cl,this.Jg.appendChild(this.divCells),this.divLines=document.createElement("div"),this.divLines.style.position="absolute",this.divLines.oncontextmenu=this.cl,this.Jg.appendChild(this.divLines),this.divBreaks=document.createElement("div"),this.divBreaks.style.position="absolute",this.divBreaks.oncontextmenu=this.cl,this.Jg.appendChild(this.divBreaks),this.divSeparators=document.createElement("div"),this.divSeparators.style.position="absolute",this.divSeparators.oncontextmenu=this.cl,this.Jg.appendChild(this.divSeparators),this.divLinksBelow=document.createElement("div"),this.divLinksBelow.style.position="absolute",this.Jg.appendChild(this.divLinksBelow),this.divCrosshair=document.createElement("div"),this.divCrosshair.style.position="absolute",this.divCrosshair.ondblclick=this.dl,this.Jg.appendChild(this.divCrosshair),this.divRange=document.createElement("div"),this.divRange.style.position="absolute",this.divRange.oncontextmenu=this.cl,this.Jg.appendChild(this.divRange),this.divEvents=document.createElement("div"),this.divEvents.style.position="absolute",this.Jg.appendChild(this.divEvents),this.divSeparatorsAbove=document.createElement("div"),this.divSeparatorsAbove.style.position="absolute",this.divSeparatorsAbove.oncontextmenu=this.cl,this.Jg.appendChild(this.divSeparatorsAbove),this.divLinksAbove=document.createElement("div"),this.divLinksAbove.style.position="absolute",this.Jg.appendChild(this.divLinksAbove),this.divLinkShadow=document.createElement("div"),this.divLinkShadow.style.position="absolute",this.Jg.appendChild(this.divLinkShadow),this.divLinkpoints=document.createElement("div"),this.divLinkpoints.style.position="absolute",this.Jg.appendChild(this.divLinkpoints),this.divRectangle=document.createElement("div"),this.divRectangle.style.position="absolute",this.Jg.appendChild(this.divRectangle),this.divHover=document.createElement("div"),this.divHover.style.position="absolute",this.Jg.appendChild(this.divHover),this.divShadow=document.createElement("div"),this.divShadow.style.position="absolute",this.Jg.appendChild(this.divShadow),t.appendChild(this.Jg),t},this.fl={};var x=this.fl;x.create=function(){if(!d.nav.overlay){var t=document.createElement("div");t.style.position="absolute",t.style.left="0px",t.style.right="0px",t.style.top="0px",t.style.bottom="0px",t.className=d.q("_block"),d.nav.top.appendChild(t),d.nav.overlay=t}},x.show=function(){x.create(),d.nav.overlay.style.display=""},x.hide=function(){d.nav.overlay&&(d.nav.overlay.style.display="none")},this.J=function(t){var e=t?0:100;d.loadingTimeout&&window.clearTimeout(d.loadingTimeout),d.loadingTimeout=window.setTimeout(function(){d.loadingLabelVisible&&(d.nav.loading.innerHTML=d.loadingLabelText,d.nav.loading.style.display=""),d.blockOnCallBack&&x.show()},e)},this._=function(){this.loadingTimeout&&window.clearTimeout(this.loadingTimeout),this.nav.loading.style.display="none",this.blockOnCallBack&&x.hide()},this.loadingStart=function(){d.J()},this.loadingStop=function(){d._()},this.uiBlock=function(){x.show()},this.uiUnblock=function(){x.hide()},this.xd=function(){this.startDate=new DayPilot.Date(this.startDate).getDatePart()},this.Cd=function(t){var e=document.createElement("div");e.style.position="absolute",e.style.top="-2000px",e.style.left="-2000px",e.className=this.q(t),document.body.appendChild(e);var i=e.offsetHeight,n=e.offsetWidth;document.body.removeChild(e);var a={};return a.height=i,a.width=n,a},this.wa=function(t){if(t&&(this.autoRefreshEnabled=!0),this.autoRefreshEnabled&&!(this.C>=this.autoRefreshMaxCount)){this.O();var e=this.autoRefreshInterval;if(!e||e<10)throw"The minimum autoRefreshInterval is 10 seconds";this.autoRefreshTimeout=window.setTimeout(function(){d.gd()},1e3*this.autoRefreshInterval)}},this.O=function(){this.autoRefreshTimeout&&(window.clearTimeout(this.autoRefreshTimeout),this.autoRefreshTimeout=null)},this.autoRefreshStart=function(t){d.wa(t)},this.autoRefreshPause=function(){d.O()},this.gl=function(){return!(n.resizing||n.moving||n.drag||n.range)},this.gd=function(){if(d.gl()){var t=!1;if("function"==typeof this.onAutoRefresh){var e={};e.i=this.C,e.preventDefault=function(){this.preventDefault.value=!0},d.onAutoRefresh(e),e.preventDefault.value&&(t=!0)}!t&&this.s()&&this.commandCallBack(this.autoRefreshCommand),this.C++}this.C<this.autoRefreshMaxCount&&(this.autoRefreshTimeout=window.setTimeout(function(){d.gd()},1e3*this.autoRefreshInterval))},this.hd=function(){n.globalHandlers||(n.globalHandlers=!0,DayPilot.re(document,"mousemove",n.gMouseMove),DayPilot.re(document,"mouseup",n.gMouseUp),DayPilot.re(document,"mousedown",n.gMouseDown),DayPilot.re(document,"touchmove",n.gTouchMove),DayPilot.re(document,"touchend",n.gTouchEnd),DayPilot.re(window,"keyup",n.gKeyUp)),DayPilot.re(window,"resize",this.Fe)},this.hl=function(){this.nav.scroll.root=this,this.nav.scroll.onscroll=this.Eg,d.uj=this.nav.scroll.scrollLeft,d.sj=this.nav.scroll.scrollTop,d.vj=this.divNorth.clientWidth},this.Mf=function(){if(this.nav.state){var t={};t.scrollX=this.nav.scroll.scrollLeft,t.scrollY=this.nav.scroll.scrollTop;var e=d.pi(t.scrollX,t.scrollY),i=d.qi(e),n=d.ri(e);t.rangeStart=i.start,t.rangeEnd=i.end,t.resources=n,this.syncResourceTree&&(t.tree=this.U()),this.nav.state.value=DayPilot.he(JSON.stringify(t))}},this.zg=function(){if(this.separators)for(var t=0;t<this.separators.length;t++)this.od(t)},this.il={},this.il.step=300,this.il.delay=10,this.il.mode="display",this.il.layers=!1,this.xj=function(t){if(d.eg)k.calculateEventPositionsRow(t);else for(var e=0,i=0;i<t.lines.length;i++){var n=t.lines[i];n.height=0,n.top=e;for(var a=0;a<n.length;a++){var o=n[a];o.part.top,o.part.line=i,o.part.height||(o.part.height=t.eventHeight);var r=o.part.ik();r>n.height&&(n.height=r),o.part.top=e+t.marginTop;var l="Above"===d.eventVersionPosition;if(d.eventVersionsEnabled&&!DayPilot.list(o.data.versions).isEmpty()){var s=(o.data.versions.length,o.part.top);l||(s+=o.part.height+d.eventVersionMargin),DayPilot.list(o.data.versions).each(function(t,e){if(o.versions[e]){var i=e*(d.eventVersionHeight+d.eventVersionMargin);o.versions[e].top=s+i,l&&(o.part.top+=d.eventVersionHeight,o.part.top+=d.eventVersionMargin)}})}o.part.top+=d.eventMarginBottom,o.part.right=o.part.left+o.part.width,o.part.fullTop=this.rowlist[o.part.dayIndex].top+o.part.top,o.part.fullBottom=o.part.fullTop+o.part.height}e+=(n.height||t.eventHeight)*t.eventStackingLineHeight/100}};var k={loadRow:function(t){t.evColumns=DayPilot.list(d.itline).map(function(t,e){return{events:DayPilot.list()}}),DayPilot.list(t.events).each(function(e){var i=e.start(),n=d.vh(i);t.evColumns[n.i].events.push(e)})},calculateEventPositions:function(){var t=d.fg,e=0;DayPilot.list(d.rowlist).each(function(i){var n=0;i.evColumns.each(function(e,a){var o=d.itline[a],r=d.rowMarginTop;e.events.each(function(e){e.part.left=o.left,e.part.width=o.width,e.part.top=r,e.part.height||(e.part.height=t?k.getEventAutoHeight(e)+d.durationBarHeight:i.eventHeight),r+=e.part.height+d.eventMarginBottom}),e.height=r,e.height>n&&(n=e.height)}),i.maxColumnHeight=n,i.top=e;var a=i.height;i.height=i.getHeight(),n>d.rowMarginTop&&(i.height=n+d.rowMarginBottom),a!==i.height&&(d.Rh=!0),e+=i.height}),d.ig=e},getEventAutoHeight:function(t){var e=t.client.html(),i=document.createElement("div");i.style.position="absolute",i.style.top="-2000px",i.style.left="-2000px",i.style.width=t.part.width+"px",i.className=d.q(T.event);var n=document.createElement("div");n.className=d.q(T.eventInner),n.innerHTML=e,n.style.position="static",n.style.overflow="auto",i.appendChild(n);var a=d.divEvents;a.appendChild(i);var o=i.offsetHeight;return a.removeChild(i),o},calculateEventPositionsRow:function(t){k.calculateEventPositions()},drawEventsWithoutCheckingOverflow:function(){DayPilot.list(d.rowlist).each(function(t){k.drawEventsRow(t)})},drawEvents:function(){k.drawEventsWithoutCheckingOverflow(),k.checkOverflow(),d.ug(),d.na()},checkOverflow:function(){if(d.fg){var t=!1;DayPilot.list(d.elements.events).each(function(e){var i=e.firstChild,n=i.offsetHeight-i.clientHeight+e.offsetHeight-e.clientHeight,a=i.scrollHeight+n,o=e.event.part.height;e.event.part.height=a,o!==a&&(t=!0)}),t&&(d.P(),k.calculateEventPositions(),k.drawEventsWithoutCheckingOverflow(),d.vg(),d.yg())}},drawEventsRow:function(t){t.evColumns.each(function(t,e){t.events.each(function(t){d.cc(t)})})}};this.Kh=null,this.sa=function(t){if(!d.zd){if(d.eg)return void k.drawEvents();var e=this.il.step;this.il.layers&&(d.divEvents=document.createElement("div"),d.divEvents.style.position="absolute",d.Jg.insertBefore(this.divEvents,this.divSeparatorsAbove)),"display"===this.il.mode?this.divEvents.style.display="none":"visibility"===this.il.mode&&(this.divEvents.style.visibility="hidden"),this.divEvents.setAttribute("role","region"),this.divEvents.setAttribute("aria-label","scheduler events");for(var i="Progressive"===this.dynamicEventRendering,n=this.Og(),a=n.pixels.top,o=n.pixels.bottom,r=d.allowMultiMove||d.allowMultiResize,l=0;l<this.rowlist.length;l++){var s=this.rowlist[l],c=s.top-this.dynamicEventRenderingMargin,h=c+s.height+2*this.dynamicEventRenderingMargin;if(!i||r||!(o<=c||a>=h)){this.xj(s);for(var u=0;u<s.lines.length;u++)for(var f=s.lines[u],p=0;p<f.length;p++){var g=f[p],y=this.cc(g);if(t&&y&&--e<=0)return this.divEvents.style.visibility="",this.divEvents.style.display="",void(d.Kh=window.setTimeout(function(){d.sa(t)},d.il.delay))}}}this.divEvents.style.display="",DayPilot.list(d.multiselect.kb).isEmpty()||d.multiselect.redraw(),this.Rg(),v.load()}},this.Th=function(t){var e=this.rowlist[t];if(d.eg)k.drawEventsRow(e);else{this.divEvents=document.createElement("div"),this.divEvents.style.position="absolute",this.divEvents.style.display="none",this.Jg.insertBefore(this.divEvents,this.divSeparatorsAbove),this.xj(e);for(var i=0;i<e.lines.length;i++)for(var n=e.lines[i],a=0;a<n.length;a++){var o=n[a];this.cc(o)}this.divEvents.style.display=""}},this.P=function(){if(this.elements.events)for(var t=this.elements.events.length,e=0;e<t;e++){var i=this.elements.events[e];this.Pi(i)}this.elements.events=[]},this.Sh=function(t){if(this.elements.events){for(var e=this.elements.events.length,i=[],n=0;n<e;n++){var a=this.elements.events[n];a.event.part.dayIndex===t&&(this.Pi(a),i.push(n))}for(n=i.length-1;n>=0;n--)this.elements.events.splice(i[n],1)}},this.Pi=function(t){if("function"==typeof d.onDomRemoveEvent){var e=t.domArgs;t.domArgs=null,d.onDomRemoveEvent(e)}t.parentNode&&t.parentNode.removeChild(t),t.onclick=null,t.oncontextmenu=null,t.onmouseover=null,t.onmouseout=null,t.onmousemove=null,t.onmousedown=null,t.ondblclick=null,t.event&&(t.event.rendered=null,t.event=null),t.related&&DayPilot.de(t.related)},this.jl=function(t){t.event&&(t.event.rendered=!1),t.onclick=null,t.onmousedown=null,t.event=null,t.parentNode&&t.parentNode.removeChild(t)},this.kl=function(){if("Progressive"===this.dynamicEventRendering&&d.dynamicEventRenderingCacheSweeping){var t=d.dynamicEventRenderingCacheSize||0;this.divEvents.style.display="none";for(var e=[],i=this.elements.events.length-1;i>=0;i--){var n=this.elements.events[i];this.ll(n.event)?t>0?(t--,e.unshift(n)):(this.Pi(n),0):e.unshift(n)}this.elements.events=e,this.divEvents.style.display=""}},this.ml=function(t){for(var e=[],i=this.Og(),n=this.elements.cells.length-1;n>=0;n--){var a=this.elements.cells[n];i.xStart<a.coords.x&&a.coords.x<=i.xEnd&&i.yStart<a.coords.y&&a.coords.y<=i.yEnd?e.unshift(a):t>0?(t--,e.unshift(a)):(this.Xi(a),0)}},this.Xi=function(t){if(t&&t.coords){var e=t.coords.x,i=t.coords.y;DayPilot.rfa(d.elements.cells,t),DayPilot.de(t),d.u.cells[e+"_"+i]=null}},this.wg=function(){if(this.elements.separators)for(var t=0;t<this.elements.separators.length;t++){var e=this.elements.separators[t];DayPilot.de(e)}this.elements.separators=[]},this.nl=function(){var t="Progressive"===this.dynamicEventRendering;if(!this.nav.scroll)return!1;for(var e=this.nav.scroll.scrollTop,i=e+this.nav.scroll.clientHeight,n=0;n<this.rowlist.length;n++){var a=this.rowlist[n],o=a.top,r=a.top+a.height;if(!t||!(i<=o||e>=r))for(var l=0;l<a.lines.length;l++)for(var s=a.lines[l],d=0;d<s.length;d++){var c=s[d];if(this.ol(c))return!0}}return!1},this.ol=function(t){if(t.rendered)return!1;var e="Progressive"===this.dynamicEventRendering,i=this.nav.scroll.scrollLeft,n=i+this.nav.scroll.clientWidth,a=t.part.left,o=t.part.left+t.part.width;return!e||!(n<=a||i>=o)},this.ll=function(t){if(!t.rendered)return!0;var e=this.Og(),i=e.pixels.top,n=e.pixels.bottom,a=e.pixels.left-this.dynamicEventRenderingMargin,o=e.pixels.right+this.dynamicEventRenderingMargin,r=t.part.left,l=t.part.right,s=t.part.fullTop,d=t.part.fullBottom;return o<=r||a>=l||n<=s||i>=d},this.hk=DayPilot.list(),this.pl=function(t){if(t.rendered)return!1;if(t.row.hidden)return!1;var e=t.min,i=t.max-t.min,n=d.eventHeight,a=t.row.top,o=document.createElement("div");o.style.position="absolute",o.style.left=e+"px",o.style.top=a+"px",o.style.width=i+"px",o.style.height=n+"px",o.className=d.q("_event_group"),o.style.cursor="pointer";var r={group:{}};r.group.count=t.events.length,r.group.events=DayPilot.list(t.events,!0),r.group.html="[+] "+t.events.length+" events","function"==typeof d.onBeforeGroupRender&&d.onBeforeGroupRender(r);var l=document.createElement("div");return l.innerHTML=r.group.html,o.appendChild(l),o.onmousedown=function(t){(t=t||window.event).cancelBubble=!0},o.onclick=function(t){var e=o.event;e.expanded=!0,d.jl(o);var i=DayPilot.indexOf(d.elements.events,o);-1!==i&&d.elements.events.splice(i,1);var n=d.hk;DayPilot.list(e.events).each(function(t){n.push(t.id())}),d.Dh(),d.Eh(e.part.dayIndex),d.na(),(t=t||window.event).cancelBubble=!0},t.part={},t.part.left=e,t.part.width=i,t.part.height=d.eventHeight,t.part.dayIndex=DayPilot.indexOf(d.rowlist,t.row),t.part.top=0,t.part.isBlock=!0,t.client={},t.client.html=function(){return r.group.html},t.data={},o.event=t,this.elements.events.push(o),this.divEvents.appendChild(o),t.rendered=!0,!0},this.cc=function(t,e){var i=(e=e||{}).forced;if(t.rendered)return!1;if(d.groupConcurrentEvents){var n=t.part.block;if(n.events.length>1&&!n.expanded)return d.pl(n)}var a="Progressive"===this.dynamicEventRendering,o=t.part.dayIndex,r=this.rowlist[o];if(r.hidden)return!1;var l=r.top,s=(I=this.Og()).pixels.left-this.dynamicEventRenderingMargin,c=I.pixels.right+this.dynamicEventRenderingMargin,h=I.pixels.top,u=I.pixels.bottom,v=t.part.left,f=t.part.left+t.part.width,p=t.part.top+l,g=p+t.part.height,y=d.multiselect.Kb(t);if(!i&&!y&&a&&(c<=v||s>=f||u<=p||h>=g))return!1;var m="Milestone"===t.data.type,b=t.part.width,w=t.part.height,D=t.cache||t.data;b=Math.max(0,b),w=Math.max(0,w);var P,x=document.createElement("div");if(x.related=[],P=x,d.eventVersionsEnabled&&DayPilot.list(t.data.versions).each(function(e,i){if(e){var n=t.versions[i];if(n){var a=document.createElement("div");a.style.position="absolute",a.style.left=n.left+"px",a.style.top=l+n.top+"px",a.style.width=n.width+"px",a.style.height=d.eventVersionHeight+"px",a.className=d.q(T.event)+" "+d.q("_event_previous")+" "+d.q("_event_version"),e.toolTip&&(a.title=e.toolTip),e.cssClass&&DayPilot.Util.addClass(a,e.cssClass);var o=document.createElement("div");o.setAttribute("unselectable","on"),o.className=d.q(T.eventInner),o.innerHTML=e.html||e.text||"",e.backColor&&(o.style.background=e.backColor,(DayPilot.browser.ie9||DayPilot.browser.ielt9)&&(o.style.filter="")),e.fontColor&&(o.style.color=e.fontColor),e.borderColor&&(o.style.borderColor=e.borderColor),e.backImage&&(o.style.backgroundImage="url("+e.backImage+")",e.backRepeat&&(o.style.backgroundRepeat=e.backRepeat)),a.appendChild(o),n.continueLeft&&!m&&DayPilot.Util.addClass(a,d.q("_event_continueleft")),n.continueRight&&!m&&DayPilot.Util.addClass(a,d.q("_event_continueright"));var r=d.durationBarVisible&&!e.barHidden,s=n.width;if(r&&s>0){var c=100*n.barLeft/s,h=Math.ceil(100*n.barWidth/s);"PercentComplete"===d.durationBarMode&&(c=0,h=e.complete||0);var u=document.createElement("div");u.setAttribute("unselectable","on"),u.className=d.q(T.eventBar),u.style.position="absolute",e.barBackColor&&(u.style.backgroundColor=e.barBackColor);var v=document.createElement("div");v.setAttribute("unselectable","on"),v.className=d.q(T.eventBarInner),v.style.left=c+"%",v.style.width=0<h&&h<=1?"1px":h+"%",e.barColor&&(v.style.backgroundColor=e.barColor),e.barImageUrl&&(v.style.backgroundImage="url("+e.barImageUrl+")"),u.appendChild(v),a.appendChild(u)}if(e.htmlLeft){var f=d.eventHtmlLeftMargin,p=document.createElement("div");p.style.position="absolute",p.style.right=-(n.left-f)+"px",p.style.top=l+n.top+"px",p.style.height=d.eventHeight+"px",p.style.boxSizing="border-box",p.innerHTML=e.htmlLeft,p.className=d.q("_event_left"),p.type="divLeft",p.versionPart=n,P.related.push(p),d.divEvents.appendChild(p)}if(e.htmlRight){f=d.eventHtmlRightMargin;var g=document.createElement("div");g.style.position="absolute",g.style.left=n.left+n.width+f+"px",g.style.top=l+n.top+"px",g.style.height=d.eventHeight+"px",g.style.boxSizing="border-box",g.innerHTML=e.htmlRight,g.className=d.q("_event_right"),g.type="divRight",g.versionPart=n,P.related.push(g),d.divEvents.appendChild(g)}a.versionPart=n,a.type="version",P.related.push(a),d.divEvents.appendChild(a)}}}),D.htmlLeft){var k=d.eventHtmlLeftMargin,C=document.createElement("div");C.style.position="absolute",C.style.right=-(t.part.left-k)+"px",C.style.top=l+t.part.top+"px",C.style.height=d.eventHeight+"px",C.style.boxSizing="border-box",C.innerHTML=D.htmlLeft,C.className=d.q("_event_left"),C.type="divLeft",x.related.push(C),this.divEvents.appendChild(C)}if(D.htmlRight){k=d.eventHtmlRightMargin;var E=document.createElement("div");E.style.position="absolute",E.style.left=t.part.left+t.part.width+k+"px",E.style.top=l+t.part.top+"px",E.style.height=d.eventHeight+"px",E.style.boxSizing="border-box",E.innerHTML=D.htmlRight,E.className=d.q("_event_right"),E.type="divRight",x.related.push(E),this.divEvents.appendChild(E)}h=l+t.part.top;var M=b-1;D.flagLeft&&(M+=60,x.style.borderBottomLeftRadius=0,x.style.borderTopLeftRadius=0),D.flagRight&&(M-=60,x.style.borderBottomRightRadius=0,x.style.borderTopRightRadius=0),x.style.position="absolute",x.style.left=D.flagLeft?t.part.left+"px":t.part.left+60+"px",x.style.top=l+t.part.top+"px",x.style.width=M+"px",x.style.height=w-1+"px",d.eventTextWrappingEnabled||(x.style.whiteSpace="nowrap"),x.style.overflow="hidden",x.className=this.q(T.event),m&&DayPilot.Util.addClass(x,d.q("_task_milestone")),"Group"===t.data.type&&(DayPilot.Util.addClass(x,d.q("_task_parent")),DayPilot.Util.addClass(x,d.q("_task_group"))),D.cssClass&&DayPilot.Util.addClass(x,D.cssClass),"number"==typeof t.part.line&&DayPilot.Util.addClass(x,this.q(T.eventLine+t.part.line)),x.setAttribute("unselectable","on"),this.showToolTip&&!this.bubble&&(x.title=t.client.toolTip()||""),x.onmousemove=this.dc,x.onmouseout=this.ec,x.onmousedown=this.fc,x.onmouseup=this.ql,x.ontouchstart=S.onEventTouchStart,x.ontouchmove=S.onEventTouchMove,x.ontouchend=S.onEventTouchEnd,t.client.clickEnabled()&&(x.onclick=this.ef),t.client.doubleClickEnabled()&&(x.ondblclick=this.Oa),x.oncontextmenu=this.Pa,void 0!==D.ariaLabel?x.setAttribute("aria-label",D.ariaLabel):x.setAttribute("aria-label",D.text),x.setAttribute("tabindex","-1");var H=document.createElement("div");H.setAttribute("unselectable","on"),H.className=d.q(T.eventInner),D.backColor&&(H.style.background=D.backColor,(DayPilot.browser.ie9||DayPilot.browser.ielt9)&&(H.style.filter="")),D.fontColor&&(H.style.color=D.fontColor),D.borderColor&&(H.style.borderColor=D.borderColor),D.backImage&&(H.style.backgroundImage="url("+D.backImage+")",D.backRepeat&&(H.style.backgroundRepeat=D.backRepeat)),x.appendChild(H);var R,B=t.start().getTime()===t.part.start.getTime(),A=t.rawend().getTime()===t.part.end.getTime();if(B||m||DayPilot.Util.addClass(x,this.q("_event_continueleft")),A||m||DayPilot.Util.addClass(x,this.q("_event_continueright")),t.client.barVisible()&&b>0&&!m){var _=100*t.part.barLeft/b,U=Math.ceil(100*t.part.barWidth/b);"PercentComplete"===this.durationBarMode&&(_=0,U=D.complete||0);var N=document.createElement("div");N.setAttribute("unselectable","on"),N.className=this.q(T.eventBar),N.style.position="absolute",D.barBackColor&&(N.style.backgroundColor=D.barBackColor);var L=document.createElement("div");L.setAttribute("unselectable","on"),L.className=this.q(T.eventBarInner),L.style.left=_+"%",L.style.width=0<U&&U<=1?"1px":U+"%",D.barColor&&(L.style.backgroundColor=D.barColor),D.barImageUrl&&(L.style.backgroundImage="url("+D.barImageUrl+")"),N.appendChild(L),x.appendChild(N)}if(x.row=o,D.areas)for(var O=0;O<D.areas.length;O++){var I;if("Visible"===((I=D.areas[O]).visibility||I.v||"Visible")){(I.start||I.end)&&(I.left=d.getPixels(new DayPilot.Date(I.start)).left-t.part.left,I.width=d.getPixels(new DayPilot.Date(I.end)).left-I.left-t.part.left);var z=DayPilot.Areas.createArea(x,t,I);x.appendChild(z)}}if(x.event=t,y&&(d.multiselect.add(x.event,!0),d.multiselect.Vb(x)),(R={}).e=t,R.element=null,x.domArgs=R,"function"==typeof d.onDomAddEvent&&d.onDomAddEvent(R),R.element?H.appendChild(R.element):m||(H.innerHTML=t.client.innerHTML()),this.elements.events.push(x),this.divEvents.appendChild(x),t.rendered=!0,d.xa()){if("function"==typeof d.onAfterEventRender){var j={};j.e=x.event,j.div=x,d.onAfterEventRender(j)}}else d.afterEventRender&&d.afterEventRender(x.event,x);return!0},this.xa=function(){return 2===d.api},this.Uh=function(){for(var t=0;t<this.elements.events.length;t++){var e=this.elements.events[t],i=e.event,n=i.part.dayIndex,a=this.rowlist[n].top,o=a+i.part.top;e.style.top=o+"px",DayPilot.list(e.related).filter(function(t){return!!t.versionPart}).each(function(t){var e=t.versionPart;t.style.top=a+e.top+"px"}),DayPilot.list(e.related).filter(function(t){return!t.versionPart&&("divLeft"===t.type||"divRight"===t.type)}).each(function(t){t.style.top=o+"px"})}},this.td=function(t){if(!t)return null;for(var e=0;e<d.elements.events.length;e++){var i=d.elements.events[e];if(i.event===t||i.event.data===t.data)return i}return null},this.Ki=function(t){var e=d.events.Mi(t.data);if(!e)return null;var i=d.rowlist[e.part.dayIndex];return d.xj(i),d.cc(e,{forced:!0}),d.td(e)},this.ec=function(t){DayPilot.Areas.hideAreas(this,t),this.active||(DayPilot.Util.removeClass(this,d.q("_event_hover")),d.rl(this),o.source||v.hideLinkpointsWithDelay(),d.bubble&&"Bubble"===d.eventHoverHandling&&d.bubble.hideOnMouseOut())},this.sl=function(t){if("function"==typeof this.onEventMouseOver){var e={};e.div=t,e.e=t.event,this.onEventMouseOver(e)}},this.rl=function(t){if("function"==typeof this.onEventMouseOut){var e={};e.div=t,e.e=t.event,this.onEventMouseOut(e)}},this.dc=function(t){t=t||window.event,d.cellBubble&&d.cellBubble.delayedHide();for(var e=this;e&&!e.event;)e=e.parentNode;d.ul(e,t);var i=e.event.cache?e.event.cache.deleteDisabled:e.event.data.deleteDisabled;if(!e.active){var n=[];if("Disabled"!==d.eventDeleteHandling&&!i){var a=d.durationBarVisible?d.durationBarHeight:0;n.push({action:"JavaScript",v:"Hover",w:17,h:17,top:a+2,right:2,css:d.q(T.eventDelete),js:function(t){d.Ta(t)}})}var r=e.event.cache?e.event.cache.areas:e.event.data.areas;r&&r.length>0&&(n=n.concat(r)),DayPilot.Areas.showAreas(e,e.event,null,n),DayPilot.Util.addClass(e,d.q("_event_hover")),d.sl(e)}"Disabled"===d.linkCreateHandling||o.source||(v.clearHideTimeout(),v.hideLinkpoints(),d.gl()&&v.showLinkpoint(e)),d.vl(t),d.coords.insideEvent=!0},this.wl={};var C=this.wl;this.ql=function(t){if(d.ionicEventClickFix){var e=C.originalMouse;if(e){var i=DayPilot.mc(t);e.x===i.x&&e.y===i.y&&(d.ef.call(this,t),t.preventDefault(),t.stopPropagation())}}},this.fc=function(t){if(d.V(),void 0!==DayPilot.Bubble&&(DayPilot.Bubble.hideActive(),DayPilot.Bubble.cancelShowing()),t=t||window.event,!d.coords){var e=d.Jg;d.coords=DayPilot.mo3(e,t)}var i=DayPilot.Util.mouseButton(t);if(t.preventDefault(),t.stopPropagation(),i.left){var a=t.shiftKey;if("Disabled"!==d.multiSelectRectangle&&a)return E.start(),!1;"w-resize"===this.style.cursor||"e-resize"===this.style.cursor?(n.preventEventClick=!0,n.resizing=this,n.resizingEvent=this.event,n.originalMouse=DayPilot.mc(t),document.body.style.cursor=this.style.cursor,v.hideLinkpoints()):("move"===this.style.cursor||"Full"===d.moveBy&&this.event.client.moveEnabled())&&(C.start=!0,C.moving=this,C.movingEvent=this.event,C.originalMouse=DayPilot.mc(t),C.moveOffsetX=DayPilot.mo3(this,t).x,C.moveDragStart=d.getDate(d.coords.x,!0),v.hideLinkpoints())}DayPilot.Menu&&DayPilot.Menu.active&&DayPilot.Menu.active.hide()},this.gc={};var S=d.gc;void 0===DayPilot.Global.touch&&(DayPilot.Global.touch={}),DayPilot.Global.touch.active=!1,DayPilot.Global.touch.start=!1,S.timeouts=[],S.onEventTouchStart=function(t){if(!DayPilot.Global.touch.active&&!DayPilot.Global.touch.start){t.stopPropagation(),S.clearTimeouts(),DayPilot.Global.touch.start=!0,DayPilot.Global.touch.active=!1;var i=this;d.coords=S.relativeCoords(t);var n=d.tapAndHoldTimeout;S.timeouts.push(window.setTimeout(function(){DayPilot.Global.touch.active=!0,DayPilot.Global.touch.start=!1,t.preventDefault();var n=i.event;switch(d.eventTapAndHoldHandling){case"Move":if(n.client.moveEnabled()){var a=e(t);S.startMoving(i,a)}}},n))}},S.onEventTouchMove=function(t){S.clearTimeouts(),DayPilot.Global.touch.start=!1},S.onEventTouchEnd=function(t){if(!DayPilot.Util.isMouseEvent(t)){if(S.clearTimeouts(),DayPilot.Global.touch.start){DayPilot.Global.touch.start=!1,t.preventDefault(),t.stopPropagation();var e=this;window.setTimeout(function(){d.La(e,t)})}window.setTimeout(function(){DayPilot.Global.touch.start=!1,DayPilot.Global.touch.active=!1},500)}},S.onMainTouchStart=function(t){if(!(DayPilot.Global.touch.active||DayPilot.Global.touch.start||t.touches.length>1||"Disabled"===d.timeRangeSelectedHandling)){S.clearTimeouts(),DayPilot.Global.touch.start=!0,DayPilot.Global.touch.active=!1;var e=d.tapAndHoldTimeout;S.timeouts.push(window.setTimeout(function(){DayPilot.Global.touch.active=!0,DayPilot.Global.touch.start=!1,t.preventDefault(),d.coords=S.relativeCoords(t),S.range=d.xl()},e)),d.coords=S.relativeCoords(t)}},S.onMainTouchMove=function(t){if(S.clearTimeouts(),DayPilot.Global.touch.start=!1,n.resizing)return t.preventDefault(),void S.updateResizing();if(DayPilot.Global.touch.active){if(t.preventDefault(),d.coords=S.relativeCoords(t),n.moving)return void S.updateMoving();if(S.range){var e=S.range;e.end={x:Math.floor(d.coords.x/d.cellWidth)},d.$h(e)}}},S.onMainTouchEnd=function(t){if(S.clearTimeouts(),DayPilot.Global.touch.active){if(n.moving){t.preventDefault();var e=n.movingEvent;if(d!==n.movingShadow.calendar)return;var i=n.movingShadow.start,a=n.movingShadow.end,o="Days"!==d.viewType?n.movingShadow.row.id:null,r=n.drag&&e.part.external,l=n.movingShadow.overlapping,s=!n.movingShadow.allowed;if(DayPilot.Util.removeClass(n.moving,d.q(d.yl.eventMovingSource)),DayPilot.de(n.movingShadow),d.Mj(),n.movingShadow.calendar=null,document.body.style.cursor="",n.moving=null,n.movingEvent=null,n.movingShadow=null,d.Fj.clear(),l||s||d.Fj.forbidden||d.Fj.invalid)return;d._a(e,i,a,o,r)}if(S.range){var c=S.range;S.range=null,(h=d.elements.range2)&&h.overlapping?d.clearSelection():d.Xh(c)}}else if(DayPilot.Global.touch.start){if(d.coords.x<d.getScrollX())return;var h;c=d.xl();d.$h(c),(h=d.elements.range2)&&h.overlapping?d.clearSelection():d.Xh(c)}window.setTimeout(function(){DayPilot.Global.touch.start=!1,DayPilot.Global.touch.active=!1},500)},S.clearTimeouts=function(){for(var t=0;t<S.timeouts.length;t++)clearTimeout(S.timeouts[t]);S.timeouts=[]},S.relativeCoords=function(t){var e=d.Jg,i=t.touches[0].pageX,n=t.touches[0].pageY,a=DayPilot.abs(e);return{x:i-a.x,y:n-a.y,toString:function(){return"x: "+this.x+", y:"+this.y}}},S.startMoving=function(t,e){n.moving=t,n.movingEvent=t.event,n.originalMouse=e;var i=DayPilot.abs(t);n.moveOffsetX=e.x-i.x,n.moveDragStart=d.getDate(d.coords.x,!0),n.movingShadow=d.ya(t),d.pj()},S.startResizing=function(t,e){n.resizing=t,n.resizingEvent=t.event,n.resizing.dpBorder=e,n.resizingShadow||(n.resizingShadow=d.ya(t)),d.Gj()},S.updateResizing=function(){if(!n.resizingShadow){var t=n.resizing;n.resizingShadow=d.ya(t)}d.Gj()},S.updateMoving=function(){if(n.movingShadow&&n.movingShadow.calendar!==d&&d.Mj(),!n.movingShadow){var t=n.moving;n.movingShadow=d.ya(t)}n.movingShadow.calendar.pj()},this.ul=function(t,e){var i=this.eventResizeMargin,a=this.eventMoveMargin,o=t;if(void 0!==n){var r=DayPilot.mo3(t,e);if(r&&(d.eventOffset=r,!n.resizing&&!n.moving)){var l=o.event.part.start.toString()===o.event.start().toString(),s=o.event.part.end.toString()===o.event.rawend().toString();"Top"===d.moveBy&&r.y<=a&&o.event.client.moveEnabled()&&"Disabled"!==d.eventMoveHandling?t.style.cursor="move":("Top"===d.moveBy||"Full"===d.moveBy)&&r.x<=i&&o.event.client.resizeEnabled()&&"Disabled"!==d.eventResizeHandling?l?(t.style.cursor="w-resize",t.dpBorder="left"):t.style.cursor="not-allowed":"Left"===d.moveBy&&r.x<=a&&o.event.client.moveEnabled()&&"Disabled"!==d.eventMoveHandling?t.style.cursor="move":t.offsetWidth-r.x<=i&&o.event.client.resizeEnabled()&&"Disabled"!==d.eventResizeHandling?s?(t.style.cursor="e-resize",t.dpBorder="right"):t.style.cursor="not-allowed":n.resizing||n.moving||(o.event.client.clickEnabled()&&"Disabled"!==d.eventClickHandling?t.style.cursor="pointer":t.style.cursor="default"),void 0===DayPilot.Bubble||!d.bubble||"Bubble"!==d.eventHoverHandling||"default"!==t.style.cursor&&"pointer"!==t.style.cursor||(this.kd&&r.x===this.kd.x&&(r.y,this.kd.y),this.kd=r,d.bubble.showEvent(t.event))}}},this.tj=function(){return"Days"!==this.viewType?this.itline.length:Math.floor(1440/this.cellDuration)},this.Yh=function(t){if(!(t=t||n.range||d.rangeHold))return null;var e=d.rowlist[t.start.y];if(!e)return null;var i,a=t.zl?t.zl:t,o=e.id,r=a.end.x>a.start.x?a.start.x:a.end.x,l=a.end.x>a.start.x?a.end.x:a.start.x;i=e.start.getTime()-this.Fa().getTime();var s=this.itline[r].start.addTime(i),c=this.itline[l].end.addTime(i);return new DayPilot.Selection(s,c,o,d)},this.Fb=function(t){var e=t.parentNode,i=d.eventEditMinWidth,n=document.createElement("textarea");return n.style.position="absolute",n.style.width=(t.offsetWidth<i?i:t.offsetWidth-2)+"px",n.style.height=t.offsetHeight-2+"px",n.style.fontFamily=DayPilot.gs(t,"fontFamily")||DayPilot.gs(t,"font-family"),n.style.fontSize=DayPilot.gs(t,"fontSize")||DayPilot.gs(t,"font-size"),n.style.left=t.offsetLeft+"px",n.style.top=t.offsetTop+"px",n.style.border="1px solid black",n.style.padding="0px",n.style.marginTop="0px",n.style.backgroundColor="white",n.value=DayPilot.tr(t.event.text()),n.event=t.event,e.appendChild(n),n},this.Al=function(t){var e=c.events();e.sort(function(t,e){var i=t.event,n=e.event;return i.part.dayIndex!==n.part.dayIndex?i.part.dayIndex-n.part.dayIndex:i.start()!==n.start()?i.start().getTime()-n.start().getTime():n.end().getTime()-i.end().getTime()});var i=e.indexOf(t);return-1===i?null:i+1<e.length?e[i+1]:e[0]},this.Ma=function(t){if(t&&(n.editing&&n.editing.blur(),t.event)){var e=this.Fb(t);n.editing=e,DayPilot.re(e,DayPilot.touch.start,function(t){t.stopPropagation()}),e.onblur=function(){if(e.onblur=null,n.editing===e&&(n.editing=null),e.parentNode&&e.parentNode.removeChild(e),t.event){var i=(t.event.text(),e.value);d.ib(t.event,i,e.canceling)}},e.onmousedown=function(t){(t=t||window.event).stopPropagation&&t.stopPropagation()},e.onkeypress=function(t){return 13!==(window.event?event.keyCode:t.keyCode)||(this.onblur(),!1)},e.cancel=function(){n.editing&&(n.editing.canceling=!0,n.editing.blur())},e.onkeydown=function(e){var i=window.event?event.keyCode:e.keyCode;if(27===i)n.editing.cancel();else if(9===i){var a=d.Al(t);return n.editing.cancel(),a&&(DayPilot.browser.ie?setTimeout(function(){d.Ma(a)},0):d.Ma(a)),!1}},e.select(),e.focus()}},this.Bl={},this.Bl.resource=void 0!==DayPilot.Bubble?new DayPilot.Bubble:{showResource:function(){},hideOnMouseOut:function(){}},this.Bl.cell=void 0!==DayPilot.Bubble?new DayPilot.Bubble:{showResource:function(){},hideOnMouseOut:function(){}},this.Zj=function(t){var e=this.row;if(void 0!==DayPilot.Bubble){d.cellBubble;var i=d.ci(e);i.div=this,d.resourceBubble?d.resourceBubble.showResource(i):e.bubbleHtml&&d.Bl.resource.showResource(i)}},this.$j=function(t){void 0!==DayPilot.Bubble&&d.resourceBubble?d.resourceBubble.hideOnMouseOut():d.Bl.resource.hideOnMouseOut();var e=this.firstChild;DayPilot.Areas.hideAreas(e,t),e.data=null},this._j=function(t){a.row&&(D.cancelClick=!0,setTimeout(function(){D.cancelClick=!1},100))},this.rg=function(){if(this.timeHeader){this.u.timeHeader={};var t=document.createElement("div");t.style.position="relative",this.nav.timeHeader=t;for(var e=0;e<this.timeHeader.length;e++)for(var i=this.timeHeader[e],n=0;n<i.length;n++)this.Cl(n,e);var a=this.divNorth;if(1===a.childNodes.length)a.replaceChild(t,a.childNodes[0]);else{if(DayPilot.browser.ie&&a&&a.firstChild){for(var o=[],r=0;r<a.firstChild.childNodes.length;r++)o.push(a.firstChild.childNodes[r]);DayPilot.de(o)}a.innerHTML="",a.appendChild(t)}var l=this.Xg();a.style.width=l+5e3+"px",d.divCorner.innerHTML=this.cornerHtml||"",l>0&&(this.divStretch.style.width=l+"px")}},this.ph=function(t,e){var i=null,n=this.Ic.locale(),a=(e=e||this.cellGroupBy,t.start);switch(t.end,e){case"Minute":i=a.toString("m");break;case"Hour":i="Clock12Hours"===d.Ic.timeFormat()?a.toString("h tt",n):a.toString("H",n);break;case"Day":i=a.toString(n.datePattern);break;case"Week":i=1===R.weekStarts()?a.weekNumberISO():a.weekNumber();break;case"Month":i=a.toString("MMMM yyyy",n);break;case"Quarter":i="Q"+Math.floor(a.getMonth()/3+1);break;case"Year":i=a.toString("yyyy");break;case"None":i="";break;case"Cell":var o=(t.end.ticks-t.start.ticks)/6e4;i=this.Dl(a,o);break;default:throw new DayPilot.Exception("Invalid groupBy value: "+e)}return i},this.Dl=function(t,e){var i=this.Ic.locale();return(e=e||this.cellDuration)<1?t.toString("ss"):e<60?t.toString("mm"):e<1440?"Clock12Hours"===d.Ic.timeFormat()?t.toString("h tt",i):t.toString("H",i):e<10080?t.toString("d"):10080===e?1===R.weekStarts()?t.weekNumberISO():t.weekNumber():t.toString("MMMM yyyy",i)},this.lh=function(t){var e=this.scale;switch(e){case"Cell":throw"Invalid scale: Cell";case"Manual":throw"Internal error (addScaleSize in Manual mode)";case"CellDuration":return t.addMinutes(this.cellDuration);default:return this.oh(t,e,!0)}},this.oh=function(t,e,i){var n,a="Days"!==this.viewType?this.days:1,o=this.startDate.addDays(a);"Manual"===d.scale&&(o=d.nh());switch(e=e||this.cellGroupBy){case"Minute":t.getMinutes()+t.getSeconds()+t.getMilliseconds()>0&&(t=t.getDatePart().addHours(t.getHours()).addMinutes(t.getMinutes())),n=t.addMinutes(1);break;case"Hour":t.getHours()+t.getMinutes()+t.getSeconds()+t.getMilliseconds()>0&&(t=t.getDatePart().addHours(t.getHours())),n=t.addHours(1);break;case"Day":n=t.getDatePart().addDays(1);break;case"Week":for(n=t.getDatePart().addDays(1);n.dayOfWeek()!==R.weekStarts();)n=n.addDays(1);break;case"Month":n=(n=t.addMonths(1)).firstDayOfMonth();for(var r=DayPilot.DateUtil.diff(n,t)/6e4%60==0;!r;)n=n.addHours(1),r=DayPilot.DateUtil.diff(n,t)/6e4%60==0;break;case"Quarter":for(n=(n=t.addMonths(1)).firstDayOfMonth();n.getMonth()%3;)n=n.addMonths(1);for(r=DayPilot.DateUtil.diff(n,t)/6e4%60==0;!r;)n=n.addHours(1),r=DayPilot.DateUtil.diff(n,t)/6e4%60==0;break;case"Year":n=(n=t.addYears(1)).firstDayOfYear();for(r=DayPilot.DateUtil.diff(n,t)/6e4%60==0;!r;)n=n.addHours(1),r=DayPilot.DateUtil.diff(n,t)/6e4%60==0;break;case"None":n=o;break;case"Cell":var l=this.vh(t);n=l.current?l.current.end:l.past?l.previous.end:l.next.start;break;default:throw i?new DayPilot.Exception("Invalid scale value: "+e):new DayPilot.Exception("Invalid groupBy value: "+e)}return n.getTime()>o.getTime()&&(n=o),n},this.yl={},this.yl.timeheadercol="_timeheadercol",this.yl.timeheadercolInner="_timeheadercol_inner",this.yl.resourcedivider="_resourcedivider",this.yl.eventFloat="_event_float",this.yl.eventFloatInner="_event_float_inner",this.yl.event="_event",this.yl.eventInner="_event_inner",this.yl.eventBar="_event_bar",this.yl.eventBarInner="_event_bar_inner",this.yl.eventDelete="_event_delete",this.yl.eventLine="_event_line",this.yl.eventMovingSource="_event_moving_source";var T=this.yl;this.Cl=function(t,e){var i=this.nav.timeHeader,n=this.timeHeader[e][t],a=e<this.timeHeader.length-1,o=n.left,r=n.width,l=B.timeHeader(e),s=l.top,c=l.height,h=document.createElement("div");h.style.position="absolute",h.style.top=s+"px",h.style.left=o+"px",h.style.width=r+"px",h.style.height=c+"px",n.toolTip&&(h.title=n.toolTip),h.setAttribute("aria-hidden","true"),n.cssClass&&DayPilot.Util.addClass(h,n.cssClass),h.setAttribute("unselectable","on"),h.style.KhtmlUserSelect="none",h.style.MozUserSelect="none",h.style.webkitUserSelect="none",h.oncontextmenu=function(){return!1},h.cell={},h.cell.start=n.start,h.cell.end=n.end,h.cell.level=e,h.cell.th=n,h.onclick=this.ek,h.style.overflow="hidden",d.timeHeaderTextWrappingEnabled||(h.style.whiteSpace="nowrap");var u=document.createElement("div");u.setAttribute("unselectable","on"),n.innerHTML&&(u.innerHTML=n.innerHTML),n.backColor&&(u.style.background=n.backColor),n.fontColor&&(u.style.color=n.fontColor),new Date(n.start.value).toDateString()==(new Date).toDateString()&&(u.style.border="1px solid #18b4c9");var v=this.q(T.timeheadercol),f=this.q(T.timeheadercolInner);a&&(v=this.q("_timeheadergroup"),f=this.q("_timeheadergroup_inner")),DayPilot.Util.addClass(h,v),DayPilot.Util.addClass(u,f),DayPilot.Util.addClass(h,d.q("_timeheader_cell")),DayPilot.Util.addClass(u,d.q("_timeheader_cell_inner")),DayPilot.list(n.areas).each(function(t){t.start&&(t.left=d.getPixels(new DayPilot.Date(t.start)).left-o,t.end&&(t.width=d.getPixels(new DayPilot.Date(t.end)).left-t.left-o))}),h.appendChild(u),DayPilot.Areas.attach(h,n,{areas:n.areas}),this.u.timeHeader[t+"_"+e]=h,i.appendChild(h)},this.Dh=function(){if(d.eg)k.calculateEventPositions();else for(var t=0;t<this.rowlist.length;t++){var e=this.rowlist[t],i=e.getHeight()+e.marginBottom+e.marginTop;e.height!==i&&(this.Rh=!0),e.height=i}},this.ug=function(){var t=this.divHeader;if(!t)return!1;for(var e=this.rowlist.length,i=(this.rowHeaderCols&&this.rowHeaderCols.length,0),n=0;n<e;n++){var a=this.rowlist[n];if(!a.hidden){var o=this.Uj?n:i;if(t.rows[o]){for(var r=0;r<t.rows[o].cells.length;r++){var l=t.rows[o].cells[r];this.Uj&&(l.style.top=a.top+"px");var s=a.height;l&&l.firstChild&&parseInt(l.firstChild.style.height,10)!==s&&(l.firstChild.style.height=s+"px")}i++}}}this.Uj&&d.nav.resScrollSpace&&(d.nav.resScrollSpace.style.top=d.ig+"px")},this.od=function(t){var e=this.separators[t];e.location=e.location||e.Location,e.color=e.color||e.Color,e.layer=e.layer||e.Layer,e.width=e.width||e.Width,e.opacity=e.opacity||e.Opacity;var i=new DayPilot.Date(e.location),n=e.color,a=e.width?e.width:1,o=!!e.layer&&"AboveEvents"===e.layer,r=e.opacity?e.opacity:100;if(!(i.getTime()<this.Fa().getTime()||i.getTime()>=this.nh().getTime())){var l=this.getPixels(i);if(!l.cut&&!(l.left<0||l.left>this.tj()*this.cellWidth)){var s=document.createElement("div");s.style.width=a+"px",s.style.height=d.ig+"px",s.style.position="absolute",s.style.left=l.left-1+"px",s.style.top="0px",s.style.backgroundColor=n,s.style.opacity=r/100,s.style.filter="alpha(opacity="+r+")",s.className=d.q("_separator"),e.cssClass&&(s.className+=" "+e.cssClass),o?this.divSeparatorsAbove.appendChild(s):this.divSeparators.appendChild(s),this.elements.separators.push(s)}}},this.dl=function(t){if("Disabled"===d.timeRangeDoubleClickHandling)return!1;if(n.timeRangeTimeout&&(clearTimeout(n.timeRangeTimeout),n.timeRangeTimeout=null),!d.coords){var e=d.Jg;d.coords=DayPilot.mo3(e,t)}if((t=t||window.event).stopPropagation&&t.stopPropagation(),t.cancelBubble=!0,d.El(d.coords)){var i=d.Yh(d.rangeHold);d.hb(i.start,i.end,i.resource)}else if(n.range=d.xl(),n.range){n.rangeCalendar=d;i=d.Yh(n.range);d.hb(i.start,i.end,i.resource),d.rangeHold=n.range}},this.al=function(t){if(!DayPilot.Global.touch.start&&!DayPilot.Global.touch.active){if(n.timeRangeTimeout,d.Fl(),d.$k(),!d.coords){var e=d.Jg;d.coords=DayPilot.mo3(e,t)}if(n.rectangleSelect)return!1;t=t||window.event;var i=DayPilot.Util.mouseButton(t);if(i.middle||i.right&&d.El(d.coords))return!1;if(d.El(d.coords))return!1;var a=i.left?"left":i.right?"right":i.middle?"middle":"unknown",o=t.ctrlKey,r=t.metaKey,l=t.shiftKey,s=o||r,c={};if(c.action="None","Disabled"!==d.multiSelectRectangle&&l?c.action="RectangleSelect":"Disabled"!==d.timeRangeSelectedHandling&&(c.action="TimeRangeSelect"),c.shift=l,c.ctrl=l,c.meta=r,c.originalEvent=t,c.button=a,c.preventDefault=function(){c.action="None"},"function"==typeof d.onGridMouseDown&&d.onGridMouseDown(c),"None"===c.action)return t.preventDefault(),t.stopPropagation(),!1;if("RectangleSelect"===c.action){var h={};return h.start=d.coords,h.calendar=d,n.rectangleSelect=h,!1}d.allowMultiRange&&!s&&M.clear();var u=d.wi(d.coords.y).i;return!d.rowlist[u].isNewRow&&(n.range=d.xl(),n.range&&(n.range.ctrl=s,n.rangeCalendar=d),!1)}},this.xl=function(){var t={},e=this.rh(d.coords.x).x;return t.start={y:d.wi(d.coords.y).i,x:e},t.end={x:e},this.Di(d.wi(d.coords.y).i)?null:(t.calendar=d,d.$h(t),t)},this.Hj=function(){d.Uc();var t=n.resizingShadow,e=n.resizing;!function(){var i=d.Gl,a={start:t.start,end:d.vf(t.end)};t.original=a;var o=t.original;if(!o||!i||i.start!==o.start||i.end!==d.vf(o.end)){var r={};r.start=a.start,r.end=a.end,r.duration=new DayPilot.Duration(r.start,r.end),r.e=e.event,r.allowed=!0,r.resizing="left"===n.resizing.dpBorder?"start":"end",r.left={},r.left.html=r.start.toString(d.eventResizingStartEndFormat,R.locale()),r.left.enabled=d.eventResizingStartEndEnabled,r.left.space=5,r.left.width=null,r.right={},r.right.html=r.end.toString(d.eventResizingStartEndFormat,R.locale()),r.right.enabled=d.eventResizingStartEndEnabled,r.right.space=5,r.right.width=null,r.multiresize=DayPilot.list(y.list);var l={};l.event=e,l.start=r.start,l.end=r.end,r.multiresize.splice(0,0,l),d.Gl=a,"function"==typeof d.onEventResizing&&d.onEventResizing(r),t.allowed=r.allowed;var s=r.start,c=d.We(r.end);if(t.finalStart=s,t.finalEnd=c,"Days"===d.viewType){var h=e.event.part.dayIndex,u=d.rowlist[h].start.getTime()-d.Fa().getTime();s=s.addTime(-u),c=c.addTime(-u)}var v=DayPilot.DateUtil.diff(s,c);v=Math.max(v,1);var f=R.useBox(v),p=f?d.getPixels(s).boxLeft:d.getPixels(s).left,g=f?d.getPixels(c).boxRight:d.getPixels(c).left;t.style.left=p+"px",t.style.width=g-p+"px",t.left=p,t.width=g-p,d.Ij(n.resizingShadow,r),d.Jj(n.resizingShadow,r)}}()},this.bl=function(t){if(n.rectangleSelect)return(t=t||window.event).cancelBubble=!0,t.preventDefault&&t.preventDefault(),n.gMouseUp(t),!1;if(C={},d.rangeHold&&DayPilot.Util.mouseButton(t).left){var e=d.rangeHold;if(d.El(d.coords)){var i=function(t){return function(){n.timeRangeTimeout=null;var e=d.Yh(t);if(e){var i={};i.start=e.start,i.end=e.end,i.resource=e.resource,i.preventDefault=function(){i.preventDefault.value=!0},"function"==typeof d.onTimeRangeClick&&d.onTimeRangeClick(i),i.preventDefault.value||"function"==typeof d.onTimeRangeClicked&&d.onTimeRangeClicked(i)}}};"Disabled"!=d.timeRangeClickHandling&&("Disabled"===d.timeRangeDoubleClickHandling?i(e)():(clearTimeout(n.timeRangeTimeout),n.timeRangeTimeout=setTimeout(i(e),d.doubleClickTimeout)))}}},this.Hl=function(){return n.resizing||n.moving||n.range},this.vl=function(t){var e=DayPilot.mo3(d.Jg,t);d.coords&&d.coords.x===e.x&&d.coords.y===e.y||(d.coords=e)},this.Nj=function(t){if(!DayPilot.Global.touch.active){n.activeCalendar=d,t=t||window.event;var e=DayPilot.mc(t);if(d.vl(t),t.insideMainD=!0,window.event&&window.event.srcElement&&(window.event.srcElement.inside=!0),C.start&&DayPilot.distance(C.originalMouse,e)>3&&(DayPilot.Util.copyProps(C,n),document.body.style.cursor="move",C={}),n.resizing&&n.resizingEvent.calendar===d)n.resizing.event||(n.resizing.event=n.resizingEvent),d.Il();else if(n.movingEvent&&(n.movingEvent.calendar===d||n.movingEvent.calendar.dragOutAllowed))d.Jl();else if(n.range&&n.range.calendar===d)n.range.moved=!0,d.Kl();else if(o.source){var i=o.source;v.drawShadow(i.coords,d.coords)}else n.rectangleSelect&&(n.rectangleSelect.moved=!0,E.draw());"Disabled"!==d.crosshairType&&d.Ll(),d.Ml();var a=d.coords.insideEvent;if(d.cellBubble&&d.coords&&d.rowlist&&d.rowlist.length>0&&!a){var r=d.rh(d.coords.x).x;if(0<=(H=d.wi(d.coords.y).i)&&H<d.rowlist.length&&0<=r&&r<d.itline.length){var l={};l.calendar=d,l.start=d.itline[r].start,l.end=d.itline[r].end,l.resource=d.rowlist[H].id,l.toJSON=function(){var t={};return t.start=this.start,t.end=this.end,t.resource=this.resource,t},d.cellBubble.showCell(l)}}if(n.drag){if(d.Fl(),n.gShadow&&document.body.removeChild(n.gShadow),n.gShadow=null,!n.movingShadow&&d.coords&&d.rowlist.length>0){if(!n.movingEvent){n.moving=n.drag.schedulerSourceEvent||{};var c=n.drag.event;if(c){if(d!==c.calendar){var u=c.calendar,f=c,p=DayPilot.Util.copyProps(c.data);(c=new DayPilot.Event(p)).calendar=u,c.part.duration=u.ej(f)}}else{var g=d.itline[0].start,y=(t={id:n.drag.id,start:g,end:g.addSeconds(n.drag.duration),text:n.drag.text},n.drag.data);if(y){var m=["duration","element","remove","duration","id","text"];for(var b in y)DayPilot.contains(m,b)||(t[b]=y[b])}(c=new DayPilot.Event(t)).calendar=d,c.part.duration=1e3*n.drag.duration}c.part.external=!0,(i=n.drag.schedulerSourceEvent)&&i.event&&i.event.calendar===d&&(c.part.external=!1),n.moving.event?c.part.external&&(n.moving.event.part.external=!0):n.moving.event=c,n.movingEvent=c}n.movingShadow=d.ya(n.movingEvent)}t.cancelBubble=!0}if("Always"===d.autoScroll||"Drag"===d.autoScroll&&(n.moving||n.resizing||n.range||n.rectangleSelect)){var w=d.nav.scroll,D={x:d.coords.x,y:d.coords.y};D.x-=w.scrollLeft,D.x+=h.shiftX,D.y-=w.scrollTop;var P=w.clientWidth,x=w.clientHeight,k=D.x<30?D.x:0,S=P-D.x<30?P-D.x:0,T=D.y<30?D.y:0,M=x-D.y<30?x-D.y:0,H=(r=0,0);k&&(r=-50*s(k,30)),S&&(r=50*s(S,30)),T&&(H=-50*s(T,30)/2),M&&(H=50*s(T,30)/2),(n.resizing||n.range)&&(H=0),r||H?d.Nl(r,H):d.$k()}}},this.Kl=function(){var t=n.range;t.end={x:d.rh(d.coords.x).x},d.$h(t)},this.Il=function(){n.resizingShadow||(n.resizingShadow=d.ya(n.resizing)),d.Gj()},this.Jl=function(){if(n.movingShadow&&n.movingShadow.calendar!==d&&(n.movingShadow.calendar=null,DayPilot.de(n.movingShadow),n.movingShadow=null),!n.movingShadow){window.navigator.userAgent.indexOf("Chrome/61.0")>-1||DayPilot.Util.addClass(n.moving,d.q(T.eventMovingSource));var t=n.movingEvent;n.movingShadow=d.ya(t)}d.nj(),d.pj()},this.Ol={};var E=this.Ol;E.start=function(){var t={};t.start=d.coords,t.calendar=d,n.rectangleSelect=t},E.draw=function(){var t=n.rectangleSelect,e=n.rectangleSelect.start,i=d.coords;E.clear();var a,o,r,l,s,h,u,v,f=t.x,p=t.y,g=t.width,y=t.height;if(s=Math.min(e.x,i.x),u=Math.max(e.x,i.x),"Free"===d.multiSelectRectangle?(h=Math.min(e.y,i.y),v=Math.max(e.y,i.y)):"Row"===d.multiSelectRectangle&&(h=e.y,v=e.y),"Free"===d.multiSelectRectangle)a=s,o=h,r=u-s,l=v-h;else{if("Row"!==d.multiSelectRectangle)throw"Invalid DayPilot.Scheduler.multiSelectRectangle value: "+d.multiSelectRectangle;var m=d.wi(h).i,b=d.rowlist[m];o=b.top,l=b.height,a=d.rh(s).cell.left;var w=d.rh(u).cell;r=w.left+w.width-a}var D=DayPilot.Util.div(d.divRectangle,a,o,r,l);if(D.style.boxSizing="border-box",D.style.backgroundColor="#0000ff",D.style.border="1px solid #000033",D.style.opacity=.4,t.x=a,t.y=o,t.width=r,t.height=l,(t.x!==f||t.y!==p||t.width!==g||t.height!==y)&&"function"==typeof d.onRectangleEventSelecting){var P={};P.events=c.eventsInRectangle(t.x,t.y,t.width,t.height).map(function(t){return t.event}),P.start=d.getDate(t.x,!0),P.end=d.getDate(t.x+t.width,!0),d.onRectangleEventSelecting(P)}},E.clear=function(){d.divRectangle.innerHTML="",d.elements.rectangle=[]},this.Pl=function(){var t,e;return d.coords&&d.rowlist&&d.rowlist.length>0&&d.itline&&d.itline.length>0?(t=d.rh(d.coords.x).x,(e=d.wi(d.coords.y).i)>=d.rowlist.length?void 0:d.cells.findXy(t,e)[0]):null},this.Ml=function(){var t=this.Pl();if(this.hover.cell){if(this.hover.cell.x===t.x&&this.hover.cell.y===t.y)return;this._k()}if(this.hover.cell=t,"function"==typeof this.onCellMouseOver){var e={};e.cell=t,this.onCellMouseOver(e)}},this._k=function(){if(this.hover.cell){if("function"==typeof this.onCellMouseOut){var t={};t.cell=this.hover.cell,this.onCellMouseOut(t)}this.hover.cell=null}},this.hover={},this.Ll=function(){var t=this.Pl();t&&(this.hover.cell&&this.hover.cell.x===t.x&&this.hover.cell.y===t.y||this.Tc())},this.Fl=function(){this.divCrosshair.innerHTML="",this.Ql=null,this.Rl=null},this.W=function(){if(this.Fl(),this.Sl&&this.Sl.parentNode&&(this.Sl.parentNode.removeChild(this.Sl),this.Sl=null),this.Tl){for(var t=0;t<this.Tl.length;t++){var e=this.Tl[t];e.parentNode&&e.parentNode.removeChild(e)}this.Tl=null}this.hg=-1,this.gg=-1},this.Tc=function(){var t,e;if(d.coords&&d.rowlist&&d.rowlist.length>0&&(t=d.rh(d.coords.x).x,!((e=d.wi(d.coords.y).i)>=d.rowlist.length))){var i=this.crosshairType,n=d.rowlist[e];if("Full"===i){var a=this.itline[t],o=a.left;if(!(p=this.Ql))(p=document.createElement("div")).style.height=d.ig+"px",p.style.position="absolute",p.style.top="0px",p.className=d.q("_crosshair_vertical"),this.Ql=p,this.divCrosshair.appendChild(p);p.style.left=o+"px",p.style.width=a.width+"px";var r=n.top,l=n.height,s=this.Xg();if(!(p=this.Rl))(p=document.createElement("div")).style.width=s+"px",p.style.height=l+"px",p.style.position="absolute",p.style.top=r+"px",p.style.left="0px",p.className=d.q("_crosshair_horizontal"),this.Rl=p,this.divCrosshair.appendChild(p);p.style.top=r+"px",p.style.height=l+"px"}var c=this.Ul(this.coords.x);if(c&&this.hg!==c.x){this.Sl&&this.Sl.parentNode&&(this.Sl.parentNode.removeChild(this.Sl),this.Sl=null);l=B.timeHeader(d.timeHeaders.length-1).height;(p=document.createElement("div")).style.width=c.cell.width+"px",p.style.height=l+"px",p.style.left="0px",p.style.top="0px",p.style.position="absolute",p.className=d.q("_crosshair_top"),this.Sl=p;var h=this.divNorth,u=this.timeHeader?this.timeHeader.length-1:1;this.nav.timeHeader?this.u.timeHeader[c.x+"_"+u].appendChild(p):h.firstChild.rows[u].cells[t]&&h.firstChild.rows[u].cells[t].firstChild.appendChild(p)}if(this.gg!==e){if(this.Tl){for(var v=0;v<this.Tl.length;v++){var f=this.Tl[v];f.parentNode&&f.parentNode.removeChild(f)}this.Tl=null}if(!this.rowHeaderCols||this.rowHeaderCols.length,this.Tl=[],this.divHeader.rows[e])for(v=0;v<this.divHeader.rows[e].cells.length;v++){var p;s=d.$g();(p=document.createElement("div")).style.width=s+"px",p.style.height=n.height+"px",p.style.left="0px",p.style.top="0px",p.style.position="absolute",p.className=d.q("_crosshair_left"),this.Tl.push(p),this.divHeader.rows[e].cells[v].firstChild.appendChild(p)}}c&&(this.hg=c.x),this.gg=e}},this.wj=function(t,e){var i=d.timeHeader[t];if(!i)return null;for(var n=0;n<i.length;n++){var a=i[n];if(e>=a.left&&e<a.left+a.width){var o={};return o.cell=a,o.x=n,o}}return null},this.Ul=function(t){return d.wj(d.timeHeader.length-1,t)},this.cl=function(t,e){if(t=t||window.event,"Disabled"===d.timeRangeSelectedHandling)return!1;if("Disabled"===d.timeRangeRightClickHandling)return!1;var i=null;if(i=d.El(d.coords)?d.Yh(d.rangeHold):d.Yh()){i.end=d.vf(i.end);var n={};return n.start=i.start,n.end=i.end,n.resource=i.resource,n.ctrl=t.ctrlKey,n.shift=t.shiftKey,n.meta=t.metaKey,n.preventDefault=function(){this.preventDefault.value=!0},("function"!=typeof d.onTimeRangeRightClick||(d.onTimeRangeRightClick(n),!n.preventDefault.value))&&("ContextMenu"===d.timeRangeRightClickHandling&&d.contextMenuSelection&&d.contextMenuSelection.show(i),"function"==typeof d.onTimeRangeRightClicked&&d.onTimeRangeRightClicked(n),t.cancelBubble=!0,!!d.allowDefaultContextMenu&&void 0)}},this.El=function(t){var e=d.rangeHold;if(!e||!e.start||!e.end)return!1;var i=this.Ii(e.start.y),n=e.start.x<e.end.x,a=(n?e.start.x:e.end.x)*this.cellWidth,o=(n?e.end.x:e.start.x)*this.cellWidth+this.cellWidth,r=i.top,l=i.bottom;return t.x>=a&&t.x<=o&&t.y>=r&&t.y<=l},this.$h=function(t,e){(t=t||n.range)&&t.calendar===d&&function(){var i=t.end.x>t.start.x?t.start.x:t.end.x,n=t.end.x>t.start.x?t.end.x:t.start.x,a=t.start.y,o=d.rowlist[a];if(o){var r=d.itline[i],l=d.itline[n],s=d.Vl,c=r.start.addTime(o.data.offset),h=l.end.addTime(o.data.offset);if(e||!s||s.start.getTime()!==c.getTime()||s.end.getTime()!==h.getTime()||s.resource!==d.rowlist[a].id){var u={start:c,end:d.vf(h)},v={};v.start=u.start,v.end=u.end,v.duration=new DayPilot.Duration(u.start,u.end),v.resource=d.rowlist[a].id,v.allowed=!0,v.left={},v.left.html=v.start.toString(d.timeRangeSelectingStartEndFormat,R.locale()),v.left.enabled=d.timeRangeSelectingStartEndEnabled,v.left.space=5,v.left.width=null,v.right={},v.right.html=v.end.toString(d.timeRangeSelectingStartEndFormat,R.locale()),v.right.enabled=d.timeRangeSelectingStartEndEnabled,v.right.space=5,v.right.width=null,d.Vl=v,"function"!=typeof d.onTimeRangeSelecting||e||d.onTimeRangeSelecting(v);var f=d.Wl(t);d.Zh(f,v.start,v.end);var p=function(t){var e=t.end.x>t.start.x?t.start.x:t.end.x,i=t.end.x>t.start.x?t.end.x:t.start.x,n=t.start.y,a=(d.rowlist[n],d.itline[e]),o=d.itline[i],r=a.left,l=o.left+o.width-r,s=d.elements.range2;if(!s){(s=document.createElement("div")).style.position="absolute",s.setAttribute("unselectable","on"),s.className=d.q("_shadow");var c=document.createElement("div");c.className=d.q("_shadow_inner"),s.appendChild(c),d.divRange.appendChild(s)}return s.style.left=a.left+"px",s.style.top=d.rowlist[n].top+"px",s.style.width=l+"px",s.style.height=d.rowlist[n].height-1+"px",s.calendar=d,d.elements.range2=s,function(){s.overlapping=!1;var t=d.rowlist[n],e=a.left;d.Cj(s,t,e,l,null),d.Dj(s,a.start,o.end,t.id)}(),s}(f);d.Ij(p,v),t.zl=f,t.disabled=!v.allowed,d.Jj(p,v),v.start=u.start,v.end=u.end}}}()},this.Wl=function(t){return{start:{x:t.start.x,y:t.start.y},end:{x:t.end.x},disabled:t.disabled,calendar:t.calendar}},this.range={},this.range.all=function(){return M.get()},this.Xl={};var M=this.Xl;this.Xl.list=[],this.Xl.clear=function(){DayPilot.de(DayPilot.list(M.list).map(function(t){return t.div})),M.list=[]},this.Xl.add=function(t){t.div=d.elements.range2,d.elements.range2=null,d.Mj(),M.list.push(t)},this.Xl.get=function(){return DayPilot.list(M.list).map(function(t){return d.Yh(t)})},this.Xl.dispatch=function(){if(d.allowMultiRange&&!n.range){var t=DayPilot.list(M.list).last();d.Xh(t)}},this.Yl=function(t){if("Disabled"===d.timeRangeSelectedHandling)return!1;if(!DayPilot.Global.touch.active&&!DayPilot.Global.touch.start){t=t||window.event;var e=DayPilot.Util.mouseButton(t);if(!n.range&&!n.rectangleSelect&&!(d.rangeHold&&d.El(d.coords)&&(e.right||e.middle)||d.Di(d.wi(d.coords.y).i))){var i={},a=d.rh(d.coords.x).x;i.start={y:d.wi(d.coords.y).i,x:a},i.end={x:a},i.calendar=d,d.rangeHold=i,d.Xh(i)}}},this.timeouts={},this.timeouts.drawEvents=null,this.timeouts.drawCells=null,this.timeouts.click=null,this.timeouts.resClick=[],this.timeouts.updateFloats=null,this.Eg=function(t){d.mg();var e,i,n=d.nav.scroll;if(d.uj=n.scrollLeft,d.sj=n.scrollTop,d.vj=n.clientWidth,d.divTimeScroll.scrollLeft=d.uj,d.divResScroll.scrollTop=d.sj,h.isEnabled()&&d.B&&"Auto"!=d.cellWidthSpec)if(h.active);else{if(d.nav.scroll.scrollLeft<d.infiniteScrollingMargin)return h.active=!0,d.nav.scroll.style.overflowX="hidden",void setTimeout(function(){h.shiftStart(-d.infiniteScrollingStepDays)},100);if(d.nav.scroll.scrollWidth-(d.nav.scroll.scrollLeft+d.nav.scroll.clientWidth)<d.infiniteScrollingMargin)return h.active=!0,d.nav.scroll.style.overflowX="hidden",void setTimeout(function(){h.shiftStart(d.infiniteScrollingStepDays)},100)}return d.navigatorBackSync&&(e=DayPilot.Util.evalVariable(d.navigatorBackSync),i=d.getViewPort().start,e.select(i,{dontNotify:!0,dontFocus:!0})),d.timeouts.drawCells&&(clearTimeout(d.timeouts.drawCells),d.timeouts.drawCells=null),d.scrollDelayCells>0?d.timeouts.drawCells=setTimeout(d.Zl(),d.scrollDelayCells):d.Zl()(),d.dynamicLoading?(d.Mf(),void d.$l()):(d.timeouts.drawEvents&&(clearTimeout(d.timeouts.drawEvents),d.timeouts.drawEvents=null),d.scrollDelayEvents>0?d.timeouts.drawEvents=setTimeout(d._l(),d.scrollDelayEvents):d.sa(),d.timeouts.updateFloats&&(clearTimeout(d.timeouts.updateFloats),d.timeouts.updateFloats=null),d.scrollDelayFloats>0?d.timeouts.updateFloats=setTimeout(function(){d.Cg()},d.scrollDelayFloats):d.Cg(),void(d.onScrollCalled=!0))},this.Zl=function(){return function(){d&&(d.Mf(),d.yg())}},this._l=function(){return function(){d&&(d.nl()?window.setTimeout(function(){d.kl(),window.setTimeout(function(){d.sa(!0)},50)},50):d.Rg())}},this.mg=function(){this.u.eventHeight=null,this.u.drawArea=null},this.show=function(){this.visible=!0,this.kg=!0,d.nav.top.style.display="",this.ra(),this.tg(),this.Vi(),d.Eg()},this.hide=function(){this.visible=!1,this.kg=!1,d.nav.top.style.display="none"},this.bm=function(){},this.$l=function(){var t=d.nav.scroll;d.uj=t.scrollLeft,d.sj=t.scrollTop,d.vj=t.clientWidth,d.divTimeScroll.scrollLeft=d.uj,d.divResScroll.scrollTop=d.sj,d.refreshTimeout&&window.clearTimeout(d.refreshTimeout);var e=d.scrollDelayDynamic;d.refreshTimeout=window.setTimeout(d.cm(t.scrollLeft,t.scrollTop),e),d.Cg()},this.Ri=function(t){if(!d.events.list)return null;for(var e=0;e<this.events.list.length;e++){var i=this.events.list[e];if(d.vd(i,t)){var n={};return n.ex=i,n.index=e,n.modified=!d.dm(t,i),n}}return null},this.dm=function(t,e){for(var i in t)if(("object"!=typeof t[i]||t[i]instanceof DayPilot.Date)&&t[i]!==e[i])return!1;for(var i in e)if("object"!=typeof e[i]&&t[i]!==e[i])return!1;return!0},this.Ag=function(t,e,i){var n=i.clearEvents,a=i.remove,o=[];if(n)d.fa(t);else{var r=[];DayPilot.list(a).forEach(function(t){var e=DayPilot.list(d.events.list).find(function(e){return e.id===t});e&&r.push(e)}),r.forEach(function(t){var e=d.events.Ah(t);o=o.concat(e)});for(var l=[],s=0;s<t.length;s++){var c=t[s];l[s]=d.Ri(c)}for(s=0;s<t.length;s++){c=t[s];var h=l[s],u=h&&h.modified,v=!h;if(u){this.events.list[h.index]=c;var f=d.events.Ah(h.ex);o=o.concat(f)}else v&&this.events.list.push(c);(u||v)&&(o=o.concat(d.events.Bh(c)))}d.Ch(o),d.Dh()}d.sg(),d.na(),n||i.dontForceCellRendering?(d.P(),d.ug(),d.sa()):d.Eh(o,!1,function(){e&&e(),d.kl(),d.sa()})},this.cm=function(t,e){return d.s()?function(){d.scrollX=t,d.scrollY=e,d.I("Scroll")}:function(){if("function"==typeof d.onScroll){var t=function(t){d.Ag(t.events,function(){if(d.xa()&&"function"==typeof d.onAfterRender){var t={isCallBack:!1,isScroll:!0,data:null};d.onAfterRender(t)}},t)},e={};e.viewport=d.getViewPort(),e.async=!1,e.events=[],e.remove=[],e.clearEvents=!1,e.dontForceCellRendering=!1,e.loaded=function(){this.async&&t(e)},d.onScroll(e),e.async||t(e)}}},this.em=function(){var t=this.Og(),e=t.xStart,i=t.xEnd-t.xStart,n=t.yStart,a=t.yEnd-t.yStart;this.cellProperties||(this.cellProperties={});for(var o=0;o<=i;o++){for(var r=e+o,l=0;l<a;l++){var s=n+l;this.rowlist[s].hidden||this.rf(r,s)}this.fm(r)}var d=this.Qj();for(s=d.start;s<d.end;s++)this.rowlist[s].hidden||this.gm(s)},this.yg=function(){if(!d.zd){if(d.progressiveRowRendering&&this.Jh(),null!==this.rowlist&&this.rowlist.length>0){if(this.cellSweeping){var t=this.cellSweepingCacheSize;this.ml(t)}this.em(),this.hm(),D.lk()}this.Rh=!1}},this.hm=function(){for(var t=this.Og(),e=t.xStart;e<t.xEnd;e++)e<this.itline.length-1&&this.itline[e+1].breakBefore&&this.im(e)},this.im=function(t){var e="x"+t;if(!this.u.breaks[e]){var i=this.itline[t+1].left-1,n=this.ig,a=document.createElement("div");a.style.left=i+"px",a.style.top="0px",a.style.width="1px",a.style.height=n+"px",a.style.fontSize="1px",a.style.lineHeight="1px",a.style.overflow="hidden",a.style.position="absolute",a.setAttribute("unselectable","on"),a.className=this.q("_matrix_vertical_break"),this.divBreaks.appendChild(a),this.elements.breaks.push(a),this.u.breaks[e]=a}},this.Og=function(){if(d.u.drawArea)return d.u.drawArea;if(!this.nav.scroll)return null;var t=d.sj,e={},i=null!=this.dynamicEventRenderingMarginX?this.dynamicEventRenderingMarginX:this.dynamicEventRenderingMargin,n=null!=this.dynamicEventRenderingMarginY?this.dynamicEventRenderingMarginY:this.dynamicEventRenderingMargin,a=d.uj-i-h.shiftX,o=a+d.vj+2*i,r=0,l=0;if(d.itline&&d.itline.length>0){r=d.rh(a).x,l=d.rh(o,!0).x;var s=this.tj();l=Math.min(l,s),r=Math.max(r,0)}var c=t-n,u=t+this.nav.scroll.offsetHeight+2*n,v=this.wi(c).i,f=this.wi(u).i;return f<this.rowlist.length&&f++,e.xStart=r,e.xEnd=l,e.yStart=v,e.yEnd=f,e.pixels={},e.pixels.left=this.nav.scroll.scrollLeft-h.shiftX,e.pixels.right=this.nav.scroll.scrollLeft-h.shiftX+this.nav.scroll.clientWidth,e.pixels.top=this.nav.scroll.scrollTop,e.pixels.bottom=this.nav.scroll.scrollTop+this.nav.scroll.clientHeight,e.pixels.width=this.nav.scroll.scrollWidth,d.u.drawArea=e,e},this.Xg=function(){var t=0,e=this.itline[this.itline.length-1];return((t=e?e.left+e.width:0)<0||isNaN(t))&&(t=0),t},this.gm=function(t){var e="y"+t;if(!this.u.linesHorizontal[e]){var i=this.rowlist[t].top+this.rowlist[t].height-1,n=this.Xg(),a=document.createElement("div");a.style.left="0px",a.style.top=i+"px",a.style.width=n+"px",a.style.height="1px",a.style.fontSize="1px",a.style.lineHeight="1px",a.style.overflow="hidden",a.style.position="absolute",a.setAttribute("unselectable","on"),a.className=this.q("_matrix_horizontal_line"),this.divLines.appendChild(a),this.u.linesHorizontal[e]=a}},this.fm=function(t){var e=this.itline[t];if(e){var i="x"+t;if(!this.u.linesVertical[i]){var n=e.left+e.width-1,a=document.createElement("div");a.style.left=n+"px",a.style.top="0px",a.style.width="1px",a.style.height=d.ig+"px",a.style.fontSize="1px",a.style.lineHeight="1px",a.style.overflow="hidden",a.style.position="absolute",a.setAttribute("unselectable","on"),a.className=this.q("_matrix_vertical_line"),this.divLines.appendChild(a),this.elements.linesVertical.push(a),this.u.linesVertical[i]=a}}},this.oj=function(t){d.Fg.skip=!0;var e=this.rowlist[t],i=!e.expanded;e.expanded=i,e.resource&&(e.resource.expanded=i);var n=this.jm(t,e.expanded);if(!i)for(var a=0;a<n.length;a++){var o=n[a];this.Sh(o)}this.sg(),this.qg(),this.na(),this.mg(),this.Uh(),v.load(),this.vg(),this.yg(),this.sa(),this.Mf(),this.mg();var r=this.ci(e,t);i?this.li(r):this.ki(r)},this.dk=function(t){var e={};if(e.index=t,"function"==typeof this.onLoadNode){var i={},n=this.rowlist[t].resource;i.resource=n,i.async=!1,i.loaded=function(){this.async&&(n.dynamicChildren=!1,n.expanded=!0,d.update())},this.onLoadNode(i),i.async||(n.dynamicChildren=!1,n.expanded=!0,this.update())}else this.I("LoadNode",e)},this.jm=function(t,e){var i=this.rowlist[t],n=[];if(null===i.children||0===i.children.length)return n;for(var a=0;a<i.children.length;a++){var o=i.children[a],r=this.rowlist[o],l=e&&i.expanded&&!r.Ck;r.hidden=!l,e===!r.hidden&&n.push(o);var s=this.jm(o,e);s.length>0&&(n=n.concat(s))}return n},this.Nl=function(t,e){this.$k(),this.km(t,e)},this.lm=function(t){if(!t)return!1;var e=this.nav.scroll.scrollWidth,i=this.nav.scroll.scrollLeft,n=this.nav.scroll.clientWidth;return!(t<0&&i<=0||t>0&&i+n>=e||(this.nav.scroll.scrollLeft+=t,d.coords.x+=t,d.mm(),0))},this.nm=function(t){if(!t)return!1;var e=this.nav.scroll.scrollHeight,i=this.nav.scroll.scrollTop,n=this.nav.scroll.clientHeight;return!(t<0&&i<=0||t>0&&i+n>=e||(this.nav.scroll.scrollTop+=t,d.coords.y+=t,d.mm(),0))},this.mm=function(){n.resizing&&n.resizing.event.calendar===d?d.Il():n.moving&&(n.movingEvent.calendar===d||n.movingEvent.calendar.dragOutAllowed)?(n.moving.event||(n.moving.event=n.movingEvent),d.Jl()):n.range&&n.range.calendar===d&&d.Kl()},this.km=function(t,e){if(this.lm(t)||this.nm(e)){this.om=window.setTimeout((i=t,n=e,function(){d.km(i,n)}),100)}var i,n},this.$k=function(){d.om&&(window.clearTimeout(d.om),d.om=null)},this.sg=function(){for(var t=0,e=0;e<this.rowlist.length;e++){var i=this.rowlist[e];i.hidden||(i.top=t,t+=i.height)}this.ig=t},this.vg=function(){DayPilot.browser.ie&&d.pm(),this.elements.cells=[],this.elements.breaks=[],this.u.cells=[],this.u.breaks=[],this.divCells.innerHTML="",this.divBreaks.innerHTML="",d.Yj()},this.Yj=function(){this.divLines.innerHTML="",this.u.linesVertical={},this.u.linesHorizontal={},this.elements.linesVertical=[]},this.pm=function(t){var e=DayPilot.list();for(var i in d.u.cells)e.push(d.u.cells[i]);e.each(function(t){d.Xi(t)})},this.Vh=function(t){var e=DayPilot.list();for(var i in d.u.cells)e.push(d.u.cells[i]);e.filter(function(e){return e&&e.coords&&e.coords.y===t}).each(function(t){d.Xi(t)})},this.qm=0,this.rm=DayPilot.list(["html","cssClass","backColor","backImage","backRepeat","areas","disabled"]),this.sm=d.rm.add("business"),this.rf=function(t,e){if(this.B){var i=d.xh(t);if(i){var n=t+"_"+e;if(!this.u.cells[n]){var a=this.Yi(t,e);if(d.yj(t,e),!this.drawBlankCells){var o=!1;if(this.lj(e)?o=!1:this.tm(a,d.rm)||(o=!0),o)return}var r=document.createElement("div");if(r.style.left=i.left+"px",r.style.top=this.rowlist[e].top+"px",r.style.width=i.width+"px",r.style.height=this.rowlist[e].height+"px",r.style.position="absolute",a&&a.backColor&&(r.style.backgroundColor=a.backColor),r.setAttribute("unselectable","on"),r.className=this.q("_cell"),r.coords={},r.coords.x=t,r.coords.y=e,this.lj(e)&&DayPilot.Util.addClass(r,this.q("_cellparent")),a){a.cssClass&&DayPilot.Util.addClass(r,a.cssClass),DayPilot.Util.isNullOrUndefined(a.html)||(r.innerHTML=a.html),a.backImage&&(r.style.backgroundImage='url("'+a.backImage+'")'),a.backRepeat&&(r.style.backgroundRepeat=a.backRepeat),a.business&&d.cellsMarkBusiness&&DayPilot.Util.addClass(r,d.q("_cell_business")),a.disabled&&DayPilot.Util.addClass(r,d.q("_cell_disabled")),DayPilot.list(a.areas).each(function(t){(t.start||t.end)&&(t.left=d.getPixels(new DayPilot.Date(t.start)).left-i.left,t.width=d.getPixels(new DayPilot.Date(t.end)).left-t.left-i.left)});var l=d.cells.findXy(t,e)[0];DayPilot.Areas.attach(r,l,{areas:a.areas})}var s=H.getCell();s&&s.x===t&&s.y===e&&DayPilot.Util.addClass(r,d.q("_cell_focus")),this.divCells.appendChild(r),this.elements.cells.push(r),this.u.cells[n]=r}}}},this.kh={},this.Vi=function(){d.um().each(function(t){d.Vh(t)}),d.yg()},this.um=function(){for(var t=DayPilot.list(),e=this.Og(),i=e.xStart,n=e.xEnd-e.xStart,a=e.yStart,o=e.yEnd-e.yStart,r=0;r<o;r++)for(var l=a+r,s=0;s<=n;s++){var c=i+s;if(!this.rowlist[l].hidden&&!d.kh[c+"_"+l]){t.push(l);break}}return t},this.yj=function(t,e){if("function"==typeof this.onBeforeCellRender){if(d.beforeCellRenderCaching&&d.kh[t+"_"+e])return;d.kh[t+"_"+e]=!0;var i=d.xh(t);if(!i)return;var n=d.cells.findXy(t,e)[0],a={};return a.cell=n,a.getPixels=function(t){t=new DayPilot.Date(t);return d.getPixels(t).left-i.left},this.onBeforeCellRender(a),DayPilot.Util.copyProps(a.cell,a.cell.properties,d.sm),a.cell.properties.disabled&&(d.kh.Kj=!0),a}},this.tm=function(t,e){if(e){for(var i=0;i<e.length;i++)if(!DayPilot.Util.isNullOrUndefined(t[e[i]]))return!0}else for(var n in t)if(!DayPilot.Util.isNullOrUndefined(t[n]))return!0;return!1},this.clearSelection=function(){this.Bg(),M.clear()},this.cleanSelection=this.clearSelection,this.selectTimeRange=function(t,e,i,n){var a=d.Mg(i),o=d.vh(t),r=o.current||o.next;if(!r)throw new DayPilot.Exception("Time range selection 'start' out of timeline");var l=d.vh(new DayPilot.Date(e).addMilliseconds(-1)),s=l.current||l.previous;if(!s)throw new DayPilot.Exception("Time range selection 'end' out of timeline");var c={};c.start={y:a.index,x:DayPilot.indexOf(d.itline,r)},c.end={x:DayPilot.indexOf(d.itline,s)},c.calendar=this,d.$h(c),n||setTimeout(function(){d.Xh(c)},0)},this.Wh=function(){DayPilot.de(n.movingShadow),n.movingShadow=null,d.Mj(),d.Fj.clear(),DayPilot.Global.movingLink&&(DayPilot.Global.movingLink.clear(),DayPilot.Global.movingLink=null)},this.Bg=function(){this.divRange.innerHTML='<div style="position:absolute; left:0px; top:0px; width:0px; height:0px;"></div>',this.elements.range=[],this.elements.range2=null,this.Mj(),d.rangeHold=null};var H={cell:null,focusCell:function(t,e){H.unfocusCell();var i=H.cellDiv(t,e);i&&DayPilot.Util.addClass(i,d.q("_cell_focus")),H.cell={x:t,y:e};var n=d.xi();if(n.start.x>=t){var a=d.itline[t].start;d.scrollTo(a)}else if(n.end.x<=t){var o=d.itline[t].end;d.scrollTo(o,!1,"right")}},unfocusCell:function(){if(H.cell){var t=H.cellDiv(H.cell.x,H.cell.y);t&&DayPilot.Util.removeClass(t,d.q("_cell_focus")),H.cell=null}},cellDiv:function(t,e){var i=t+"_"+e;return d.u.cells[i]},getCell:function(){return H.cell},target:function(){var t=d.temp.keyboardTarget;switch(t){case"component":return d.nav.top;case"document":return document}throw new DayPilot.Exception("Invalid keyboardTarget value: "+t)},vm:null,activateGrid:function(){var t=H.target();t!==document&&d.nav.top.setAttribute("tabindex","-1"),t.addEventListener("keyup",function(t){if(16===t.keyCode){var e=H.vm;H.vm=null,H.timeRangeSelect(e.start.x,e.start.y,e.end.x)}}),t.addEventListener("keydown",function(t){var e=37,i=38,n=39,a=40;-1!==[e,i,n,a].indexOf(t.keyCode)&&t.preventDefault(),t.shiftKey&&!H.vm&&(H.vm={calendar:d,start:{x:H.cell.x,y:H.cell.y}});var o=!H.vm;switch(t.keyCode){case n:H.cell.x<d.itline.length-1&&H.focusCell(H.cell.x+1,H.cell.y);break;case e:H.cell.x>0&&H.focusCell(H.cell.x-1,H.cell.y);break;case i:H.cell.y>0&&o&&H.focusCell(H.cell.x,H.cell.y-1);break;case a:H.cell.y<d.rowlist.length-1&&o&&H.focusCell(H.cell.x,H.cell.y+1);break;case 13:H.timeRangeSelect(H.cell.x,H.cell.y)}t.keyCode!==e&&t.keyCode!==n||H.vm&&(H.vm.end={x:H.cell.x,y:H.cell.y},d.$h(H.vm))})},timeRangeSelect:function(t,e,i){var n={};n.start={y:e,x:t},n.end={x:void 0===i?t:i},n.calendar=d,d.rangeHold=n,d.Xh(n)},initGrid:function(){H.activateGrid();var t=d.xi();H.focusCell(t.start.x,t.start.y),H.target()!==document&&d.nav.top.focus()}};this.wm=H,this.Ic={};var R=this.Ic;R.clearCache=function(){delete d.u.eventHeight,delete d.u.headerHeight},R.locale=function(){return DayPilot.Locale.find(d.locale)},R.timeFormat=function(){return"Auto"!==d.timeFormat?d.timeFormat:R.locale().timeFormat},R.weekStarts=function(){if("Auto"===d.weekStarts){var t=R.locale();return t?t.weekStarts:0}return d.weekStarts||0},R.layout=function(){var t=/MSIE 6/i.test(navigator.userAgent);return"Auto"===d.layout?t?"TableBased":"DivBased":d.layout},R.notifyType=function(){var t;if("Immediate"===d.notifyCommit)t="Notify";else{if("Queue"!==d.notifyCommit)throw"Invalid notifyCommit value: "+d.notifyCommit;t="Queue"}return t},R.isResourcesView=function(){return"Days"!==d.viewType},R.useBox=function(t){return"Always"===d.useEventBoxes||"Never"!==d.useEventBoxes&&t<60*d.cj()*1e3},R.eventHeight=function(){if(d.u.eventHeight)return d.u.eventHeight;var t=d.Cd("_event_height").height;return t||(t=d.eventHeight),d.u.eventHeight=t,t},R.headerHeight=function(){if(d.u.headerHeight)return d.u.headerHeight;var t=d.Cd("_header_height").height;return t||(t=d.headerHeight),d.u.headerHeight=t,t},R.splitterWidth=function(){return d.rowHeaderScrolling?d.rowHeaderSplitterWidth:1},this.xm={};var B=this.xm;B.timeHeader=function(t){for(var e={top:0,height:0},i=R.headerHeight(),n=0;n<=t;n++){var a=d.timeHeaders[n];e.top+=e.height,e.height=a.height||i}return e},this.Rc=function(t,e){var i=t+"_"+e;return this.cellProperties&&this.cellProperties[i]?this.cellProperties[i].backColor:null},this.Yi=function(t,e){var i=t+"_"+e;if(d.cellConfig)for(var n=0,a=0;a<d.resources.length;a++)if(!d.resources[a].hidden){if(n===e){e=a;break}n+=1}if(this.cellProperties||(this.cellProperties={}),this.cellProperties[i])return this.cellProperties[i];if(this.cg&&(this.cellProperties[i]=d.ym(t,e)),!this.cellProperties[i]){var o=d.rowlist[e],r=o.id,l=o.start.getTime()-d.Fa().getTime(),s=d.xh(t),c=s.start.addTime(l),h=s.end.addTime(l),u={};u.start=c,u.end=h,u.resource=r;var v={};v.business=d.isBusiness(u),o.cellsDisabled&&(d.kh.Kj=!0,v.disabled=!0),this.cellProperties[i]=v}return this.cellProperties[i]},this.zm=function(t,e,i){var n=e+"_"+i;return this.cellProperties[n]={},DayPilot.Util.copyProps(t,this.cellProperties[n],d.sm),this.cellProperties[n]},this.ym=function(t,e){if(!this.cellConfig)return null;var i=this.cellConfig,n=this.cellProperties[t+"_"+e];!n&&i.vertical&&(n=this.cellProperties[t+"_0"]),!n&&i.horizontal&&(n=this.cellProperties["0_"+e]),!n&&i.default&&(n=i.default);var a={};return DayPilot.Util.copyProps(n,a,d.sm),a},this.ea=function(){if(!this.cg&&!this.dg&&(this.dg=!0,this.cellConfig)){var t=this.cellConfig;if(t.vertical)for(var e=0;e<t.x;e++){if(n=this.cellProperties[e+"_0"])for(var i=1;i<t.y;i++)this.zm(n,e,i)}if(t.horizontal)for(i=0;i<t.y;i++){if(n=this.cellProperties["0_"+i])for(e=1;e<t.x;e++)this.zm(n,e,i)}if(t.default){var n=t.default;for(i=0;i<t.y;i++)for(e=0;e<t.x;e++)this.cellProperties[e+"_"+i]||this.zm(n,e,i)}}},this.isBusiness=function(t,e){var i=t.start,n=(t.end.getTime()-i.getTime())/6e4;if(n<=1440&&!(d.businessWeekends||e||0!==t.start.dayOfWeek()&&6!==t.start.dayOfWeek()))return!1;if(n<720){var a=i.getHours();if(a+=i.getMinutes()/60,a+=i.getSeconds()/3600,(a+=i.getMilliseconds()/36e5)<this.businessBeginsHour)return!1;if(this.businessEndsHour>=24)return!0;if(a>=this.businessEndsHour)return!1}return!0},this.jc=function(){switch(d.D){case"aspnet":if(!this.N())throw new DayPilot.Exception("ASP.NET WebForms environment required. https://doc.daypilot.org/common/asp-net-webforms-required/");break;case"netmvc":if(!this.backendUrl)throw new DayPilot.Exception("DayPilot.Scheduler.backendUrl required. https://doc.daypilot.org/common/backendurl-required-asp-net-mvc/");break;case"javaxx":if(!this.backendUrl)throw new DayPilot.Exception("DayPilot.Scheduler.backendUrl required. https://doc.daypilot.org/common/backendurl-required-java/")}},this.ra=function(){"hidden"===this.nav.top.style.visibility&&(this.nav.top.style.visibility="visible")},this.dd=function(){var t=d.nav.top;return!!t&&t.offsetWidth>0&&t.offsetHeight>0},this.ed=function(){var t=d.dd;t()||d.fd||(d.fd=setInterval(function(){t()&&(clearInterval(d.fd),d.show(),d.Sj())},100))},this.Am=function(t){"Parent100Pct"!==this.heightSpec&&(this.heightSpec="Fixed"),this.height=t-(this.Zg()+2),this.na()},this.setHeight=this.Am,this.Mg=function(t){return DayPilot.list(b.rowcache[t]).first()},this.Hd=function(){if(this.id&&this.id.tagName)this.nav.top=this.id;else{if("string"!=typeof this.id)throw"DayPilot.Scheduler() constructor requires the target element or its ID as a parameter";if(this.nav.top=document.getElementById(this.id),!this.nav.top)throw"DayPilot.Scheduler: The placeholder element not found: '"+t+"'."}},this.Bm=function(){this.xd(),this.pg(),this.tg(),this.hd(),this.T(),n.register(this),this.aa(this.afterRenderData,!1),this.hl(),this.wa(),this.I("Init")},this.init=function(){return this.jc(),this.Cm(),this.Dm(),this.ed(),this.Uk(),this.Em(),this},this.Em=function(){d.temp.keyboard&&H.initGrid()},this.Fm=function(){d.multiselect.xg(d.selectedEvents)},this.Dm=function(){if(this.Hd(),!this.nav.top.dp){if(this.Hk(),this.Gd())return this.Bm(),this.B=!0,void this.mg();this.hd(),this.T(),n.register(this),this.hl(),this.Fm(),this.Vb();var t=d.ud.scope||d.Fg.enabled;d.scrollToDate?d.scrollTo(d.scrollToDate):d.scrollX||d.scrollY?d.setScroll(d.scrollX,d.scrollY):t||d.Eg(),d.scrollToResourceId&&(d.scrollToResource(d.scrollToResourceId),d.scrollToResourceId=null);window.setTimeout(function(){d.scrollY&&d.setScroll(d.scrollX,d.scrollY)},200),this.messageHTML&&window.setTimeout(function(){d.message(d.messageHTML)},0),this.wa(),this.mg(),this.aa(this.afterRenderData,!1),d.initEventEnabled&&setTimeout(function(){d.I("Init")}),this.Jd(),this.B=!0,this.zi=!0;var e=d.Hg;e?d.scrollTo(e.date,e.animated,e.position):d.Eg()}},this.Cm=function(){d.s()&&delete d.infinite},this.Kd=null,this.Ad=function(t){if(t){var e={events:{preInit:function(){var t=this.data;t&&(DayPilot.isArray(t.list)?d.events.list=t.list:d.events.list=t)},postInit:function(){}},links:{preInit:function(){var t=this.data;t&&(DayPilot.isArray(t.list)?d.links.list=t.list:d.links.list=t)},postInit:function(){}},scrollTo:{preInit:function(){},postInit:function(){this.data&&d.scrollTo(this.data,t.scrollToAnimated,t.scrollToPosition)}},scrollX:{postInit:function(){this.data&&d.setScrollX(this.data)}},scrollY:{postInit:function(){this.data&&d.setScrollY(this.data)}}};d.Kd=e,d.Fg.scrollToRequested&&(e.scrollTo.data=d.Fg.scrollToRequested,d.Fg.scrollToRequested=null),d.Fg.scrollXRequested&&(e.scrollX.data=d.Fg.scrollXRequested,d.Fg.scrollXRequested=null),d.Fg.scrollYRequested&&(e.scrollY.data=d.Fg.scrollYRequested,d.Fg.scrollYRequested=null);for(var i in t)if(e[i]){var n=e[i];n.data=t[i],n.preInit&&n.preInit()}else d[i]=t[i]}},this.Jd=function(){var t=d.Kd;for(var e in t){var i=t[e];i.postInit&&i.postInit()}d.Kd={}},this.temp={},this.temp.getPosition=function(){var t=Math.floor(d.coords.x/d.cellWidth),e=d.wi(d.coords.y).i;if(e<d.rowlist.length){var i={};return i.start=d.itline[t].start,i.end=d.itline[t].end,i.resource=d.rowlist[e].id,i}return null},this.temp.keyboard=!1,this.temp.keyboardTarget="document",this.temp.allowDuplicateEventIds=!1,this.internal={},this.internal.initialized=function(){return d.B},this.internal.dragInProgress=this.Hl,this.internal.invokeEvent=this.Ua,this.internal.eventMenuClick=this.eb,this.internal.timeRangeMenuClick=this.fb,this.internal.resourceHeaderMenuClick=this.ai,this.internal.linkMenuClick=this._h,this.internal.bubbleCallBack=this.cb,this.internal.findEventDiv=this.td,this.internal.rowtools=this.ii,this.internal.getNodeChildren=this.Z,this.internal.callback=function(){d.I.apply(d,arguments)},this.internal.createRowObject=this.ci,this.internal.restools=this.wk,this.internal.gantt=null,this.internal.adjustEndIn=d.We,this.internal.adjustEndNormalize=d.xf,this.internal.touch=d.gc,this.internal.cssNames=d.yl,this.internal.enableCellStacking=function(t){d.eg=!0,d.fg=t},this.internal.deleteDragSource=function(){d.ab()},this.internal.skipUpdate=d.Fg.skipUpdate,this.internal.skipped=d.Fg.skipped,this.internal.loadOptions=d.Ad,this.internal.postInit=d.Jd,this.internal.enableAngular2=function(){d.Fg.enabled=!0},this.Init=this.init,this.Ad(l)},"2018.4.3469"===(new DayPilot.Scheduler).v,DayPilot.Row=function(t,e){if(!t)throw"Now row object supplied when creating DayPilot.Row";if(!e)throw"No parent control supplied when creating DayPilot.Row";var i=DayPilot.indexOf(e.rowlist,t);this.Gm={};var n=this.Gm;n.id=t.id,n.name=t.name,n.data=t.resource,n.tags=t.tags;var a=this;a.isRow=!0,a.menuType="resource",a.start=t.start,a.name=t.name,a.value=t.id,a.id=t.id,a.tags=t.tags,a.bubbleHtml=t.bubbleHtml,a.index=i,a.level=t.level,a.calendar=e,a.data=t.resource,a.Hm=t,a.$={},a.$.row=t,a.toJSON=function(t){var e={};return e.start=this.start,e.name=this.name,e.value=this.value,e.id=this.id,e.index=this.index,e},a.parent=function(){return a.Hm.Dk?e.ci(a.Hm.Dk):null},a.children=function(){var t=DayPilot.list(a.$.row.children).map(function(t){return e.ci(e.rowlist[t])});return t.add=function(t){var e=a.$.row.resource;e.children||(e.children=[]),e.children.push(t)},t},a.loaded=function(){return a.Hm.loaded},a.cells={},a.cells.all=function(){for(var t=[],i=e.itline.length,n=a.index,o=0;o<i;o++){var r=e.cells.findXy(o,n);t.push(r[0])}return e.Zi(t)},a.cells.forRange=function(t,i){var n=a.start.getTime()-e.Fa().getTime();t=new DayPilot.Date(t),i=new DayPilot.Date(i);var o=e.Fa().addTime(n),r=e.nh().addTime(n);t<o&&(t=o),i>r&&(i=r);var l=e.cells.find(t,a.id)[0],s=e.cells.find(i.addTime(-1),a.id)[0];if(!l)return null;if(!s)return null;if(l.y!==s.y)return null;for(var d=l.y,c=[],h=l.x;h<=s.x;h++)c.push(e.cells.Wi(h,d));return e.Zi(c)},a.cells.totalDuration=function(){return new DayPilot.Duration(a.cells.all().map(function(t){return t.end.getTime()-t.start.getTime()}).reduce(function(t,e){return t+e},0))},a.events={},a.events.all=function(){for(var t=DayPilot.list(),e=0;e<a.Hm.events.length;e++)t.push(a.Hm.events[e]);return t},a.events.isEmpty=function(){return 0===a.Hm.events.length},a.events.forRange=function(t,e){return a.Hm.events.forRange(t,e)},a.events.totalDuration=function(){var t=0;return a.events.all().each(function(e){t+=e.part.end.getTime()-e.part.start.getTime()}),new DayPilot.Duration(t)},a.groups={},a.groups.collapseAll=function(){for(var t=0;t<a.Hm.blocks.length;t++)new o(a.Hm.blocks[t]).Im();e.Dh(),e.Eh(a.index),e.na()},a.groups.expandAll=function(){for(var t=0;t<a.Hm.blocks.length;t++)new o(a.Hm.blocks[t]).Jm();e.Dh(),e.Eh(a.index),e.na()},a.groups.expanded=function(){for(var t=[],i=0;i<a.Hm.blocks.length;i++){var n=a.Hm.blocks[i];n.expanded&&n.lines.length>e.groupConcurrentEventsLimit&&t.push(new o(n))}return DayPilot.list(t)},a.groups.collapsed=function(){for(var t=[],e=0;e<a.Hm.blocks.length;e++){var i=a.Hm.blocks[e];i.expanded||t.push(new o(i))}return DayPilot.list(t)},a.groups.all=function(){for(var t=[],e=0;e<a.Hm.blocks.length;e++){var i=a.Hm.blocks[e];t.push(new o(i))}return DayPilot.list(t)},a.events.collapseGroups=a.groups.collapseAll,a.events.expandGroups=a.groups.expandAll,a.column=function(t){return new r(a,t)},a.toggle=function(){e.oj(a.index)},a.collapse=function(){a.$.row.expanded&&a.toggle()},a.expand=function(){a.$.row.expanded||a.toggle()},a.remove=function(){e.rows.remove(a)},a.edit=function(){e.rows.edit(a)},a.addClass=function(t){var i=a;if(i=e.divHeader.rows[i.index]){var n=DayPilot.list(i.cells).map(function(t){return t.cellDiv});DayPilot.Util.addClass(n,t)}a.$.row.cssClass=DayPilot.Util.addClassToString(a.$.row.cssClass,t),a.data.cssClass=t},a.removeClass=function(t){var i=a;if(i=e.divHeader.rows[i.index]){var n=DayPilot.list(i.cells).map(function(t){return t.cellDiv});DayPilot.Util.removeClass(n,t)}a.$.row.cssClass=DayPilot.Util.removeClassFromString(a.$.row.cssClass,t),a.data.cssClass=DayPilot.Util.removeClassFromString(a.data.cssClass,t)};var o=function(t){this.Jm=function(){t.expanded=!0;var i=e.hk;DayPilot.list(t.events).each(function(t){i.push(t.id())});var n=function(t){for(var i=0;i<e.elements.events.length;i++){var n=e.elements.events[i];if(n.event===t)return n}return null}(t);if(n){e.jl(n);var a=DayPilot.indexOf(e.elements.events,n);-1!==a&&e.elements.events.splice(a,1)}},this.expand=function(){this.Jm(),e.Dh(),e.Eh(t.row.index),e.na()},this.Im=function(){if(t.lines.length>e.groupConcurrentEventsLimit){t.expanded=!1;var i=DayPilot.list(t.events).map(function(t){return t.id()});e.hk=e.hk.filter(function(t){return!DayPilot.contains(i,t)})}},this.collapse=function(){this.Im(),e.Dh(),e.Eh(t.row.index),e.na()}},r=function(t,e){this.html=function(i){var n=t.calendar.divHeader.rows[t.index].cells[e].textDiv;return void 0===i?n.innerHTML:void(n.innerHTML=i)}}},n.moving=null,n.movingEvent=null,n.originalMouse=null,n.resizing=null,n.resizingEvent=null,n.preventEventClick=!1,n.globalHandlers=!1,n.timeRangeTimeout=null,n.selectedCells=null,n.dragStart=function(t,e,i,a){DayPilot.us(t);var o=n.drag={};return o.element=t,o.duration=e,o.text=a,o.id=i,o.data={id:i,text:a,duration:e,externalHtml:a},!1},DayPilot.Scheduler.startDragging=function(t){var e=(t=t||{}).element,i=t.keepElement?null:e;DayPilot.us(e);var a=n.drag={};return a.element=i,a.id=t.id,a.duration=t.duration||60,a.text=t.text||"",a.data=t,!1},DayPilot.Scheduler.makeDraggable=function(t){function e(){var e=t.duration||60;e instanceof DayPilot.Duration&&(e=e.totalSeconds());var i=n.drag={};i.element=a,i.id=t.id,i.duration=e,i.text=t.text||"",i.data=t}var i=(t=t||{}).element,a=t.keepElement?null:t.remove||i;if(!i)throw new DayPilot.Exception("makeDraggable(options): options.element must be specified");DayPilot.us(i),DayPilot.re(i,"mousedown",function(t){if(DayPilot.Util.mouseButton(t).left){e();var i=t.target||t.srcElement;if(i.tagName){var n=i.tagName.toLowerCase();if("textarea"===n||"select"===n||"input"===n)return!1}return t.preventDefault&&t.preventDefault(),!1}}),i.ontouchstart=function(t){window.setTimeout(function(){e(),n.gTouchMove(t),t.preventDefault()},0),t.preventDefault()}},DayPilot.Scheduler.stopDragging=function(){if(n.drag&&n.drag.schedulerSourceEvent){var t=n.drag.schedulerSourceEvent,e=t.event.calendar;DayPilot.Util.removeClass(t,e.q(i.yl.eventMovingSource))}if(n.dragStop(),n.resizing&&(DayPilot.de(n.resizingShadow),n.resizing=null,n.resizingEvent=null,n.resizingShadow=null),n.moving){var i=n.movingEvent.calendar;DayPilot.Util.removeClass(n.moving,i.q(i.yl.eventMovingSource)),DayPilot.de(n.movingShadow),n.moving=null,n.movingEvent=null,n.movingShadow=null}n.range&&((i=n.range.calendar).clearSelection(),n.range=null);document.body.style.cursor="",DayPilot.list(n.registered).each(function(t){t.$k(),t.Mj(),t.ii.resetMoving()})},n.dragStop=function(){n.gShadow&&(document.body.removeChild(n.gShadow),n.gShadow=null),n.drag=null},n.register=function(t){n.registered||(n.registered=DayPilot.list(),n.registered.out=function(){n.registered.forEach(function(t){t.V()})});for(var e=0;e<n.registered.length;e++)if(n.registered[e]===t)return;n.registered.push(t)},n.unregister=function(t){var e=n.registered;if(e){var i=DayPilot.indexOf(e,t);-1!==i&&e.splice(i,1),0===e.length&&(e=null)}e||(DayPilot.ue(document,"mousemove",n.gMouseMove),DayPilot.ue(document,"mouseup",n.gMouseUp),DayPilot.ue(document,"mousedown",n.gMouseDown),DayPilot.ue(document,"touchmove",n.gTouchMove),DayPilot.ue(document,"touchend",n.gTouchEnd),DayPilot.ue(window,"keyup",n.gKeyUp),n.globalHandlers=!1)},n.gTouchMove=function(i){n.resizing&&((a=n.resizing.event.calendar).coords=a.gc.relativeCoords(i),a.gc.updateResizing(),i.preventDefault());n.moving&&!n.drag&&((a=n.movingEvent.calendar).coords=a.gc.relativeCoords(i),a.gc.updateMoving(),i.preventDefault(),function(){if(a.dragOutAllowed){var e=t(i);if(!e||e!==a){var o=n.movingEvent;n.drag={};var r=n.drag;r.id=o.id(),r.text=o.text(),r.schedulerSourceEvent=n.moving,r.element=null,r.duration=(o.rawend().getTime()-o.start().getTime())/1e3,r.text=o.text(),r.id=o.id(),r.event=DayPilot.Util.copyProps(o,new DayPilot.Event),a.Mj(),DayPilot.de(n.movingShadow),n.movingShadow.calendar=null,n.movingShadow=null,n.moveDragStart=null,n.registered.out()}}}());if(n.drag){i.preventDefault();var a,o=e(i);if(a=t(i)){if(n.gShadow&&document.body.removeChild(n.gShadow),n.gShadow=null,a.coords=a.gc.relativeCoords(i),!n.movingShadow&&a.rowlist.length>0){if(!n.moving){n.moving={};var r=n.drag.event;if(!r){var l=a.itline[0].start,s=(i={id:n.drag.id,start:l,end:l.addSeconds(n.drag.duration),text:n.drag.text},n.drag.data);if(s){var d=["duration","element","remove","id","text"];for(var c in s)DayPilot.contains(d,c)||(i[c]=s[c])}(r=new DayPilot.Event(i)).calendar=a,r.part.duration=1e3*n.drag.duration}r.part.external=!0;var h=n.drag.schedulerSourceEvent;h&&h.event&&h.event.calendar===a&&(r.part.external=!1),n.movingEvent=r}n.movingShadow=a.ya(n.movingEvent)}n.moving&&a.gc.updateMoving()}else{DayPilot.de(n.movingShadow);var u=n.moving;n.moving=null,n.movingEvent=null,n.movingShadow=null,n.gShadow||(n.gShadow=n.createGShadow(n.drag.data),n.gShadow.source=u);var v=n.gShadow;v.style.left=o.x+"px",v.style.top=o.y+"px",n.registered.out()}}},n.gTouchEnd=function(t){n.gMouseUp(t)},n.gMouseMove=function(t){if(void 0!==n&&!(DayPilot.Global.touch.active||DayPilot.Global.touch.start||(t=t||window.event,t.insideMainD||t.srcElement&&t.srcElement.inside))){var e=DayPilot.mc(t);if(n.drag){if(!n.drag.startFired){var i=n.drag.data||{},a=i.onDragStart,o=!1;if("function"==typeof a){var r={};r.data=i,r.preventDefault=function(){r.preventDefault.value=!0},a(r),o=r.preventDefault.value}if(n.drag.startFired=!0,o)return void(n.drag=null)}if(document.body.style.cursor="move",n.gShadow||(n.gShadow=n.createGShadow(n.drag.data)),(l=n.gShadow).style.left=e.x+"px",l.style.top=e.y+"px",n.moving=null,n.movingEvent=null,n.movingShadow)(s=n.movingShadow.calendar)&&s.Mj(),n.movingShadow.calendar=null,DayPilot.de(n.movingShadow),n.movingShadow=null}else if(n.moving&&n.movingEvent&&n.movingEvent.calendar.dragOutAllowed&&!n.drag){var l,s=n.movingEvent.calendar;t=n.movingEvent;document.body.style.cursor="move",n.gShadow||(n.gShadow=n.createGShadow(t.data),n.gShadow.source=n.moving),(l=n.gShadow).style.left=e.x+"px",l.style.top=e.y+"px",n.drag={};var d=n.drag;d.schedulerSourceEvent=n.moving,d.element=null,d.duration=(t.rawend().getTime()-t.start().getTime())/1e3,d.text=t.text(),d.id=t.value(),d.event=DayPilot.Util.copyProps(t,new DayPilot.Event),s.Mj(),DayPilot.de(n.movingShadow),n.movingShadow.calendar=null,n.movingShadow=null}n.registered.out()}},n.gUnload=function(t){if(n.registered)for(var e=0;e<n.registered.length;e++){var i=n.registered[e];n.unregister(i)}},n.gMouseDown=function(t){n.editing&&n.editing.blur()},n.gKeyUp=function(t){17===(t=t||window.event).keyCode&&n.rangeCalendar&&n.rangeCalendar.Xl.dispatch()},n.gMouseUp=function(t){if(DayPilot.list(n.registered).each(function(t){t.$k()}),n.resizing){var e=function(){var t=n.resizingEvent.calendar;document.body.style.cursor="",n.resizing=null,n.resizingEvent=null,DayPilot.de(n.resizingShadow),n.resizingShadow=null,t.bm()};if(setTimeout(function(){n.preventEventClick=!1}),!n.resizingShadow)return void e();var i=(c=n.resizingEvent).calendar,r=n.resizingShadow.finalStart,l=n.resizingShadow.finalEnd,s=n.resizingShadow.overlapping,d=!n.resizingShadow.allowed;if(i.Mj(),i.Bj.clear(),e(),s||d)return;i.Ya(c,r,l)}else if(n.movingEvent){e=function(){DayPilot.Global.movingAreaData=null;var t=n.movingShadow&&n.movingShadow.calendar;n.movingShadow&&(DayPilot.de(n.movingShadow),n.movingShadow.calendar=null),document.body.style.cursor="",n.moving=null,n.movingEvent=null,n.drag=null,t.bm(),t&&(t.Vc=null)};if(!n.movingShadow)return void e();var c=n.movingEvent;if(!(i=n.movingShadow.calendar))return void e();if(DayPilot.Util.removeClass(n.moving,i.q(i.yl.eventMovingSource)),function(){if(n.drag&&n.drag.schedulerSourceEvent){var t=n.drag.schedulerSourceEvent;if(t&&t.event){var e=t.event.calendar;DayPilot.Util.removeClass(t,e.q(i.yl.eventMovingSource))}}}(),!n.movingShadow.row)return void e();clearTimeout(i.mj.timeout);r=n.movingShadow.start,l=n.movingShadow.end;var h="Days"!==i.viewType?n.movingShadow.row.id:null,u=!!n.drag&&c.part.external,v=n.movingShadow.line;s=n.movingShadow.overlapping,d=!n.movingShadow.allowed;if(n.drag&&(i.todo||(i.todo={}),i.todo.del=n.drag.element,n.drag=null),n.movingShadow.calendar=null,document.body.style.cursor="",n.moving=null,n.movingEvent=null,s||d||i.Fj.forbidden||i.Fj.invalid)return void i.Wh();t=t||window.event;i._a(c,r,l,h,u,t,v),DayPilot.Global.movingAreaData=null}else if(n.range){t=t||window.event;var f=DayPilot.Util.mouseButton(t),p=n.range;e=function(){i.bm()};(i=p.calendar).Vl=null;var g=t.ctrlKey||t.metaKey;if(i.allowMultiRange)return i.elements.range2.overlapping?(DayPilot.de(i.elements.range2),i.elements.range2=null,i.Mj()):i.Xl.add(p),n.range=null,g||i.Xl.dispatch(),void e();if(n.timeRangeTimeout)return clearTimeout(n.timeRangeTimeout),n.timeRangeTimeout=null,void e();i.rangeHold=p,n.range=null;var y=function(t){return function(){n.timeRangeTimeout=null;var e=i.elements.range2;return e&&e.overlapping?void i.clearSelection():(i.Xh(t),void("Hold"!==i.timeRangeSelectedHandling&&"HoldForever"!==i.timeRangeSelectedHandling||(i.rangeHold=t)))}},m=i.Wl(p);if(e(),!f.left)return void(n.timeRangeTimeout=null);if(p.moved||"Disabled"===i.timeRangeDoubleClickHandling)return y(m)(),(t=t||window.event).cancelBubble=!0,!1;n.timeRangeTimeout=setTimeout(y(m),i.doubleClickTimeout)}else if(a.row){(i=a.calendar)&&i.sk()}else if(o.source){(i=o.calendar).Ei.clearShadow(),i.Ei.hideLinkpoints(),o.source=null,o.calendar=null}else if(n.splitting){n.splitting.cleanup(),n.splitting=null}else if(n.rectangleSelect){var b=n.rectangleSelect;i=b.calendar;if(!b.moved)return n.rectangleSelect=null,void(i.El(i.coords)||i.Yl(t));var w=b.x,D=b.y,P=b.width,x=b.height,k=!1,C=i.Sg.eventsInRectangle(w,D,P,x).map(function(t){return t.event});if("function"==typeof i.onRectangleEventSelect){var S;if((S={}).events=C,S.append=!1,S.start=i.getDate(w,!0),S.end=i.getDate(w+P,!0),S.preventDefault=function(){this.preventDefault.value=!0},i.onRectangleEventSelect(S),S.preventDefault.value)return i.Ol.clear(),void(n.rectangleSelect=null);k=S.append}if(k||i.multiselect.clear(!0),C.each(function(t){i.multiselect.add(t,!0)}),i.multiselect.redraw(),setTimeout(function(){i.Ol.clear(),n.rectangleSelect=null},0),"function"==typeof i.onRectangleEventSelected)(S={}).events=C,i.onRectangleEventSelected(S)}if(n.drag&&(n.drag.event&&n.drag.event.part&&delete n.drag.event.part.external,n.drag=null,document.body.style.cursor=""),n.gShadow){if(n.gShadow.source){i=n.gShadow.source.event.calendar;DayPilot.Util.removeClass(n.gShadow.source,i.q(i.yl.eventMovingSource))}document.body.removeChild(n.gShadow),n.gShadow=null}n.moveOffsetX=null,n.moveDragStart=null},n.createGShadow=function(t){t=t||{};var e=document.createElement("div");return e.setAttribute("unselectable","on"),e.style.position="absolute",e.style.width="100px",e.style.height="20px",e.style.zIndex=101,e.style.pointerEvents="none",e.style.backgroundColor="#aaaaaa",e.style.opacity=.5,e.style.filter="alpha(opacity=50)",e.className=t.externalCssClass,t.externalHtml&&(e.innerHTML=t.externalHtml),document.body.appendChild(e),e};var a={};DayPilot.Global.rowmoving=a;var o={};DayPilot.Global.linking=o,"undefined"!=typeof jQuery&&(jQuery.fn.daypilotScheduler=function(t){var e=null,i=this.each(function(){if(!this.daypilot){var i=new DayPilot.Scheduler(this.id||this,t);i.init(),this.daypilot=i,e||(e=i)}});return 1===this.length?e:i}),(l=DayPilot.am())&&l.directive("daypilotScheduler",["$parse",function(t){return{restrict:"E",template:"<div id='{{id}}'></div>",compile:function(e,i){return e[0].removeAttribute("id"),e[0].innerHTML=this.template.replace("{{id}}",i.id),function(e,i,n){var a=new DayPilot.Scheduler(i[0].firstChild);a.ud.scope=e;var o=n.id;o&&(e[o]=a);var r=n.publishAs;r&&(0,t(r).assign)(e,a);for(var l in n)0===l.indexOf("on")&&(DayPilot.Util.shouldApply(l)?function(i){a[i]=function(a){var o=t(n[i]);DayPilot.Util.safeApply(e,function(){o(e,{args:a})})}}(l):function(i){a[i]=function(a){t(n[i])(e,{args:a})}}(l));var s=e.$watch,d=n.config||n.daypilotConfig,c=n.events||n.daypilotEvents;d||a.init(),s.call(e,d,function(t,e){a.Ad(t),a.B?(a.update(),a.Jd()):a.init()},!0),c&&s.call(e,c,function(t){a.events.list=t,a.Vb({eventsOnly:!0})},!0),e.$on("$destroy",function(){a.dispose()})}}}}]),"undefined"!=typeof Sys&&Sys.Application&&Sys.Application.notifyScriptLoaded&&Sys.Application.notifyScriptLoaded()}var l,s}(),void 0===DayPilot)var DayPilot={};void 0===DayPilot.Global&&(DayPilot.Global={}),void 0===DayPilot.Year&&(DayPilot.Year=function(t,e){this.v="2018.4.3469",this.startDate=new DayPilot.Date,this.cssOnly=!0,this.cssClassPrefix=null,this.columns=4,this.cellWidth=20,this.showWeekNumbers=!1,this.Km=[],this.yf=function(){this.root.dp=this,this.se=new DayPilot.Date(this.startDate.toString("yyyy-01-01","en-us"))},this.q=function(t){return this.cssClassPrefix?this.cssClassPrefix+t:""},this.zf=function(){return this.showWeekNumbers?this.cellWidth:0},this.Lm=function(){this.Km=[];var t=this.columns,e=12/t;this.root.className=this.q("_main"),this.root.style.width=t*(7*this.cellWidth+this.zf())+"px";for(var i=0;i<e;i++){for(var n=0;n<t;n++){var a=i*t+n,o=o+"_nav_"+a,r=document.createElement("div");r.id=o,r.style.float="left",this.root.appendChild(r);var l=new DayPilot.Navigator(o);l.startDate=this.se.addMonths(a),l.cssOnly=this.cssOnly,l.cssClassPrefix=this.cssClassPrefix,l.cellWidth=this.cellWidth,l.showWeekNumbers=this.showWeekNumbers,l.internal.showLinks={},l.selectMode="none",l.timeRangeSelectedHandling="JavaScript",l.onTimeRangeSelected=this.Mm,l.init(),l.root.className="",this.Km.push(l)}var s=document.createElement("div");s.style.clear="left",this.root.appendChild(s)}},this.init=function(){if(this.root=document.getElementById(t),!this.root.dp)return this.yf(),this.Lm(),this}}),function(){var t=require("react"),e=require("react-dom"),i=require("create-react-class")({getInitialState:function(){return{}},componentDidMount:function(){this.control=new DayPilot.Scheduler(e.findDOMNode(this),this.props).init()},componentWillUnmount:function(){this.control.dispose()},componentDidUpdate:function(t,e,i){this.control.update(this.props)},render:function(){return t.createElement("div")}});module.exports={DayPilot:DayPilot,DayPilotScheduler:i}}();